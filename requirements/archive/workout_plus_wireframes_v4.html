<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Workout+ v4 — Primer Token ベース</title>
  <link rel="stylesheet" href="../design-system/tokens.css">
  <style>
/* ==============================================
   Workout+ Base CSS
   Token-referenced styles for app shell,
   phone frame, tab bar, and base layout
   ============================================== */

/* ── Reset ── */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* ── Body ── */
body {
  background: var(--bgColor-default);
  font-family: var(--fontStack-sansSerif);
  color: var(--fgColor-default);
  min-height: 100vh;
  line-height: var(--base-text-lineHeight-default);
}

/* ── Button Base ── */
button {
  font-family: inherit;
  cursor: pointer;
}

/* ── App Layout ── */
.app {
  padding: var(--base-size-32) var(--base-size-16);
  max-width: 100%;
}

/* ── Title Area ── */
.title-area {
  text-align: center;
  margin-bottom: var(--base-size-32);
}

.title-area h1 {
  font-size: var(--base-text-size-6xl);  /* 28px */
  font-weight: var(--base-text-weight-bold);
  color: var(--fgColor-emphasis);
  letter-spacing: -0.5px;
}

.title-area p {
  color: var(--fgColor-muted);
  font-size: var(--base-text-size-md);  /* 13px */
  margin-top: var(--base-size-6);
}

/* ── Screen Tabs ── */
.screen-tabs {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: var(--base-size-6);
  margin-bottom: var(--base-size-32);
}

.screen-tabs button {
  padding: var(--base-size-8) var(--base-size-16);
  border-radius: var(--borderRadius-medium);
  border: var(--borderWidth-thin) solid var(--borderColor-default);
  background: var(--bgColor-muted);
  color: var(--fgColor-muted);
  font-size: var(--base-text-size-md);  /* 13px */
  font-weight: var(--base-text-weight-normal);
  font-family: inherit;
}

.screen-tabs button.active {
  background: var(--bgColor-accent-emphasis);
  border-color: var(--bgColor-accent-emphasis);
  color: var(--fgColor-onEmphasis);
  font-weight: var(--base-text-weight-semibold);
}

/* ── Phone Wrapper ── */
.phone-wrapper {
  display: flex;
  justify-content: center;
}

/* ── Phone Frame ── */
/* border-radius: 44px はデバイス形状のため例外的に --base-size-44 (2.75rem) を使用 */
.phone {
  width: 390px;
  height: 844px;
  background: var(--bgColor-muted);
  border-radius: var(--base-size-44);
  border: var(--borderWidth-thicker) solid var(--borderColor-muted);
  overflow: hidden;
  position: relative;
  box-shadow: var(--shadow-large);
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
}

/* ── Status Bar ── */
.status-bar {
  height: 54px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 28px;
  background: var(--bgColor-default);
  flex-shrink: 0;
  position: relative;
  z-index: 2;
  border-bottom: var(--borderWidth-thin) solid var(--borderColor-default);
}

.status-bar .time {
  font-size: var(--base-text-size-lg);  /* 15px */
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-emphasis);
}

.status-bar-icons {
  display: flex;
  align-items: center;
  gap: var(--base-size-6);
}

/* ── Notch ── */
/* background: #000 はデバイスハードウェア形状のためトークン外 */
.notch {
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 160px;
  height: 34px;
  background: #000;
  border-radius: 0 0 22px 22px;
  z-index: 3;
}

/* ── Screen Content ── */
.screen-content {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  position: relative;
}

.screen-content::-webkit-scrollbar {
  display: none;
}

/* ── Screen ── */
.screen {
  display: none;
}

.screen.active {
  display: block;
}

/* ── Screen Heights ── */
#screen-history,
#screen-picker,
#screen-discard-dialog {
  height: 100%;
  position: relative;
  overflow: hidden;
}

#screen-history-full {
  height: 100%;
  overflow-y: auto;
}

#screen-history-full::-webkit-scrollbar {
  display: none;
}

/* ── Tab Bar ── */
.tab-bar {
  height: 84px;
  background: var(--bgColor-default);
  border-top: var(--borderWidth-thin) solid var(--borderColor-default);
  display: flex;
  align-items: flex-start;
  justify-content: space-around;
  padding: var(--base-size-8) var(--base-size-16) 0;
  flex-shrink: 0;
}

/* ── Tab Bar Item ── */
.tab-bar-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--base-size-4);
  flex: 1;
  padding: var(--base-size-8);
  background: none;
  border: none;
  color: var(--fgColor-muted);
  font-family: inherit;
}

.tab-bar-item.active {
  color: var(--fgColor-accent);
}

.tab-bar-item.active .tab-bar-icon svg {
  stroke-width: 2.5;
}

.tab-bar-item.active .tab-bar-label {
  font-weight: var(--base-text-weight-bold);
}

.tab-bar-icon {
  font-size: var(--base-text-size-4xl);  /* 24px */
}

.tab-bar-label {
  font-size: var(--base-text-size-xs);   /* 11px */
  font-weight: var(--base-text-weight-normal);
  letter-spacing: 0.2px;
}

/* ── SVG Icon Sizing ── */
.task-icon svg,
.widget-icon svg,
.placeholder-icon svg,
.tab-bar-icon svg,
.stat-item svg {
  width: 1em;
  height: 1em;
  flex-shrink: 0;
}

/* ── Tab Bar Center (Add Button) ── */
.tab-bar-item.center {
  position: relative;
  margin-top: -24px;
}

.add-button {
  width: 56px;
  height: 56px;
  border-radius: var(--borderRadius-full);
  background: var(--bgColor-accent-emphasis);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: var(--base-text-size-6xl);  /* 28px */
  color: var(--fgColor-onEmphasis);
  box-shadow: var(--shadow-medium);
  border: var(--borderWidth-thick) solid var(--bgColor-muted);
  cursor: pointer;
  font-family: inherit;
}

/* ── Tab Bar Spacer ── */
.tab-bar-spacer {
  height: 84px;
}

/* ── Transition Hint ── */
.transition-hint {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: var(--fgColor-emphasis);
  color: var(--fgColor-onEmphasis);
  padding: var(--base-size-8) var(--base-size-16);
  border-radius: var(--borderRadius-medium);
  font-size: var(--base-text-size-sm);   /* 12px */
  z-index: 9999;
  opacity: 0;
  transition: opacity var(--base-duration-300);
  pointer-events: none;
  white-space: nowrap;
}

.transition-hint.show {
  opacity: 1;
}

/* ── Data Goto ── */
[data-goto] {
  cursor: pointer !important;
}

[data-goto]:hover {
  opacity: 0.85;
}

/* ==============================================
   Home Screen + Completion Summary Screen CSS
   Primer Token Migration
   ============================================== */

/* ===============================================
   Home Screen: Header
   =============================================== */
.home-header {
  background: var(--bgColor-default);
  padding: var(--base-size-40) var(--base-size-20) var(--base-size-20);
  border-bottom: var(--borderWidth-thin) solid var(--borderColor-default);
}

.home-header-top {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--base-size-16);
}

.home-greeting {
  font-size: var(--base-text-size-3xl);
  font-weight: var(--base-text-weight-semibold);
  letter-spacing: -0.3px;
  color: var(--fgColor-emphasis);
}

.user-avatar {
  width: var(--base-size-32);
  height: var(--base-size-32);
  border-radius: var(--borderRadius-full);
  background: var(--bgColor-accent-muted);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: var(--base-text-weight-semibold);
  font-size: var(--base-text-size-md);
  border: var(--borderWidth-thin) solid var(--borderColor-default);
  color: var(--fgColor-accent);
  cursor: pointer;
}

/* ===============================================
   Home Screen: Streak Card
   =============================================== */
.streak-card {
  background: var(--bgColor-accent-subtle);
  border-radius: var(--borderRadius-large);
  padding: var(--base-size-16);
  border: var(--borderWidth-thin) solid var(--bgColor-accent-muted);
}

.streak-top {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
}

.streak-label {
  font-size: var(--base-text-size-sm);
  font-weight: var(--base-text-weight-normal);
  color: var(--fgColor-accent);
  opacity: 0.85;
  margin-bottom: var(--base-size-4);
}

.streak-number {
  font-size: var(--base-text-size-7xl);
  font-weight: var(--base-text-weight-bold);
  line-height: 1;
  color: var(--fgColor-accent);
}

.streak-unit {
  font-size: var(--base-text-size-normal);
  font-weight: var(--base-text-weight-normal);
  color: var(--fgColor-accent);
  margin-left: 0.125rem;
}

.streak-fire {
  width: 1.75rem;
  height: 1.75rem;
  flex-shrink: 0;
  color: var(--fgColor-accent);
  opacity: 0.7;
}

.streak-week {
  display: flex;
  gap: var(--base-size-8);
  margin-top: var(--base-size-12);
}

.streak-day {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--base-size-4);
}

.streak-day-circle {
  width: 1.75rem;
  height: 1.75rem;
  border-radius: var(--borderRadius-full);
  display: flex;
  align-items: center;
  justify-content: center;
}

.streak-day-circle.done {
  background: var(--bgColor-accent-emphasis);
}

.streak-day-circle.done svg {
  width: 0.875rem;
  height: 0.875rem;
  color: var(--fgColor-onEmphasis);
}

.streak-day-circle.rest {
  background: var(--bgColor-accent-subtle);
}

.streak-day-label {
  font-size: var(--base-text-size-xs);
  font-weight: var(--base-text-weight-normal);
  color: var(--fgColor-accent);
  opacity: 0.7;
}

/* ===============================================
   Home Screen: Main Content
   =============================================== */
.home-main {
  padding: var(--base-size-20);
}

/* Section Header */
.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--base-size-16);
}

.section-header--spaced {
  margin-top: var(--base-size-24);
}

.section-title {
  font-size: var(--base-text-size-normal);
  font-weight: var(--base-text-weight-bold);
  color: var(--fgColor-default);
  display: flex;
  align-items: center;
  gap: var(--base-size-6);
}

.section-count {
  font-size: var(--base-text-size-sm);
  color: var(--fgColor-muted);
  font-weight: var(--base-text-weight-normal);
}

.view-all-link {
  font-size: var(--base-text-size-normal);
  color: var(--fgColor-accent);
  font-weight: var(--base-text-weight-semibold);
  text-decoration: none;
  cursor: pointer;
}

/* ===============================================
   Home Screen: Weekly Goals Card
   =============================================== */
.weekly-goals {
  background: var(--bgColor-default);
  border-radius: var(--borderRadius-large);
  padding: var(--base-size-20);
  margin-bottom: var(--base-size-24);
  box-shadow: var(--shadow-small);
  border: var(--borderWidth-thin) solid var(--borderColor-default);
}

.goals-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--base-size-16);
}

.goals-title {
  font-size: var(--base-text-size-xl);
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-emphasis);
}

.status-badge {
  display: inline-flex;
  align-items: center;
  gap: var(--base-size-6);
  padding: var(--base-size-4) var(--base-size-12);
  border-radius: var(--borderRadius-medium);
  font-size: var(--base-text-size-sm);
  font-weight: var(--base-text-weight-semibold);
  letter-spacing: 0.3px;
}

.status-badge.on-track {
  background: var(--bgColor-accent-muted);
  color: var(--fgColor-accent);
}

.status-badge.completed {
  background: var(--borderColor-accent-emphasis, var(--bgColor-accent-muted));
  color: var(--fgColor-accent);
}

.status-dot {
  width: var(--base-size-6);
  height: var(--base-size-6);
  border-radius: var(--borderRadius-full);
  background: currentColor;
}

.goals-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--base-size-12);
  margin-bottom: var(--base-size-16);
}

.goal-item { text-align: center; }

.goal-value {
  font-size: var(--base-text-size-4xl);
  font-weight: var(--base-text-weight-bold);
  color: var(--fgColor-emphasis);
  margin-bottom: var(--base-size-4);
}

.goal-label {
  font-size: var(--base-text-size-sm);
  color: var(--fgColor-muted);
  font-weight: var(--base-text-weight-normal);
}

.goal-change {
  font-size: var(--base-text-size-sm);
  font-weight: var(--base-text-weight-semibold);
  margin-top: 0.125rem;
}

.goal-change.positive { color: var(--fgColor-success); }

/* Progress Bar */
.progress-container { margin-top: var(--base-size-12); }

.progress-header {
  display: flex;
  justify-content: space-between;
  margin-bottom: var(--base-size-8);
}

.progress-label {
  font-size: var(--base-text-size-md);
  color: var(--fgColor-muted);
  font-weight: var(--base-text-weight-normal);
}

.progress-percentage {
  font-size: var(--base-text-size-md);
  font-weight: var(--base-text-weight-bold);
  color: var(--fgColor-accent);
}

.progress-bar {
  height: var(--base-size-8);
  background: var(--bgColor-emphasis);
  border-radius: var(--borderRadius-medium);
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background: var(--bgColor-accent-emphasis);
  border-radius: var(--borderRadius-medium);
}

/* ===============================================
   Home Screen: Workout Task Cards
   =============================================== */
.workout-tasks { margin-bottom: var(--base-size-24); }

.task-card {
  background: var(--bgColor-default);
  border-radius: var(--borderRadius-large);
  padding: var(--base-size-16);
  margin-bottom: var(--base-size-12);
  box-shadow: var(--shadow-small);
  border: var(--borderWidth-thin) solid var(--borderColor-default);
  cursor: pointer;
}

.task-header {
  display: flex;
  align-items: center;
  gap: var(--base-size-12);
  margin-bottom: var(--base-size-12);
}

.task-icon {
  width: var(--base-size-40);
  height: var(--base-size-40);
  border-radius: var(--borderRadius-large);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: var(--base-text-size-3xl);
  flex-shrink: 0;
}

.task-icon.chest { background: var(--bgColor-accent-muted); }
.task-icon.back  { background: var(--bgColor-accent-muted); }
.task-icon.legs  { background: var(--bgColor-accent-muted); }

.task-info { flex: 1; }

.task-title {
  font-size: var(--base-text-size-lg);
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-emphasis);
  margin-bottom: var(--base-size-4);
}

.task-meta {
  font-size: var(--base-text-size-md);
  color: var(--fgColor-muted);
  display: flex;
  align-items: center;
  gap: var(--base-size-8);
}

.task-tags {
  display: flex;
  gap: var(--base-size-6);
  flex-wrap: wrap;
  margin-bottom: var(--base-size-8);
}

.task-tag {
  padding: var(--base-size-4) var(--base-size-8);
  border-radius: var(--borderRadius-medium);
  font-size: var(--base-text-size-xs);
  font-weight: var(--base-text-weight-semibold);
  letter-spacing: 0.3px;
}

/* タグ色は意味を持つ色分けのためそのまま維持 */
.task-tag.sets   { background: #fef3c7; color: #92400e; }
.task-tag.volume { background: #dbeafe; color: #1e40af; }
.task-tag.time   { background: #f3e8ff; color: #6b21a8; }

.task-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.task-stats {
  display: flex;
  gap: var(--base-size-12);
  font-size: var(--base-text-size-sm);
  color: var(--fgColor-muted);
}

.stat-item {
  display: flex;
  align-items: center;
  gap: var(--base-size-4);
}

/* ===============================================
   Home Screen: Dashboard Widgets
   =============================================== */
.dashboard-widgets { margin-bottom: var(--base-size-24); }

.widgets-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--base-size-12);
}

.widget-card {
  background: var(--bgColor-default);
  border-radius: var(--borderRadius-large);
  padding: var(--base-size-16);
  box-shadow: var(--shadow-small);
  border: var(--borderWidth-thin) solid var(--borderColor-default);
}

.widget-header {
  display: flex;
  align-items: center;
  gap: var(--base-size-8);
  margin-bottom: var(--base-size-12);
}

.widget-icon {
  width: var(--base-size-32);
  height: var(--base-size-32);
  border-radius: var(--borderRadius-medium);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: var(--base-text-size-xl);
}

.widget-icon.target   { background: var(--bgColor-accent-muted); }
.widget-icon.calendar { background: var(--bgColor-accent-muted); }
.widget-icon.trophy   { background: var(--bgColor-accent-muted); }
.widget-icon.chart    { background: var(--bgColor-accent-muted); }

.widget-title {
  font-size: var(--base-text-size-md);
  color: var(--fgColor-muted);
  font-weight: var(--base-text-weight-normal);
}

.widget-value {
  font-size: var(--base-text-size-6xl);
  font-weight: var(--base-text-weight-bold);
  color: var(--fgColor-emphasis);
  margin-bottom: var(--base-size-4);
}

.widget-subtitle {
  font-size: var(--base-text-size-sm);
  color: var(--fgColor-muted);
}

.widget-trend {
  display: inline-flex;
  align-items: center;
  gap: var(--base-size-4);
  font-size: var(--base-text-size-sm);
  font-weight: var(--base-text-weight-semibold);
  margin-top: var(--base-size-4);
  padding: 0.125rem var(--base-size-8);
  border-radius: var(--borderRadius-medium);
}

.widget-trend.up {
  background: var(--bgColor-accent-muted);
  color: var(--fgColor-accent);
}

/* Tab bar spacer inside home */
.tab-bar-spacer { height: 5.25rem; }

/* ===============================================
   Completion Summary Screen
   =============================================== */
#screen-summary {
  padding: var(--base-size-16) var(--base-size-20) 7.5rem;
}

.summary-header {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-bottom: var(--base-size-24);
  padding-top: var(--base-size-16);
}

.summary-check-icon {
  width: var(--base-size-48);
  height: var(--base-size-48);
  color: var(--fgColor-success);
  margin-bottom: var(--base-size-12);
}

.summary-title {
  font-size: var(--base-text-size-4xl);
  font-weight: var(--base-text-weight-bold);
  color: var(--fgColor-emphasis);
}

.summary-main-card {
  background: var(--bgColor-default);
  border: var(--borderWidth-thin) solid var(--borderColor-default);
  border-radius: var(--borderRadius-large);
  padding: var(--base-size-20);
  margin-bottom: var(--base-size-16);
  text-align: center;
}

.summary-workout-name {
  font-size: var(--base-text-size-2xl);
  font-weight: var(--base-text-weight-bold);
  color: var(--fgColor-emphasis);
  margin-bottom: var(--base-size-8);
}

.summary-datetime {
  font-size: var(--base-text-size-normal);
  font-weight: var(--base-text-weight-normal);
  color: var(--fgColor-muted);
  margin-bottom: var(--base-size-12);
}

.summary-duration {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--base-size-8);
  padding-top: var(--base-size-12);
  border-top: var(--borderWidth-thin) solid var(--bgColor-emphasis);
}

.summary-duration-icon {
  width: var(--base-size-20);
  height: var(--base-size-20);
  color: var(--fgColor-muted);
}

.summary-duration-text {
  font-size: var(--base-text-size-xl);
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-default);
}

/* Summary screen: stats-grid override to 2 columns */
#screen-summary .stats-grid {
  grid-template-columns: 1fr 1fr;
  gap: var(--base-size-12);
}

/* Summary screen: streak card override */
#screen-summary .streak-card {
  background: var(--bgColor-accent-muted);
  border: var(--borderWidth-thin) solid var(--borderColor-accent);
  border-radius: var(--borderRadius-medium);
  padding: var(--base-size-16);
}

/* ===============================================
   PR Section / Exercise Summary
   =============================================== */
.pr-section {
  margin-bottom: var(--base-size-16);
}

.pr-section-title {
  font-size: var(--base-text-size-normal);
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-emphasis);
  margin-bottom: var(--base-size-8);
}

.pr-badge {
  font-size: var(--base-text-size-xs);
  font-weight: var(--base-text-weight-bold);
  color: var(--fgColor-attention);
  background: #FBBF24; /* amber-300: tokens.cssに対応トークンなし */
  padding: 0.125rem var(--base-size-8);
  border-radius: var(--borderRadius-medium);
}

.exercise-summary-section {
  margin-bottom: var(--base-size-24);
}

.exercise-summary-title {
  font-size: var(--base-text-size-normal);
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-emphasis);
  margin-bottom: var(--base-size-8);
}

.exercise-summary-list {
  background: var(--bgColor-default);
  border: var(--borderWidth-thin) solid var(--borderColor-default);
  border-radius: var(--borderRadius-medium);
  overflow: hidden;
}

.exercise-summary-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--base-size-12) var(--base-size-16);
  border-bottom: var(--borderWidth-thin) solid var(--bgColor-emphasis);
}

.exercise-summary-item:last-child {
  border-bottom: none;
}

.exercise-summary-name {
  font-size: var(--base-text-size-normal);
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-emphasis);
}

.exercise-summary-stats {
  display: flex;
  align-items: center;
  gap: var(--base-size-8);
  font-size: var(--base-text-size-normal);
  font-weight: var(--base-text-weight-normal);
  color: var(--fgColor-muted);
}

.exercise-summary-volume {
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-default);
}

/* ===============================================
   Summary Actions / btn-primary
   =============================================== */
.summary-actions {
  margin-top: var(--base-size-24);
}

.btn-primary {
  background: var(--bgColor-accent-emphasis);
  color: var(--fgColor-onEmphasis);
  border: none;
  border-radius: var(--borderRadius-medium);
  padding: var(--base-size-16);
  font-size: var(--base-text-size-xl);
  font-weight: var(--base-text-weight-semibold);
  font-family: inherit;
  width: 100%;
  cursor: pointer;
}

/* ==============================================
   Agent3: Record Screen + Exercise Picker + Exercise History
   Primer Design Token ベース変換
   ============================================== */

/* トークンにない色の追加定義 */
:root {
  /* PR (自己ベスト) アイテム用 - amber系 */
  --bgColor-attention-muted: #fef3c7;
  --borderColor-attention: #fde047;
  --fgColor-attention-emphasis: #92400e;

  /* primary-dark: Primer命名で近似 */
  --fgColor-accent-dark: #3385FF;

  /* added-count の半透明背景 */
  --bgColor-onEmphasis-muted: rgba(255, 255, 255, 0.3);
}

/* ===============================================
   Record Screen
   =============================================== */
.workout-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--base-size-16) var(--base-size-20);
  background: var(--bgColor-default);
  border-bottom: var(--borderWidth-thin) solid var(--borderColor-default);
}

.workout-title {
  font-size: var(--base-text-size-2xl);
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-default);
}

.done-btn {
  padding: var(--base-size-8) var(--base-size-20);
  border-radius: var(--borderRadius-medium);
  border: none;
  background: var(--bgColor-success-emphasis);
  color: var(--fgColor-onEmphasis);
  font-size: var(--base-text-size-normal);
  font-weight: var(--base-text-weight-semibold);
}

.timer-bar {
  display: flex;
  align-items: center;
  gap: var(--base-size-8);
  padding: var(--base-size-8) var(--base-size-20);
  background: var(--bgColor-inset);
  border-bottom: var(--borderWidth-thin) solid var(--borderColor-default);
}

.timer-bar .timer-text {
  margin-left: auto;
}

.timer-bar .done-btn {
  margin-left: var(--base-size-12);
}

.timer-label {
  font-size: var(--base-text-size-md);
  color: var(--fgColor-muted);
  font-weight: var(--base-text-weight-normal);
}

.timer-text {
  font-size: var(--base-text-size-xl);
  font-weight: var(--base-text-weight-bold);
  color: var(--fgColor-emphasis);
  font-variant-numeric: tabular-nums;
}

.scroll-content {
  padding: 0 0 var(--base-size-48);
  /* 120px は base-size に近似: 48*2.5=120 → padding-bottom: 7.5rem */
  padding-bottom: 7.5rem;
}

.exercise {
  padding: var(--base-size-12) var(--base-size-20);
  border-bottom: var(--base-size-8) solid var(--bgColor-emphasis);
}

.exercise-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: var(--base-size-4);
}

.exercise-name {
  font-size: var(--base-text-size-xl);
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-accent);
  cursor: pointer;
}

.exercise-meta {
  font-size: var(--base-text-size-sm);
  color: var(--fgColor-muted);
  font-weight: var(--base-text-weight-normal);
  margin-top: 0.125rem;
}

.previous-badge {
  display: inline-flex;
  align-items: center;
  gap: var(--base-size-4);
  font-size: var(--base-text-size-xs);
  color: var(--fgColor-muted);
  background: var(--bgColor-emphasis);
  padding: var(--base-size-4) var(--base-size-8);
  border-radius: var(--borderRadius-medium);
  font-weight: var(--base-text-weight-normal);
  white-space: nowrap;
  cursor: pointer;
  border: none;
  font-family: inherit;
}

.previous-badge:hover {
  background: var(--bgColor-accent-muted);
  color: var(--fgColor-accent);
}

.previous-badge .copy-icon {
  width: var(--base-text-size-xs);
  height: var(--base-text-size-xs);
  opacity: 0.6;
}

.previous-badge:hover .copy-icon {
  opacity: 1;
}

.sets-list {
  display: flex;
  flex-direction: column;
  gap: 0.125rem;
}

.set-previous {
  font-size: var(--base-text-size-xs);
  color: var(--fgColor-muted);
  font-weight: var(--base-text-weight-normal);
  padding: 0.125rem 0 0 2.25rem;
}

.set-copy-above {
  position: absolute;
  left: -1.75rem;
  top: 50%;
  transform: translateY(-50%);
  width: var(--base-size-20);
  height: var(--base-size-20);
  border-radius: var(--borderRadius-small);
  background: var(--bgColor-emphasis);
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  color: var(--fgColor-muted);
  font-size: var(--base-text-size-sm);
  padding: 0;
}

.set-copy-above:hover {
  background: var(--bgColor-accent-muted);
  color: var(--fgColor-accent);
}

.set-row {
  position: relative;
  display: flex;
  align-items: center;
  gap: var(--base-size-8);
  padding: var(--base-size-8) var(--base-size-12);
  background: var(--bgColor-default);
  border: var(--borderWidth-thin) solid var(--borderColor-default);
  border-radius: var(--borderRadius-medium);
}

.set-number {
  width: var(--base-size-24);
  height: var(--base-size-24);
  border-radius: var(--borderRadius-full);
  background: var(--bgColor-emphasis);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: var(--base-text-size-sm);
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-muted);
  flex-shrink: 0;
}

.set-inputs {
  display: flex;
  align-items: center;
  gap: var(--base-size-4);
  flex: 1;
}

.set-input {
  width: 3.5rem;
  padding: var(--base-size-6) var(--base-size-8);
  border: none;
  border-radius: var(--borderRadius-medium);
  font-size: var(--base-text-size-normal);
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-emphasis);
  text-align: center;
  background: var(--bgColor-inset);
  font-family: inherit;
  outline: none;
  -webkit-appearance: none;
  -moz-appearance: textfield;
}

.set-input::-webkit-outer-spin-button,
.set-input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

.set-input:focus {
  box-shadow: 0 0 0 1.5px var(--fgColor-accent);
}

.set-unit {
  font-size: var(--base-text-size-sm);
  color: var(--fgColor-muted);
  font-weight: var(--base-text-weight-normal);
}

.set-separator {
  font-size: var(--base-text-size-normal);
  color: var(--fgColor-muted);
  font-weight: var(--base-text-weight-normal);
  margin: 0 0.125rem;
}

.set-rm {
  font-size: var(--base-text-size-xs);
  color: var(--fgColor-muted);
  font-weight: var(--base-text-weight-normal);
  white-space: nowrap;
}

.add-set-btn {
  display: block;
  width: 100%;
  padding: var(--base-size-12);
  /* 10px は base-size-8 と base-size-12 の間 → 近似: base-size-12 を使用 */
  margin-top: var(--base-size-8);
  border: var(--borderWidth-thin) dashed var(--fgColor-accent);
  border-radius: var(--borderRadius-medium);
  background: var(--bgColor-accent-muted);
  color: var(--fgColor-accent);
  font-size: var(--base-text-size-md);
  font-weight: var(--base-text-weight-semibold);
  font-family: inherit;
}

.add-exercise-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--base-size-8);
  width: calc(100% - var(--base-size-40));
  margin: var(--base-size-16) var(--base-size-20);
  padding: var(--base-size-16);
  /* 14px → base-size-16 で近似 */
  border: var(--borderWidth-thin) dashed var(--fgColor-accent);
  border-radius: var(--borderRadius-medium);
  background: none;
  color: var(--fgColor-accent);
  font-size: var(--base-text-size-normal);
  font-weight: var(--base-text-weight-semibold);
  font-family: inherit;
}

.exercise-memo {
  display: flex;
  align-items: center;
  gap: var(--base-size-6);
  margin-top: var(--base-size-6);
}

.exercise-memo-icon {
  width: var(--base-text-size-normal);
  height: var(--base-text-size-normal);
  /* #94a3b8 → fgColor-muted 近似 */
  color: var(--fgColor-muted);
  flex-shrink: 0;
}

.exercise-memo-input {
  flex: 1;
  padding: var(--base-size-4) 0;
  border: none;
  border-bottom: var(--borderWidth-thin) solid transparent;
  background: none;
  font-size: var(--base-text-size-sm);
  font-family: inherit;
  color: var(--fgColor-default);
  outline: none;
}

.exercise-memo-input:focus {
  border-bottom-color: var(--fgColor-accent);
}

.exercise-memo-input::placeholder {
  /* #cbd5e1 → borderColor-default 近似 */
  color: var(--borderColor-default);
  font-weight: var(--base-text-weight-normal);
}

.workout-memo {
  padding: var(--base-size-12) var(--base-size-20);
  border-top: var(--borderWidth-thin) solid var(--borderColor-default);
}

.workout-memo-label {
  font-size: var(--base-text-size-sm);
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-muted);
  margin-bottom: var(--base-size-6);
}

.workout-memo-input {
  width: 100%;
  min-height: 3.75rem;
  padding: var(--base-size-12);
  border: var(--borderWidth-thin) solid var(--borderColor-default);
  border-radius: var(--borderRadius-medium);
  background: var(--bgColor-inset);
  font-size: var(--base-text-size-md);
  font-family: inherit;
  color: var(--fgColor-default);
  resize: vertical;
  outline: none;
}

.workout-memo-input:focus {
  box-shadow: 0 0 0 1.5px var(--fgColor-accent);
}

.workout-memo-input::placeholder {
  color: var(--fgColor-muted);
}

/* ===============================================
   Exercise Picker (Fullscreen Modal)
   =============================================== */
.fullscreen-modal {
  display: flex;
  flex-direction: column;
  height: 100%;
  background: var(--bgColor-muted);
}

.modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--base-size-16) var(--base-size-20);
  background: var(--bgColor-default);
  border-bottom: var(--borderWidth-thin) solid var(--borderColor-default);
}

.close-btn {
  width: var(--base-size-32);
  height: var(--base-size-32);
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  background: none;
  color: var(--fgColor-muted);
  padding: 0;
}

.modal-title {
  font-size: var(--base-text-size-xl);
  font-weight: var(--base-text-weight-bold);
  color: var(--fgColor-default);
}

.multi-select-toggle {
  border: none;
  background: none;
  color: var(--fgColor-accent);
  font-size: var(--base-text-size-md);
  font-weight: var(--base-text-weight-semibold);
  font-family: inherit;
  padding: 0;
}

.search-bar {
  padding: var(--base-size-12) var(--base-size-20);
  background: var(--bgColor-default);
}

.search-input-wrapper {
  display: flex;
  align-items: center;
  gap: var(--base-size-8);
  padding: var(--base-size-12);
  border: var(--borderWidth-thin) solid var(--borderColor-default);
  border-radius: var(--borderRadius-medium);
  background: var(--bgColor-inset);
}

.search-icon {
  flex-shrink: 0;
  color: var(--fgColor-muted);
}

.search-input {
  border: none;
  background: none;
  font-size: var(--base-text-size-normal);
  color: var(--fgColor-default);
  font-family: inherit;
  outline: none;
  width: 100%;
}

.search-input::placeholder {
  color: var(--fgColor-muted);
}

.category-tabs {
  display: flex;
  gap: var(--base-size-6);
  padding: var(--base-size-12) var(--base-size-20);
  overflow-x: auto;
  background: var(--bgColor-default);
  border-bottom: var(--borderWidth-thin) solid var(--borderColor-default);
}

.category-tabs::-webkit-scrollbar { display: none; }

.category-tab {
  padding: var(--base-size-6) var(--base-size-16);
  border-radius: var(--borderRadius-medium);
  border: var(--borderWidth-thin) solid var(--borderColor-default);
  background: var(--bgColor-default);
  color: var(--fgColor-muted);
  font-size: var(--base-text-size-md);
  font-weight: var(--base-text-weight-normal);
  font-family: inherit;
  white-space: nowrap;
  flex-shrink: 0;
}

.category-tab.active {
  background: var(--bgColor-accent-emphasis);
  border-color: var(--bgColor-accent-emphasis);
  color: var(--fgColor-onEmphasis);
  font-weight: var(--base-text-weight-semibold);
}

.exercise-content {
  flex: 1;
  overflow-y: auto;
  padding: 0 0 var(--base-size-56);
}

/* 80px は base-size-56 より大きい → 5rem で近似 */
.exercise-content {
  padding-bottom: 5rem;
}

.exercise-content::-webkit-scrollbar { display: none; }

.exercise-content .section-header {
  padding: var(--base-size-12) var(--base-size-20) var(--base-size-8);
}

.exercise-item {
  display: flex;
  align-items: center;
  gap: var(--base-size-12);
  padding: var(--base-size-12) var(--base-size-20);
  border-bottom: var(--borderWidth-thin) solid var(--borderColor-default);
  background: var(--bgColor-default);
}

.exercise-item.selected {
  background: var(--bgColor-accent-muted);
  border-left: 0.1875rem solid var(--fgColor-accent);
}

.exercise-item-content {
  flex: 1;
  min-width: 0;
}

.exercise-item-header {
  display: flex;
  align-items: center;
  gap: var(--base-size-8);
  margin-bottom: var(--base-size-4);
}

.exercise-item-name {
  font-size: var(--base-text-size-normal);
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-default);
}

.favorite-icon {
  flex-shrink: 0;
}

.exercise-item-meta {
  display: flex;
  gap: var(--base-size-6);
  flex-wrap: wrap;
}

.meta-badge {
  padding: 0.125rem var(--base-size-8);
  border-radius: var(--borderRadius-medium);
  font-size: var(--base-text-size-xs);
  font-weight: var(--base-text-weight-normal);
  background: var(--bgColor-emphasis);
  color: var(--fgColor-muted);
}

.meta-badge.muscle-badge {
  background: var(--bgColor-accent-muted);
  /* --color-primary-dark → fgColor-accent-dark */
  color: var(--fgColor-accent-dark);
  font-weight: var(--base-text-weight-semibold);
}

.meta-badge.equipment-badge {
  background: var(--bgColor-emphasis);
  color: var(--fgColor-muted);
}

.checkbox {
  width: 1.375rem;
  height: 1.375rem;
  border-radius: var(--borderRadius-medium);
  border: var(--borderWidth-thick) solid var(--borderColor-default);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  background: var(--bgColor-default);
}

.checkbox.checked {
  background: var(--bgColor-accent-emphasis);
  border-color: var(--bgColor-accent-emphasis);
  color: var(--fgColor-onEmphasis);
}

.multi-select-footer {
  display: flex;
  gap: var(--base-size-12);
  padding: var(--base-size-12) var(--base-size-20);
  border-top: var(--borderWidth-thin) solid var(--borderColor-default);
  background: var(--bgColor-default);
}

.cancel-btn {
  flex: 1;
  padding: var(--base-size-12);
  border: var(--borderWidth-thin) solid var(--borderColor-default);
  border-radius: var(--borderRadius-medium);
  background: var(--bgColor-default);
  color: var(--fgColor-muted);
  font-size: var(--base-text-size-normal);
  font-weight: var(--base-text-weight-semibold);
  font-family: inherit;
}

.add-selected-btn {
  flex: 2;
  padding: var(--base-size-12);
  border: none;
  border-radius: var(--borderRadius-medium);
  background: var(--bgColor-accent-emphasis);
  color: var(--fgColor-onEmphasis);
  font-size: var(--base-text-size-normal);
  font-weight: var(--base-text-weight-semibold);
  font-family: inherit;
}

.added-count {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: var(--base-size-20);
  height: var(--base-size-20);
  border-radius: var(--borderRadius-full);
  background: var(--bgColor-onEmphasis-muted);
  font-size: var(--base-text-size-xs);
  font-weight: var(--base-text-weight-bold);
  margin-right: var(--base-size-4);
}

/* ===============================================
   Exercise History: Bottom Sheet
   =============================================== */
.history-backdrop {
  position: relative;
  height: 30%;
  overflow: hidden;
  background: var(--bgColor-muted);
}

.bottom-sheet {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 70%;
  background: var(--bgColor-default);
  border-top: var(--borderWidth-thin) solid var(--borderColor-default);
  border-radius: var(--borderRadius-large) var(--borderRadius-large) 0 0;
  display: flex;
  flex-direction: column;
  z-index: 10;
}

.drag-handle {
  width: 2.25rem;
  height: var(--base-size-4);
  /* #D1D5DB → borderColor-muted */
  background: var(--borderColor-muted);
  border-radius: 0.125rem;
  margin: var(--base-size-8) auto;
  flex-shrink: 0;
}

.sheet-header {
  padding: var(--base-size-8) var(--base-size-20) var(--base-size-16);
  border-bottom: var(--borderWidth-thin) solid var(--borderColor-default);
  flex-shrink: 0;
}

.sheet-title {
  font-size: var(--base-text-size-2xl);
  font-weight: var(--base-text-weight-bold);
  color: var(--fgColor-default);
  margin-bottom: var(--base-size-4);
}

.sheet-subtitle {
  font-size: var(--base-text-size-sm);
  color: var(--fgColor-muted);
  font-weight: var(--base-text-weight-normal);
}

.sheet-content {
  flex: 1;
  overflow-y: auto;
  padding: var(--base-size-16) var(--base-size-20);
}

.sheet-content::-webkit-scrollbar { display: none; }

/* Stats Grid (shared between bottom sheet and fullscreen) */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--base-size-8);
  margin-bottom: var(--base-size-16);
}

.stats-grid-6 {
  grid-template-columns: repeat(3, 1fr);
}

.stat-card {
  padding: var(--base-size-12);
  background: var(--bgColor-muted);
  border: var(--borderWidth-thin) solid var(--borderColor-default);
  border-radius: var(--borderRadius-medium);
  text-align: center;
}

.stat-label {
  font-size: var(--base-text-size-xs);
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-muted);
  margin-bottom: var(--base-size-4);
}

.stat-value {
  font-size: var(--base-text-size-3xl);
  font-weight: var(--base-text-weight-bold);
  color: var(--fgColor-default);
}

.stat-unit {
  font-size: var(--base-text-size-sm);
  font-weight: var(--base-text-weight-normal);
  color: var(--fgColor-muted);
}

/* Chart */
.chart-section {
  margin-bottom: var(--base-size-16);
}

.chart-section .section-title {
  margin-bottom: var(--base-size-8);
}

.chart-container {
  height: 11.25rem;
  border: var(--borderWidth-thin) solid var(--borderColor-default);
  border-radius: var(--borderRadius-medium);
  background: var(--bgColor-muted);
  display: flex;
  align-items: flex-end;
  gap: var(--base-size-6);
  padding: var(--base-size-16) var(--base-size-12);
}

.chart-container.large-chart {
  height: 17.5rem;
}

.chart-bar {
  flex: 1;
  background: var(--bgColor-accent-emphasis);
  border-radius: var(--borderRadius-medium) var(--borderRadius-medium) 0 0;
  min-height: var(--base-size-4);
}

.chart-bar.highlight {
  background: var(--bgColor-success-emphasis);
}

/* History List */
.history-list {
  margin-bottom: var(--base-size-16);
}

.history-list .section-title {
  margin-bottom: var(--base-size-8);
}

.history-item {
  border: var(--borderWidth-thin) solid var(--borderColor-default);
  border-radius: var(--borderRadius-medium);
  padding: var(--base-size-12);
  margin-bottom: var(--base-size-8);
  background: var(--bgColor-muted);
}

.history-date {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--base-size-8);
}

.history-date span {
  font-size: var(--base-text-size-md);
  font-weight: var(--base-text-weight-bold);
  color: var(--fgColor-default);
}

.history-badge {
  font-size: var(--base-text-size-xxs, 0.625rem);
  /* 10px: tokens.cssにxxsがないため直値 */
  font-size: 0.625rem;
  font-weight: var(--base-text-weight-bold);
  color: var(--fgColor-onEmphasis);
  background: var(--bgColor-success-emphasis);
  padding: 0.125rem var(--base-size-8);
  border-radius: var(--borderRadius-medium);
  letter-spacing: 0.5px;
}

.history-sets {
  display: flex;
  flex-wrap: wrap;
  gap: var(--base-size-6);
}

.history-set {
  font-size: var(--base-text-size-sm);
  font-weight: var(--base-text-weight-normal);
  color: var(--fgColor-muted);
  background: var(--bgColor-default);
  border: var(--borderWidth-thin) solid var(--borderColor-default);
  border-radius: var(--borderRadius-medium);
  padding: var(--base-size-4) var(--base-size-8);
}

.view-more-btn {
  display: block;
  width: 100%;
  padding: var(--base-size-12);
  border: var(--borderWidth-thin) solid var(--fgColor-accent);
  border-radius: var(--borderRadius-medium);
  background: none;
  color: var(--fgColor-accent);
  font-size: var(--base-text-size-normal);
  font-weight: var(--base-text-weight-semibold);
  font-family: inherit;
  margin-top: var(--base-size-8);
}

/* ===============================================
   Exercise History: Fullscreen
   =============================================== */
.fullscreen-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--base-size-16) var(--base-size-20);
  background: var(--bgColor-default);
  border-bottom: var(--borderWidth-thin) solid var(--borderColor-default);
}

.back-btn {
  border: none;
  background: none;
  color: var(--fgColor-accent);
  font-size: var(--base-text-size-normal);
  font-weight: var(--base-text-weight-semibold);
  font-family: inherit;
  padding: 0;
}

.fullscreen-title {
  font-size: var(--base-text-size-xl);
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-default);
}

.fullscreen-content {
  padding: var(--base-size-16) var(--base-size-20) 7.5rem;
  /* 120px → 7.5rem */
  overflow-y: auto;
}

/* PR List */
.pr-list {
  margin-bottom: var(--base-size-16);
}

.pr-list .section-title {
  margin-bottom: var(--base-size-8);
}

.pr-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--base-size-12);
  /* #FEF3C7 → bgColor-attention-muted */
  background: var(--bgColor-attention-muted);
  /* #FDE047 → borderColor-attention */
  border: var(--borderWidth-thin) solid var(--borderColor-attention);
  border-radius: var(--borderRadius-medium);
  margin-bottom: var(--base-size-8);
}

.pr-label {
  font-size: var(--base-text-size-md);
  font-weight: var(--base-text-weight-bold);
  color: var(--fgColor-default);
  margin-bottom: 0.125rem;
}

.pr-date {
  font-size: var(--base-text-size-xs);
  font-weight: var(--base-text-weight-normal);
  color: var(--fgColor-muted);
}

.pr-value {
  font-size: var(--base-text-size-2xl);
  font-weight: var(--base-text-weight-bold);
  color: var(--fgColor-default);
}

/* ==============================================
   Agent4: Calendar + Statistics + AI Chat
   Primer Token ベース変換
   ============================================== */

/* 筋群カラートークン */
:root {
  --muscle-chest: #FF9500;
  --muscle-back: #007AFF;
  --muscle-legs: #34C759;
  --muscle-shoulders: #AF52DE;
  --muscle-arms: #FF2D55;
}

/* ===============================================
   Calendar Screen
   =============================================== */
#screen-calendar {
  padding: var(--base-size-16) var(--base-size-20) 120px;
}

.calendar-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--base-size-8) 0;
  margin-bottom: var(--base-size-12);
}

.calendar-title {
  font-size: var(--base-text-size-3xl);
  font-weight: var(--base-text-weight-bold);
  color: var(--fgColor-emphasis);
}

.calendar-nav {
  display: flex;
  gap: var(--base-size-12);
}

.calendar-nav-btn {
  background: transparent;
  border: none;
  color: var(--fgColor-muted);
  padding: var(--base-size-4);
  display: flex;
  align-items: center;
  justify-content: center;
}

.icon-20 {
  width: var(--base-size-20);
  height: var(--base-size-20);
}

.calendar-weekdays {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: var(--base-size-4);
  margin-bottom: var(--base-size-4);
}

.calendar-weekday {
  text-align: center;
  font-size: var(--base-text-size-xs);
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-muted);
  padding: var(--base-size-4) 0;
}

.calendar-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: var(--base-size-4);
  margin-bottom: var(--base-size-16);
}

.calendar-day {
  aspect-ratio: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  position: relative;
  border-radius: var(--borderRadius-medium);
  font-size: var(--base-text-size-md);
  font-weight: var(--base-text-weight-normal);
  color: var(--fgColor-default);
  background: var(--bgColor-default);
}

.calendar-day.empty {
  background: transparent;
}

.calendar-day.has-training {
  background: var(--bgColor-accent-muted);
}

.calendar-day.today {
  background: var(--bgColor-accent-emphasis);
  color: var(--fgColor-onEmphasis);
  font-weight: var(--base-text-weight-semibold);
}

.calendar-dot {
  width: var(--base-size-4);
  height: var(--base-size-4);
  border-radius: var(--borderRadius-full);
  background: var(--bgColor-accent-emphasis);
  position: absolute;
  bottom: var(--base-size-6);
}

/* Calendar - Workout Detail Section */
.cal-detail-section {
  margin-top: var(--base-size-20);
}

.cal-detail-header {
  padding: var(--base-size-12) 0;
  margin-bottom: var(--base-size-12);
}

.cal-detail-date {
  font-size: var(--base-text-size-normal);
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-emphasis);
}

.cal-summary-card {
  background: var(--bgColor-default);
  border: var(--borderWidth-thin) solid var(--borderColor-default);
  border-radius: var(--borderRadius-medium);
  padding: var(--base-size-12);
  display: flex;
  align-items: center;
  margin-bottom: var(--base-size-12);
}

.cal-summary-item {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--base-size-4);
}

.cal-summary-label {
  font-size: var(--base-text-size-xs);
  color: var(--fgColor-muted);
}

.cal-summary-value {
  font-size: var(--base-text-size-normal);
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-emphasis);
}

.cal-summary-divider {
  width: var(--borderWidth-thin);
  height: var(--base-size-32);
  background: var(--borderColor-default);
}

.cal-exercises {
  display: flex;
  flex-direction: column;
  gap: var(--base-size-12);
}

.cal-exercise-block {
  background: var(--bgColor-default);
  border: var(--borderWidth-thin) solid var(--borderColor-default);
  border-radius: var(--borderRadius-medium);
  padding: var(--base-size-12);
}

.cal-exercise-name {
  font-size: var(--base-text-size-lg);
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-accent);
  margin-bottom: var(--base-size-8);
}

.cal-sets {
  display: flex;
  flex-direction: column;
  gap: var(--base-size-6);
}

.cal-set-row {
  display: flex;
  align-items: center;
  gap: var(--base-size-8);
  padding: var(--base-size-6) var(--base-size-8);
  border-radius: var(--borderRadius-medium);
  background: var(--bgColor-success-muted);
}

.cal-check-icon {
  width: var(--base-size-16);
  height: var(--base-size-16);
  color: var(--fgColor-success);
  flex-shrink: 0;
}

.cal-set-number {
  font-size: var(--base-text-size-md);
  color: var(--fgColor-muted);
  width: var(--base-size-16);
}

.cal-set-value {
  font-size: var(--base-text-size-normal);
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-emphasis);
  flex: 1;
}

.cal-set-orm {
  font-size: var(--base-text-size-xs);
  color: var(--fgColor-muted);
}

/* ===============================================
   Statistics Screen
   =============================================== */
#screen-stats {
  background: var(--bgColor-muted);
  padding-bottom: var(--base-size-56);
}

.stats-header {
  padding: var(--base-size-16) var(--base-size-16) var(--base-size-8);
}

.stats-title {
  font-size: var(--base-text-size-6xl);
  font-weight: var(--base-text-weight-bold);
  color: var(--fgColor-emphasis);
}

.period-tabs {
  display: flex;
  gap: var(--base-size-8);
  padding: var(--base-size-16);
}

.period-tab {
  flex: 1;
  text-align: center;
  padding: var(--base-size-8) var(--base-size-16);
  border-radius: var(--borderRadius-medium);
  border: var(--borderWidth-thin) solid transparent;
  background: var(--bgColor-emphasis);
  color: var(--fgColor-muted);
  font-size: var(--base-text-size-normal);
  font-weight: var(--base-text-weight-normal);
  font-family: inherit;
}

.period-tab.active {
  background: var(--bgColor-default);
  color: var(--fgColor-accent);
  border-color: var(--borderColor-default);
  font-weight: var(--base-text-weight-semibold);
}

.volume-card,
.muscle-distribution-card,
.one-rm-card {
  background: var(--bgColor-default);
  border: var(--borderWidth-thin) solid var(--borderColor-default);
  border-radius: var(--borderRadius-large);
  padding: var(--base-size-20);
  margin: 0 var(--base-size-16) var(--base-size-16);
}

.volume-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
}

.volume-left {
  display: flex;
  flex-direction: column;
  gap: var(--base-size-4);
}

.volume-label {
  font-size: var(--base-text-size-sm);
  font-weight: var(--base-text-weight-normal);
  color: var(--fgColor-muted);
}

.volume-value {
  font-size: var(--base-text-size-5xl);
  font-weight: var(--base-text-weight-bold);
  color: var(--fgColor-default);
  line-height: var(--base-text-lineHeight-condensed);
}

.volume-unit {
  font-size: var(--base-text-size-normal);
  font-weight: var(--base-text-weight-normal);
  color: var(--fgColor-muted);
}

.volume-badge {
  padding: var(--base-size-4) var(--base-size-8);
  border-radius: var(--borderRadius-medium);
  background: var(--bgColor-success-emphasis);
  color: var(--fgColor-onEmphasis);
  font-size: var(--base-text-size-md);
  font-weight: var(--base-text-weight-semibold);
}

.volume-chart {
  margin-top: var(--base-size-16);
}

.volume-chart .chart-bar {
  width: 100%;
}

.chart-column {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.chart-label {
  margin-top: var(--base-size-8);
  font-size: var(--base-text-size-xs);
  font-weight: var(--base-text-weight-normal);
  color: var(--fgColor-muted);
  text-align: center;
}

.muscle-distribution-card .section-title,
.one-rm-card .section-title {
  margin-bottom: var(--base-size-16);
}

.muscle-group {
  margin-bottom: var(--base-size-16);
}

.muscle-group:last-child {
  margin-bottom: 0;
}

.muscle-header {
  display: flex;
  justify-content: space-between;
  margin-bottom: var(--base-size-8);
}

.muscle-name {
  font-size: var(--base-text-size-normal);
  font-weight: var(--base-text-weight-normal);
  color: var(--fgColor-default);
}

.muscle-percent {
  font-size: var(--base-text-size-normal);
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-default);
}

.one-rm-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--base-size-16);
  margin-top: var(--base-size-16);
}

.one-rm-item {
  text-align: center;
}

.one-rm-label {
  font-size: var(--base-text-size-sm);
  font-weight: var(--base-text-weight-normal);
  color: var(--fgColor-muted);
  margin-bottom: var(--base-size-8);
}

.one-rm-value {
  font-size: var(--base-text-size-3xl);
  font-weight: var(--base-text-weight-bold);
  color: var(--fgColor-default);
  margin-bottom: var(--base-size-4);
}

.one-rm-unit {
  font-size: var(--base-text-size-sm);
  font-weight: var(--base-text-weight-normal);
  color: var(--fgColor-muted);
}

.one-rm-trend {
  display: flex;
  justify-content: center;
}

.one-rm-trend.trend-up {
  color: var(--fgColor-success);
}

.one-rm-trend.trend-neutral {
  color: var(--fgColor-muted);
}

/* ===============================================
   AI Chat Screen
   =============================================== */
.ai-chat-container {
  display: flex;
  flex-direction: column;
  height: 100%;
}

.ai-chat-messages {
  flex: 1;
  overflow-y: auto;
  padding: var(--base-size-16);
}

.ai-message {
  display: flex;
  gap: var(--base-size-12);
  margin-bottom: var(--base-size-16);
}

.ai-avatar {
  width: var(--base-size-32);
  height: var(--base-size-32);
  border-radius: var(--borderRadius-medium);
  background: var(--bgColor-accent-muted);
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

.ai-avatar svg {
  width: var(--base-size-20);
  height: var(--base-size-20);
  color: var(--fgColor-accent);
}

.ai-message-content {
  flex: 1;
  padding: var(--base-size-12) var(--base-size-16);
  background: var(--bgColor-default);
  border: var(--borderWidth-thin) solid var(--borderColor-default);
  border-radius: var(--borderRadius-medium);
  font-size: var(--base-text-size-lg);
  line-height: var(--base-text-lineHeight-default);
  color: var(--fgColor-default);
}

.ai-suggestions {
  display: flex;
  flex-wrap: wrap;
  gap: var(--base-size-8);
  margin-top: var(--base-size-16);
  padding: 0 var(--base-size-16);
}

.ai-suggestion-chip {
  padding: var(--base-size-8) var(--base-size-16);
  border-radius: var(--borderRadius-medium);
  background: var(--bgColor-inset);
  border: var(--borderWidth-thin) solid var(--borderColor-default);
  font-size: var(--base-text-size-normal);
  color: var(--fgColor-default);
  cursor: pointer;
  font-family: inherit;
}

.ai-input-area {
  padding: var(--base-size-16);
  border-top: var(--borderWidth-thin) solid var(--borderColor-default);
  background: var(--bgColor-default);
  flex-shrink: 0;
}

.ai-input-wrapper {
  display: flex;
  gap: var(--base-size-8);
  align-items: flex-end;
}

.ai-textarea {
  flex: 1;
  min-height: var(--base-size-44);
  max-height: 120px;
  padding: var(--base-size-12);
  border-radius: var(--borderRadius-medium);
  border: var(--borderWidth-thin) solid var(--borderColor-default);
  background: var(--bgColor-inset);
  font-size: var(--base-text-size-lg);
  color: var(--fgColor-default);
  font-family: inherit;
  resize: none;
  line-height: 1.5;
}

.ai-send-btn {
  width: var(--base-size-44);
  height: var(--base-size-44);
  border-radius: var(--borderRadius-medium);
  background: var(--bgColor-accent-emphasis);
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.ai-send-btn svg {
  width: var(--base-size-20);
  height: var(--base-size-20);
  color: var(--fgColor-onEmphasis);
}

/* ==============================================
   Agent5: Workout Detail / Settings / JS
   Primer Token ベース変換
   ============================================== */

/* tokens.cssに存在しないシャドウトークンを補完定義 */
:root {
  --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.05);
  --bgColor-success-muted: #F0FDF4;
}

/* ===============================================
   Placeholder Screens
   =============================================== */
.placeholder {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  min-height: 37.5rem; /* 600px */
  color: var(--fgColor-muted);
  padding: var(--base-size-40) var(--base-size-20);
  text-align: center;
}

.placeholder-icon {
  font-size: var(--base-text-size-8xl);
  margin-bottom: var(--base-size-16);
  opacity: 0.5;
}

.placeholder-title {
  font-size: var(--base-text-size-2xl);
  font-weight: var(--base-text-weight-bold);
  color: var(--fgColor-emphasis);
  margin-bottom: var(--base-size-8);
}

.placeholder-text {
  font-size: var(--base-text-size-normal);
  color: var(--fgColor-muted);
  line-height: var(--base-text-lineHeight-default);
}

/* ===============================================
   Workout Detail: View Mode (6a)
   =============================================== */
.wd-header {
  background: var(--bgColor-default);
  padding: var(--base-size-16);
  display: flex;
  align-items: center;
  gap: var(--base-size-12);
  border-bottom: var(--borderWidth-thin) solid var(--borderColor-default);
}

.wd-back-btn,
.wd-cancel-btn {
  background: none;
  border: none;
  padding: 0;
  color: var(--fgColor-default);
  cursor: pointer;
}

.wd-back-btn {
  width: var(--base-size-24);
  height: var(--base-size-24);
}

.wd-icon {
  width: 100%;
  height: 100%;
}

.wd-header-info {
  flex: 1;
}

.wd-title {
  font-size: var(--base-text-size-2xl);
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-emphasis);
  margin: 0;
}

.wd-datetime {
  font-size: var(--base-text-size-md);
  color: var(--fgColor-muted);
  margin: var(--base-size-4) 0 0;
}

.wd-edit-btn {
  background: none;
  border: none;
  color: var(--fgColor-accent);
  font-size: var(--base-text-size-lg);
  font-weight: var(--base-text-weight-semibold);
  padding: 0;
  cursor: pointer;
}

.wd-summary-card {
  background: var(--bgColor-default);
  margin: var(--base-size-8) var(--base-size-16);
  padding: var(--base-size-16);
  border-radius: var(--borderRadius-medium);
  border: var(--borderWidth-thin) solid var(--borderColor-default);
  display: flex;
  align-items: center;
}

.wd-summary-item {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--base-size-4);
}

.wd-summary-label {
  font-size: var(--base-text-size-sm);
  color: var(--fgColor-muted);
}

.wd-summary-value {
  font-size: var(--base-text-size-xl);
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-emphasis);
}

.wd-summary-divider {
  width: var(--borderWidth-thin);
  height: var(--base-size-32);
  background: var(--borderColor-default);
}

.wd-exercises {
  padding: var(--base-size-8) var(--base-size-16) var(--base-size-16);
}

.wd-exercise-block {
  background: var(--bgColor-default);
  border: var(--borderWidth-thin) solid var(--borderColor-default);
  border-radius: var(--borderRadius-medium);
  padding: var(--base-size-16);
  margin-bottom: var(--base-size-12);
}

.wd-exercise-name {
  background: none;
  border: none;
  color: var(--fgColor-accent);
  font-size: var(--base-text-size-xl);
  font-weight: var(--base-text-weight-semibold);
  padding: 0;
  margin-bottom: var(--base-size-12);
  text-align: left;
  cursor: pointer;
  display: block;
}

.wd-sets {
  display: flex;
  flex-direction: column;
  gap: var(--base-size-8);
}

.wd-set-row {
  display: flex;
  align-items: center;
  gap: var(--base-size-12);
  padding: var(--base-size-8) var(--base-size-12);
  border-radius: var(--borderRadius-medium);
  background: var(--bgColor-muted);
}

.wd-set-completed {
  background: var(--bgColor-success-muted);
}

.wd-check-icon {
  width: var(--base-size-16);
  height: var(--base-size-16);
  color: var(--fgColor-success);
  flex-shrink: 0;
}

.wd-set-number {
  font-size: var(--base-text-size-normal);
  color: var(--fgColor-muted);
  width: var(--base-size-16);
}

.wd-set-value {
  font-size: var(--base-text-size-lg);
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-emphasis);
  flex: 1;
}

.wd-set-orm {
  font-size: var(--base-text-size-sm);
  color: var(--fgColor-muted);
}

.wd-footer {
  padding: var(--base-size-16);
  text-align: center;
}

.wd-delete-btn {
  background: none;
  border: none;
  color: var(--fgColor-danger);
  font-size: var(--base-text-size-normal);
  padding: 0;
  cursor: pointer;
}

/* ===============================================
   Workout Detail: Edit Mode (6b)
   =============================================== */
.wd-cancel-btn {
  font-size: var(--base-text-size-lg);
}

.wd-save-btn {
  background: var(--bgColor-success-emphasis);
  border: none;
  color: var(--fgColor-onEmphasis);
  font-size: var(--base-text-size-lg);
  font-weight: var(--base-text-weight-semibold);
  padding: var(--base-size-8) var(--base-size-16);
  border-radius: var(--borderRadius-medium);
  cursor: pointer;
}

.wd-edit-exercises {
  padding: var(--base-size-8) var(--base-size-16) var(--base-size-16);
}

.wd-edit-exercise-block {
  background: var(--bgColor-default);
  border: var(--borderWidth-thin) solid var(--borderColor-default);
  border-radius: var(--borderRadius-medium);
  padding: var(--base-size-16);
  margin-bottom: var(--base-size-12);
}

.wd-edit-exercise-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--base-size-12);
}

.wd-edit-exercise-name {
  font-size: var(--base-text-size-xl);
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-emphasis);
}

.wd-delete-exercise-btn {
  background: none;
  border: none;
  padding: var(--base-size-4);
  color: var(--fgColor-muted);
  cursor: pointer;
}

.wd-icon-small {
  width: 1.125rem; /* 18px — base-size-18は未定義のため rem直書き */
  height: 1.125rem;
}

.wd-edit-set-table {
  display: flex;
  flex-direction: column;
  gap: var(--base-size-8);
}

.wd-edit-set-header {
  display: grid;
  grid-template-columns: 2rem 1fr 1rem 1fr 3rem;
  gap: var(--base-size-8);
  padding: 0 var(--base-size-8) var(--base-size-8);
  font-size: var(--base-text-size-xs);
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-muted);
  text-align: center;
}

.wd-edit-col-set {
  text-align: left;
}

.wd-edit-set-row {
  display: grid;
  grid-template-columns: 2rem 1fr 1rem 1fr 3rem;
  gap: var(--base-size-8);
  align-items: center;
  overflow: hidden;
}

.wd-edit-set-number {
  font-size: var(--base-text-size-normal);
  color: var(--fgColor-muted);
  text-align: left;
}

.wd-edit-input {
  background: var(--bgColor-inset);
  border: var(--borderWidth-thin) solid var(--borderColor-default);
  border-radius: var(--borderRadius-medium);
  padding: var(--base-size-8);
  font-size: var(--base-text-size-lg);
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-emphasis);
  text-align: center;
  font-family: inherit;
  width: 100%;
  min-width: 0;
  -moz-appearance: textfield;
}

.wd-edit-input::-webkit-outer-spin-button,
.wd-edit-input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

.wd-edit-input:focus {
  outline: none;
  border-color: var(--borderColor-accent);
}

.wd-edit-x {
  font-size: var(--base-text-size-normal);
  color: var(--fgColor-muted);
  text-align: center;
}

.wd-edit-orm-value {
  font-size: var(--base-text-size-md);
  color: var(--fgColor-muted);
  text-align: center;
}

.wd-add-set-btn {
  background: none;
  border: none;
  color: var(--fgColor-accent);
  font-size: var(--base-text-size-normal);
  font-weight: var(--base-text-weight-semibold);
  padding: var(--base-size-8);
  margin-top: var(--base-size-8);
  cursor: pointer;
  width: 100%;
  text-align: left;
}

.wd-add-exercise-btn {
  background: var(--bgColor-default);
  border: var(--borderWidth-thin) solid var(--borderColor-default);
  border-radius: var(--borderRadius-medium);
  color: var(--fgColor-accent);
  font-size: var(--base-text-size-lg);
  font-weight: var(--base-text-weight-semibold);
  padding: var(--base-size-16);
  margin: 0 var(--base-size-16) var(--base-size-16);
  cursor: pointer;
  width: calc(100% - var(--base-size-32));
}

/* ===============================================
   Discard Dialog (6c)
   =============================================== */
.dialog-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 10;
  display: flex;
  align-items: center;
  justify-content: center;
}

.dialog-backdrop {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.5); /* dialog-backdropのみ例外 */
}

.dialog-container {
  position: relative;
  background: var(--bgColor-default);
  border-radius: var(--borderRadius-large);
  width: 90%;
  max-width: 20rem; /* 320px */
  padding: var(--base-size-24);
}

.dialog-header {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--base-size-12);
  margin-bottom: var(--base-size-24);
}

.dialog-icon-warning {
  width: var(--base-size-48);
  height: var(--base-size-48);
  color: var(--fgColor-attention);
}

.dialog-icon-warning svg {
  width: 100%;
  height: 100%;
}

.dialog-title {
  font-size: var(--base-text-size-2xl);
  font-weight: var(--base-text-weight-bold);
  color: var(--fgColor-emphasis);
  text-align: center;
  line-height: 1.4;
}

.dialog-description {
  font-size: var(--base-text-size-normal);
  font-weight: var(--base-text-weight-normal);
  color: var(--fgColor-muted);
  text-align: center;
  line-height: 1.5;
}

.dialog-actions {
  display: flex;
  gap: var(--base-size-8);
}

.button-dialog-cancel {
  flex: 1;
  padding: var(--base-size-12) var(--base-size-16);
  background: var(--bgColor-default);
  border: var(--borderWidth-thin) solid var(--borderColor-default);
  border-radius: var(--borderRadius-medium);
  font-size: var(--base-text-size-lg);
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-default);
  cursor: pointer;
}

.button-dialog-destructive {
  flex: 1;
  padding: var(--base-size-12) var(--base-size-16);
  background: var(--bgColor-danger-emphasis);
  border: none;
  border-radius: var(--borderRadius-medium);
  font-size: var(--base-text-size-lg);
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-onEmphasis);
  cursor: pointer;
}

/* ===============================================
   Settings Top (6d)
   =============================================== */
.settings-header {
  display: flex;
  align-items: center;
  padding: var(--base-size-12) var(--base-size-16);
  background: var(--bgColor-default);
  border-bottom: var(--borderWidth-thin) solid var(--borderColor-default);
}

.settings-back-btn {
  width: var(--base-size-40);
  height: var(--base-size-40);
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  color: var(--fgColor-default);
  cursor: pointer;
}

.settings-back-btn svg {
  width: var(--base-size-24);
  height: var(--base-size-24);
}

.settings-header-title {
  flex: 1;
  font-size: var(--base-text-size-2xl);
  font-weight: var(--base-text-weight-bold);
  color: var(--fgColor-emphasis);
  text-align: center;
}

.settings-header-spacer {
  width: var(--base-size-40);
}

.settings-main {
  padding: var(--base-size-16);
}

#screen-settings .settings-user-card {
  display: flex;
  align-items: center;
  gap: var(--base-size-16);
  padding: var(--base-size-20);
  background: var(--bgColor-default);
  border-radius: var(--borderRadius-large);
  border: var(--borderWidth-thin) solid var(--borderColor-default);
  margin-bottom: var(--base-size-24);
}

#screen-settings .settings-user-avatar {
  width: var(--base-size-56);
  height: var(--base-size-56);
  border-radius: var(--borderRadius-full);
  background: var(--bgColor-accent-muted);
  color: var(--fgColor-accent);
  font-size: var(--base-text-size-3xl);
  font-weight: var(--base-text-weight-bold);
  display: flex;
  align-items: center;
  justify-content: center;
}

.settings-user-name {
  font-size: var(--base-text-size-xl);
  font-weight: var(--base-text-weight-bold);
  color: var(--fgColor-emphasis);
}

.settings-user-email {
  font-size: var(--base-text-size-md);
  color: var(--fgColor-muted);
  margin-top: var(--base-size-4);
}

#screen-settings .settings-group {
  margin-bottom: var(--base-size-24);
}

#screen-settings .settings-group-title {
  font-size: var(--base-text-size-md);
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-muted);
  padding: 0 var(--base-size-4) var(--base-size-8);
  letter-spacing: 0.5px;
}

#screen-settings .settings-list {
  background: var(--bgColor-default);
  border-radius: var(--borderRadius-large);
  border: var(--borderWidth-thin) solid var(--borderColor-default);
  overflow: hidden;
}

#screen-settings .settings-item {
  display: flex;
  align-items: center;
  gap: var(--base-size-12);
  padding: var(--base-size-16);
  background: none;
  border: none;
  border-bottom: var(--borderWidth-thin) solid var(--borderColor-default);
  width: 100%;
  text-align: left;
  cursor: pointer;
  font-family: inherit;
}

#screen-settings .settings-item:last-child {
  border-bottom: none;
}

.settings-item-icon {
  width: var(--base-size-20);
  height: var(--base-size-20);
  color: var(--fgColor-muted);
  flex-shrink: 0;
}

.settings-item-icon svg {
  width: 100%;
  height: 100%;
}

.settings-item-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: var(--base-size-4);
}

.settings-item-label {
  font-size: var(--base-text-size-lg);
  font-weight: var(--base-text-weight-normal);
  color: var(--fgColor-default);
}

.settings-item-value {
  font-size: var(--base-text-size-md);
  color: var(--fgColor-muted);
}

.settings-item-chevron {
  width: var(--base-size-20);
  height: var(--base-size-20);
  color: var(--fgColor-muted);
  flex-shrink: 0;
}

.settings-item-chevron svg {
  width: 100%;
  height: 100%;
}

/* ===============================================
   Settings Sub-screens (6e / 6f / 6g)
   =============================================== */
.wf-header {
  display: flex;
  align-items: center;
  padding: var(--base-size-12) var(--base-size-16);
  background: var(--bgColor-default);
  border-bottom: var(--borderWidth-thin) solid var(--borderColor-default);
  gap: var(--base-size-12);
}

.wf-header-back {
  background: none;
  border: none;
  padding: 0;
  color: var(--fgColor-default);
  cursor: pointer;
}

.wf-icon-back {
  width: var(--base-size-20);
  height: var(--base-size-20);
}

.wf-header-title {
  font-size: var(--base-text-size-3xl);
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-emphasis);
}

.wf-content {
  padding: var(--base-size-16);
}

.wf-settings-section {
  margin-bottom: var(--base-size-24);
}

.wf-section-title {
  font-size: var(--base-text-size-md);
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-muted);
  margin-bottom: var(--base-size-8);
  padding-left: var(--base-size-4);
}

.wf-card {
  background: var(--bgColor-default);
  border-radius: var(--borderRadius-medium);
  border: var(--borderWidth-thin) solid var(--borderColor-default);
  padding: var(--base-size-12);
}

.wf-settings-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--base-size-12) 0;
}

.wf-settings-row + .wf-settings-row {
  border-top: var(--borderWidth-thin) solid var(--bgColor-emphasis);
}

.wf-settings-label {
  font-size: var(--base-text-size-lg);
  color: var(--fgColor-default);
}

.wf-settings-text {
  flex: 1;
}

.wf-settings-desc {
  font-size: var(--base-text-size-md);
  color: var(--fgColor-muted);
  margin-top: var(--base-size-4);
  display: block;
}

/* Toggle */
.toggle-switch {
  width: 2.75rem; /* 44px */
  height: var(--base-size-24);
  background: var(--borderColor-default);
  border-radius: var(--borderRadius-large);
  position: relative;
  flex-shrink: 0;
}

.toggle-knob {
  width: var(--base-size-20);
  height: var(--base-size-20);
  background: var(--bgColor-default);
  border-radius: var(--borderRadius-full);
  position: absolute;
  top: var(--base-size-4);
  left: var(--base-size-4);
}

.toggle-switch.active {
  background: var(--bgColor-accent-emphasis);
}

.toggle-switch.active .toggle-knob {
  left: 1.375rem; /* 22px — base-size-22は未定義のため rem直書き */
}

/* Segment Control */
.wf-segment-control {
  display: flex;
  gap: var(--base-size-4);
  background: var(--bgColor-inset);
  border-radius: var(--borderRadius-medium);
  padding: var(--base-size-4);
}

.wf-segment-item {
  flex: 1;
  padding: var(--base-size-6) var(--base-size-12);
  border-radius: var(--borderRadius-medium);
  font-size: var(--base-text-size-normal);
  color: var(--fgColor-muted);
  background: transparent;
  border: none;
  cursor: pointer;
  font-family: inherit;
  text-align: center;
}

.wf-segment-item.active {
  background: var(--bgColor-default);
  color: var(--fgColor-default);
  font-weight: var(--base-text-weight-semibold);
  box-shadow: var(--shadow-xs);
}

/* Info rows */
.wf-info-row {
  display: flex;
  justify-content: space-between;
  padding: var(--base-size-12) 0;
}

.wf-info-row + .wf-info-row {
  border-top: var(--borderWidth-thin) solid var(--bgColor-emphasis);
}

.wf-info-label {
  font-size: var(--base-text-size-lg);
  color: var(--fgColor-muted);
}

.wf-info-value {
  font-size: var(--base-text-size-lg);
  color: var(--fgColor-default);
}

/* Timer */
.wf-timer-display {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--base-size-16);
  padding: var(--base-size-24) 0;
}

.wf-timer-btn {
  width: 2.75rem; /* 44px */
  height: 2.75rem;
  border-radius: var(--borderRadius-medium);
  background: var(--bgColor-inset);
  border: var(--borderWidth-thin) solid var(--borderColor-default);
  font-size: var(--base-text-size-4xl);
  font-weight: var(--base-text-weight-semibold);
  color: var(--fgColor-default);
  cursor: pointer;
  font-family: inherit;
}

.wf-timer-value {
  font-size: var(--base-text-size-8xl);
  font-weight: var(--base-text-weight-bold);
  color: var(--fgColor-emphasis);
  min-width: 7.5rem; /* 120px */
  text-align: center;
}

.wf-timer-presets {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: var(--base-size-8);
  margin-top: var(--base-size-16);
}

.wf-preset-btn {
  padding: var(--base-size-12);
  border-radius: var(--borderRadius-medium);
  background: var(--bgColor-inset);
  border: var(--borderWidth-thin) solid var(--borderColor-default);
  font-size: var(--base-text-size-normal);
  color: var(--fgColor-default);
  cursor: pointer;
  font-family: inherit;
}

.wf-settings-note {
  font-size: var(--base-text-size-md);
  color: var(--fgColor-muted);
  margin-top: var(--base-size-12);
  padding-left: var(--base-size-4);
}

.wf-btn-primary {
  width: 100%;
  padding: var(--base-size-16);
  border-radius: var(--borderRadius-medium);
  background: var(--bgColor-accent-emphasis);
  color: var(--fgColor-onEmphasis);
  font-size: var(--base-text-size-lg);
  font-weight: var(--base-text-weight-semibold);
  border: none;
  cursor: pointer;
  font-family: inherit;
}

  </style>
</head>
<body>
<div class="app">
  <!-- Page Title -->
  <div class="title-area">
    <h1>Workout+</h1>
    <p>Wireframe v4 (Primer Tokens)</p>
  </div>

  <!-- Screen Tabs -->
  <div class="screen-tabs" id="screenTabs">
    <button class="active" data-screen="home">ホーム</button>
    <button data-screen="record">記録</button>
    <button data-screen="picker">種目選択</button>
    <button data-screen="history">種目履歴</button>
    <button data-screen="history-full">履歴(全画面)</button>
    <button data-screen="calendar">カレンダー</button>
    <button data-screen="stats">統計</button>
    <button data-screen="ai">AI</button>
    <button data-screen="summary">完了サマリー</button>
    <button data-screen="workout-detail">詳細(閲覧)</button>
    <button data-screen="workout-edit">詳細(編集)</button>
    <button data-screen="discard-dialog">破棄確認</button>
    <button data-screen="settings">設定</button>
    <button data-screen="settings-backup">バックアップ</button>
    <button data-screen="settings-timer">タイマー</button>
    <button data-screen="settings-unit">単位</button>
  </div>

  <!-- Phone Frame -->
  <div class="phone-wrapper">
    <div class="phone">
      <!-- Status Bar -->
      <div class="status-bar">
        <span class="time">9:41</span>
        <div class="status-bar-icons">
          <svg width="18" height="12" viewBox="0 0 18 12">
            <rect x="0" y="4" width="3" height="8" rx="1" fill="#334155"/>
            <rect x="5" y="2" width="3" height="10" rx="1" fill="#334155"/>
            <rect x="10" y="0" width="3" height="12" rx="1" fill="#334155"/>
            <rect x="15" y="0" width="3" height="12" rx="1" fill="#D1D5DB"/>
          </svg>
          <svg width="25" height="12" viewBox="0 0 25 12">
            <rect x="0" y="0" width="22" height="12" rx="3" stroke="#334155" stroke-width="1" fill="none"/>
            <rect x="2" y="2" width="16" height="8" rx="1.5" fill="#10B981"/>
            <rect x="23" y="3.5" width="2" height="5" rx="1" fill="#334155"/>
          </svg>
        </div>
      </div>
      <div class="notch"></div>

      <!-- Screen Content -->
      <div class="screen-content" id="screenContent">

<!-- ═══ HOME SCREEN ═══ -->
<div id="screen-home" class="screen active">
  <!-- Header -->
  <div class="home-header">
    <div class="home-header-top">
      <div class="home-greeting">おはよう、Keiさん</div>
      <div class="user-avatar">K</div>
    </div>
    <div class="streak-card">
      <div class="streak-top">
        <div>
          <div class="streak-label">今月のトレーニング</div>
          <div class="streak-number">12<span class="streak-unit">日</span></div>
        </div>
        <svg class="streak-fire" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 12c2-2.96 0-7-1-8 0 3.038-1.773 4.741-3 6-1.226 1.26-2 3.24-2 5a6 6 0 1 0 12 0c0-1.532-1.056-3.94-2-5-1.786 3-2.791 3-4 2z"/></svg>
      </div>
      <div class="streak-week">
        <div class="streak-day">
          <div class="streak-day-circle done"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"></polyline></svg></div>
          <span class="streak-day-label">月</span>
        </div>
        <div class="streak-day">
          <div class="streak-day-circle done"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"></polyline></svg></div>
          <span class="streak-day-label">火</span>
        </div>
        <div class="streak-day">
          <div class="streak-day-circle rest"></div>
          <span class="streak-day-label">水</span>
        </div>
        <div class="streak-day">
          <div class="streak-day-circle done"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"></polyline></svg></div>
          <span class="streak-day-label">木</span>
        </div>
        <div class="streak-day">
          <div class="streak-day-circle done"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"></polyline></svg></div>
          <span class="streak-day-label">金</span>
        </div>
        <div class="streak-day">
          <div class="streak-day-circle rest"></div>
          <span class="streak-day-label">土</span>
        </div>
        <div class="streak-day">
          <div class="streak-day-circle done"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"></polyline></svg></div>
          <span class="streak-day-label">日</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="home-main">
    <!-- Weekly Goals -->
    <div class="weekly-goals">
      <div class="goals-header">
        <div class="goals-title">今週の目標</div>
        <div class="status-badge on-track">
          <span class="status-dot"></span>
          順調
        </div>
      </div>
      <div class="goals-grid">
        <div class="goal-item">
          <div class="goal-value">5</div>
          <div class="goal-label">ワークアウト</div>
          <div class="goal-change positive">↑ 達成</div>
        </div>
        <div class="goal-item">
          <div class="goal-value">24t</div>
          <div class="goal-label">総負荷量</div>
          <div class="goal-change positive">↑ 12%</div>
        </div>
        <div class="goal-item">
          <div class="goal-value">86%</div>
          <div class="goal-label">達成率</div>
          <div class="goal-change positive">↑ 8%</div>
        </div>
      </div>
      <div class="progress-container">
        <div class="progress-header">
          <span class="progress-label">週間目標進捗</span>
          <span class="progress-percentage">86%</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" style="width: 86%"></div>
        </div>
      </div>
    </div>

    <!-- Recent Workouts -->
    <div class="workout-tasks">
      <div class="section-header">
        <h2 class="section-title">最近のワークアウト</h2>
        <a class="view-all-link">すべて表示</a>
      </div>

      <div class="task-card">
        <div class="task-header">
          <div class="task-icon chest"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="4" y1="5" x2="20" y2="5"/><rect x="2" y="3" width="3" height="4" rx="1"/><rect x="19" y="3" width="3" height="4" rx="1"/><line x1="9" y1="12" x2="9" y2="5"/><line x1="15" y1="12" x2="15" y2="5"/><circle cx="4" cy="12" r="2"/><line x1="6" y1="12" x2="20" y2="12"/><line x1="8" y1="15" x2="20" y2="15"/><line x1="10" y1="15" x2="10" y2="20"/><line x1="18" y1="15" x2="18" y2="20"/></svg></div>
          <div class="task-info">
            <div class="task-title">胸・三頭トレーニング</div>
            <div class="task-meta"><span>今日 14:30</span></div>
          </div>
          <div class="status-badge completed">
            <span class="status-dot"></span>
            完了
          </div>
        </div>
        <div class="task-tags">
          <span class="task-tag sets">12セット</span>
          <span class="task-tag volume">8.5t</span>
          <span class="task-tag time">68分</span>
        </div>
        <div class="task-footer">
          <div class="task-stats">
            <div class="stat-item">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>
              <span>ベンチプレス +2.5kg</span>
            </div>
          </div>
        </div>
      </div>

      <div class="task-card">
        <div class="task-header">
          <div class="task-icon back"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="2" y1="2" x2="22" y2="2"/><circle cx="12" cy="7" r="2"/><line x1="7" y1="2" x2="10" y2="6"/><line x1="17" y1="2" x2="14" y2="6"/><line x1="12" y1="9" x2="12" y2="16"/><line x1="12" y1="16" x2="9" y2="22"/><line x1="12" y1="16" x2="15" y2="22"/></svg></div>
          <div class="task-info">
            <div class="task-title">背中・二頭トレーニング</div>
            <div class="task-meta"><span>昨日 10:00</span></div>
          </div>
          <div class="status-badge completed">
            <span class="status-dot"></span>
            完了
          </div>
        </div>
        <div class="task-tags">
          <span class="task-tag sets">14セット</span>
          <span class="task-tag volume">9.2t</span>
          <span class="task-tag time">72分</span>
        </div>
        <div class="task-footer">
          <div class="task-stats">
            <div class="stat-item">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>
              <span>デッドリフト 120kg × 5</span>
            </div>
          </div>
        </div>
      </div>

      <div class="task-card">
        <div class="task-header">
          <div class="task-icon legs"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="4" y1="7" x2="20" y2="7"/><rect x="2" y="5" width="3" height="4" rx="1"/><rect x="19" y="5" width="3" height="4" rx="1"/><circle cx="12" cy="3" r="2"/><line x1="12" y1="7" x2="11" y2="14"/><line x1="11" y1="14" x2="7" y2="17"/><line x1="7" y1="17" x2="6" y2="22"/><line x1="11" y1="14" x2="15" y2="17"/><line x1="15" y1="17" x2="16" y2="22"/></svg></div>
          <div class="task-info">
            <div class="task-title">脚トレーニング</div>
            <div class="task-meta"><span>2日前 15:00</span></div>
          </div>
          <div class="status-badge completed">
            <span class="status-dot"></span>
            完了
          </div>
        </div>
        <div class="task-tags">
          <span class="task-tag sets">10セット</span>
          <span class="task-tag volume">6.3t</span>
          <span class="task-tag time">55分</span>
        </div>
        <div class="task-footer">
          <div class="task-stats">
            <div class="stat-item">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>
              <span>スクワット 100kg × 8</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Quick Stats Widgets -->
    <div class="dashboard-widgets">
      <div class="section-header">
        <h2 class="section-title">クイック統計</h2>
      </div>
      <div class="widgets-grid">
        <div class="widget-card">
          <div class="widget-header">
            <div class="widget-icon target"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg></div>
            <div class="widget-title">今月の目標</div>
          </div>
          <div class="widget-value">18/20</div>
          <div class="widget-subtitle">ワークアウト完了</div>
          <div class="widget-trend up">↑ 90%達成</div>
        </div>
        <div class="widget-card">
          <div class="widget-header">
            <div class="widget-icon calendar"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg></div>
            <div class="widget-title">次回予定</div>
          </div>
          <div class="widget-value">明日</div>
          <div class="widget-subtitle">脚トレーニング</div>
        </div>
        <div class="widget-card">
          <div class="widget-header">
            <div class="widget-icon trophy"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h2"/><path d="M18 9h2a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-2"/><path d="M6 3h12v7a6 6 0 0 1-12 0V3z"/><path d="M12 16v2"/><path d="M8 21h8"/><path d="M9 18h6"/></svg></div>
            <div class="widget-title">月間記録</div>
          </div>
          <div class="widget-value">5</div>
          <div class="widget-subtitle">新しいPR達成</div>
          <div class="widget-trend up">↑ 2 先月比</div>
        </div>
        <div class="widget-card">
          <div class="widget-header">
            <div class="widget-icon chart"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></svg></div>
            <div class="widget-title">総負荷量</div>
          </div>
          <div class="widget-value">68t</div>
          <div class="widget-subtitle">今月の合計</div>
          <div class="widget-trend up">↑ 15%</div>
        </div>
      </div>
    </div>

    <div class="tab-bar-spacer"></div>
  </div>
</div>

<!-- ═══ COMPLETION SUMMARY SCREEN ═══ -->
<div id="screen-summary" class="screen">
  <div class="summary-header">
    <svg class="summary-check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><path d="M9 12l2 2 4-4"></path></svg>
    <h1 class="summary-title">ワークアウト完了</h1>
  </div>

  <div class="summary-main-card">
    <div class="summary-workout-name">プッシュデイ</div>
    <div class="summary-datetime">2026-02-16 14:30 - 15:38</div>
    <div class="summary-duration">
      <svg class="summary-duration-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><path d="M12 6v6l4 2"></path></svg>
      <span class="summary-duration-text">1時間8分</span>
    </div>
  </div>

  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-value">8,240<span class="stat-unit">kg</span></div>
      <div class="stat-label">総ボリューム</div>
    </div>
    <div class="stat-card">
      <div class="stat-value">3<span class="stat-unit">種目</span></div>
      <div class="stat-label">種目数</div>
    </div>
    <div class="stat-card">
      <div class="stat-value">9<span class="stat-unit">セット</span></div>
      <div class="stat-label">セット数</div>
    </div>
    <div class="stat-card">
      <div class="stat-value">100<span class="stat-unit">%</span></div>
      <div class="stat-label">完了率</div>
    </div>
  </div>

  <div class="streak-card">
    <svg class="streak-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M13 2L3 14h8l-1 8 10-12h-8l1-8z"></path></svg>
    <div class="streak-content">
      <div class="streak-number">13日連続!</div>
      <div class="streak-label">ストリーク継続中</div>
    </div>
  </div>

  <div class="pr-section">
    <div class="pr-section-title">新記録達成</div>
    <div class="pr-item">
      <div>
        <div class="pr-label">ベンチプレス</div>
        <div class="pr-date">90kg × 6 → 推定1RM 103kg</div>
      </div>
      <div class="pr-badge">NEW</div>
    </div>
  </div>

  <div class="exercise-summary-section">
    <div class="exercise-summary-title">種目別サマリー</div>
    <div class="exercise-summary-list">
      <div class="exercise-summary-item">
        <div class="exercise-summary-name">ベンチプレス</div>
        <div class="exercise-summary-stats">
          <span>4セット</span>
          <span>•</span>
          <span class="exercise-summary-volume">3,340kg</span>
        </div>
      </div>
      <div class="exercise-summary-item">
        <div class="exercise-summary-name">インクラインプレス</div>
        <div class="exercise-summary-stats">
          <span>2セット</span>
          <span>•</span>
          <span class="exercise-summary-volume">1,940kg</span>
        </div>
      </div>
      <div class="exercise-summary-item">
        <div class="exercise-summary-name">ケーブルフライ</div>
        <div class="exercise-summary-stats">
          <span>3セット</span>
          <span>•</span>
          <span class="exercise-summary-volume">2,960kg</span>
        </div>
      </div>
    </div>
  </div>

  <div class="summary-actions">
    <button class="btn-primary">ホームに戻る</button>
  </div>
</div>

<!-- ==============================================
   Agent3: Record Screen + Exercise Picker + Exercise History
   HTML部分（v2からそのままコピー、構造変更なし）
   ============================================== -->

<!-- ═══ RECORD SCREEN ═══ -->
<div id="screen-record" class="screen">
  <!-- タイマー＋完了 -->
  <div class="timer-bar">
    <span class="timer-label">経過時間</span>
    <span class="timer-text">00:42:15</span>
    <button class="done-btn">完了</button>
  </div>

  <!-- スクロール領域 -->
  <div class="scroll-content">

    <!-- 種目1: ベンチプレス（前回4セット） -->
    <div class="exercise">
      <div class="exercise-header">
        <div>
          <div class="exercise-name">ベンチプレス</div>
          <div class="exercise-meta">胸 &#8226; コンパウンド</div>
        </div>
        <button class="previous-badge"><svg class="copy-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><rect x="8" y="2" width="8" height="4" rx="1"/></svg>前回: 4セット (2/14)</button>
      </div>

      <div class="sets-list">
        <div>
          <div class="set-previous">前回: 55.5kg × 4</div>
          <div class="set-row">
            <div class="set-number">1</div>
            <div class="set-inputs">
              <input type="number" class="set-input" placeholder="55.5">
              <span class="set-unit">kg</span>
              <span class="set-separator">×</span>
              <input type="number" class="set-input" placeholder="4">
              <span class="set-unit">reps</span>
            </div>
            <div class="set-rm">1RM 63</div>
          </div>
        </div>

        <div>
          <div class="set-previous">前回: 55.5kg × 4</div>
          <div class="set-row">
            <button class="set-copy-above" title="上のセットをコピー">↑</button>
            <div class="set-number">2</div>
            <div class="set-inputs">
              <input type="number" class="set-input" placeholder="55.5">
              <span class="set-unit">kg</span>
              <span class="set-separator">×</span>
              <input type="number" class="set-input" placeholder="4">
              <span class="set-unit">reps</span>
            </div>
            <div class="set-rm">1RM 63</div>
          </div>
        </div>

        <div>
          <div class="set-previous">前回: 55.5kg × 4</div>
          <div class="set-row">
            <button class="set-copy-above" title="上のセットをコピー">↑</button>
            <div class="set-number">3</div>
            <div class="set-inputs">
              <input type="number" class="set-input" placeholder="55.5">
              <span class="set-unit">kg</span>
              <span class="set-separator">×</span>
              <input type="number" class="set-input" placeholder="4">
              <span class="set-unit">reps</span>
            </div>
            <div class="set-rm">1RM 63</div>
          </div>
        </div>

        <div>
          <div class="set-previous">前回: 55.5kg × 4</div>
          <div class="set-row">
            <button class="set-copy-above" title="上のセットをコピー">↑</button>
            <div class="set-number">4</div>
            <div class="set-inputs">
              <input type="number" class="set-input" placeholder="55.5">
              <span class="set-unit">kg</span>
              <span class="set-separator">×</span>
              <input type="number" class="set-input" placeholder="4">
              <span class="set-unit">reps</span>
            </div>
            <div class="set-rm">1RM 63</div>
          </div>
        </div>
      </div>

      <button class="add-set-btn">+ セットを追加</button>
      <div class="exercise-memo">
        <svg class="exercise-memo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
        <input type="text" class="exercise-memo-input" placeholder="メモ（フォーム、体感など）">
      </div>
    </div>

    <!-- 種目2: インクラインプレス（前回2セット） -->
    <div class="exercise">
      <div class="exercise-header">
        <div>
          <div class="exercise-name">インクラインプレス</div>
          <div class="exercise-meta">胸 &#8226; コンパウンド</div>
        </div>
        <button class="previous-badge"><svg class="copy-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><rect x="8" y="2" width="8" height="4" rx="1"/></svg>前回: 2セット (2/14)</button>
      </div>

      <div class="sets-list">
        <div>
          <div class="set-previous">前回: 30kg × 12</div>
          <div class="set-row">
            <div class="set-number">1</div>
            <div class="set-inputs">
              <input type="number" class="set-input" placeholder="30">
              <span class="set-unit">kg</span>
              <span class="set-separator">×</span>
              <input type="number" class="set-input" placeholder="12">
              <span class="set-unit">reps</span>
            </div>
            <div class="set-rm">1RM 42</div>
          </div>
        </div>

        <div>
          <div class="set-previous">前回: 32kg × 10</div>
          <div class="set-row">
            <button class="set-copy-above" title="上のセットをコピー">↑</button>
            <div class="set-number">2</div>
            <div class="set-inputs">
              <input type="number" class="set-input" placeholder="32">
              <span class="set-unit">kg</span>
              <span class="set-separator">×</span>
              <input type="number" class="set-input" placeholder="10">
              <span class="set-unit">reps</span>
            </div>
            <div class="set-rm">1RM 43</div>
          </div>
        </div>
      </div>

      <button class="add-set-btn">+ セットを追加</button>
      <div class="exercise-memo">
        <svg class="exercise-memo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
        <input type="text" class="exercise-memo-input" placeholder="メモ（フォーム、体感など）">
      </div>
    </div>

    <!-- 種目3: ケーブルフライ（前回3セット） -->
    <div class="exercise">
      <div class="exercise-header">
        <div>
          <div class="exercise-name">ケーブルフライ</div>
          <div class="exercise-meta">胸 &#8226; アイソレーション</div>
        </div>
        <button class="previous-badge"><svg class="copy-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><rect x="8" y="2" width="8" height="4" rx="1"/></svg>前回: 3セット (2/14)</button>
      </div>

      <div class="sets-list">
        <div>
          <div class="set-previous">前回: 20kg × 15</div>
          <div class="set-row">
            <div class="set-number">1</div>
            <div class="set-inputs">
              <input type="number" class="set-input" placeholder="20">
              <span class="set-unit">kg</span>
              <span class="set-separator">×</span>
              <input type="number" class="set-input" placeholder="15">
              <span class="set-unit">reps</span>
            </div>
            <div class="set-rm">1RM 30</div>
          </div>
        </div>

        <div>
          <div class="set-previous">前回: 20kg × 15</div>
          <div class="set-row">
            <div class="set-number">2</div>
            <div class="set-inputs">
              <input type="number" class="set-input" placeholder="20">
              <span class="set-unit">kg</span>
              <span class="set-separator">×</span>
              <input type="number" class="set-input" placeholder="15">
              <span class="set-unit">reps</span>
            </div>
            <div class="set-rm">1RM 30</div>
          </div>
        </div>

        <div>
          <div class="set-previous">前回: 20kg × 12</div>
          <div class="set-row">
            <div class="set-number">3</div>
            <div class="set-inputs">
              <input type="number" class="set-input" placeholder="20">
              <span class="set-unit">kg</span>
              <span class="set-separator">×</span>
              <input type="number" class="set-input" placeholder="12">
              <span class="set-unit">reps</span>
            </div>
            <div class="set-rm">1RM 28</div>
          </div>
        </div>
      </div>

      <button class="add-set-btn">+ セットを追加</button>
      <div class="exercise-memo">
        <svg class="exercise-memo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
        <input type="text" class="exercise-memo-input" placeholder="メモ（フォーム、体感など）">
      </div>
    </div>

    <!-- 種目追加ボタン -->
    <button class="add-exercise-btn">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 5v14M5 12h14"/></svg>
      種目を追加
    </button>

    <!-- ワークアウト全体メモ -->
    <div class="workout-memo">
      <div class="workout-memo-label">ワークアウトメモ</div>
      <textarea class="workout-memo-input" placeholder="今日の体調、感想など"></textarea>
    </div>

  </div>
</div>

<!-- ═══ EXERCISE PICKER ═══ -->
<div id="screen-picker" class="screen">
  <div class="fullscreen-modal">

    <!-- モーダルヘッダー -->
    <div class="modal-header">
      <button class="close-btn" aria-label="閉じる">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>
      </button>
      <div class="modal-title">種目を選択</div>
      <button class="multi-select-toggle">複数選択</button>
    </div>

    <!-- 検索バー -->
    <div class="search-bar">
      <div class="search-input-wrapper">
        <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
        <input type="text" class="search-input" placeholder="種目を検索...">
      </div>
    </div>

    <!-- カテゴリタブ -->
    <div class="category-tabs">
      <button class="category-tab active">全て</button>
      <button class="category-tab">胸</button>
      <button class="category-tab">背中</button>
      <button class="category-tab">脚</button>
      <button class="category-tab">肩</button>
      <button class="category-tab">二頭</button>
      <button class="category-tab">三頭</button>
      <button class="category-tab">腹</button>
    </div>

    <!-- 種目リスト -->
    <div class="exercise-content">

      <!-- お気に入りセクション -->
      <div class="section-header">
        <div class="section-title">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="#F59E0B" stroke="#F59E0B" stroke-width="1"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
          お気に入り
        </div>
        <div class="section-count">5件</div>
      </div>

      <div class="exercise-item">
        <div class="exercise-item-content">
          <div class="exercise-item-header">
            <div class="exercise-item-name">ベンチプレス</div>
            <span class="favorite-icon">
              <svg width="12" height="12" viewBox="0 0 24 24" fill="#F59E0B" stroke="#F59E0B" stroke-width="1"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
            </span>
          </div>
          <div class="exercise-item-meta">
            <span class="meta-badge muscle-badge">胸</span>
            <span class="meta-badge">コンパウンド</span>
            <span class="meta-badge equipment-badge">バーベル</span>
          </div>
        </div>
      </div>

      <div class="exercise-item">
        <div class="exercise-item-content">
          <div class="exercise-item-header">
            <div class="exercise-item-name">スクワット</div>
            <span class="favorite-icon">
              <svg width="12" height="12" viewBox="0 0 24 24" fill="#F59E0B" stroke="#F59E0B" stroke-width="1"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
            </span>
          </div>
          <div class="exercise-item-meta">
            <span class="meta-badge muscle-badge">脚</span>
            <span class="meta-badge">コンパウンド</span>
            <span class="meta-badge equipment-badge">バーベル</span>
          </div>
        </div>
      </div>

      <div class="exercise-item">
        <div class="exercise-item-content">
          <div class="exercise-item-header">
            <div class="exercise-item-name">デッドリフト</div>
            <span class="favorite-icon">
              <svg width="12" height="12" viewBox="0 0 24 24" fill="#F59E0B" stroke="#F59E0B" stroke-width="1"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
            </span>
          </div>
          <div class="exercise-item-meta">
            <span class="meta-badge muscle-badge">背中</span>
            <span class="meta-badge">コンパウンド</span>
            <span class="meta-badge equipment-badge">バーベル</span>
          </div>
        </div>
      </div>

      <!-- カテゴリセクション -->
      <div class="section-header section-header--spaced">
        <div class="section-title">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/></svg>
          胸の種目
        </div>
        <div class="section-count">24件</div>
      </div>

      <!-- 選択済みアイテム -->
      <div class="exercise-item selected">
        <div class="checkbox checked">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg>
        </div>
        <div class="exercise-item-content">
          <div class="exercise-item-header">
            <div class="exercise-item-name">ダンベルフライ</div>
          </div>
          <div class="exercise-item-meta">
            <span class="meta-badge muscle-badge">胸</span>
            <span class="meta-badge">アイソレーション</span>
            <span class="meta-badge equipment-badge">ダンベル</span>
          </div>
        </div>
      </div>

      <!-- 未選択アイテム -->
      <div class="exercise-item">
        <div class="checkbox"></div>
        <div class="exercise-item-content">
          <div class="exercise-item-header">
            <div class="exercise-item-name">インクラインプレス</div>
          </div>
          <div class="exercise-item-meta">
            <span class="meta-badge muscle-badge">胸</span>
            <span class="meta-badge">コンパウンド</span>
            <span class="meta-badge equipment-badge">バーベル</span>
          </div>
        </div>
      </div>

      <div class="exercise-item">
        <div class="checkbox"></div>
        <div class="exercise-item-content">
          <div class="exercise-item-header">
            <div class="exercise-item-name">ダンベルプレス</div>
          </div>
          <div class="exercise-item-meta">
            <span class="meta-badge muscle-badge">胸</span>
            <span class="meta-badge">コンパウンド</span>
            <span class="meta-badge equipment-badge">ダンベル</span>
          </div>
        </div>
      </div>

      <div class="exercise-item">
        <div class="checkbox"></div>
        <div class="exercise-item-content">
          <div class="exercise-item-header">
            <div class="exercise-item-name">ケーブルフライ</div>
          </div>
          <div class="exercise-item-meta">
            <span class="meta-badge muscle-badge">胸</span>
            <span class="meta-badge">アイソレーション</span>
            <span class="meta-badge equipment-badge">ケーブル</span>
          </div>
        </div>
      </div>

      <div class="exercise-item">
        <div class="checkbox"></div>
        <div class="exercise-item-content">
          <div class="exercise-item-header">
            <div class="exercise-item-name">ペックフライ</div>
          </div>
          <div class="exercise-item-meta">
            <span class="meta-badge muscle-badge">胸</span>
            <span class="meta-badge">アイソレーション</span>
            <span class="meta-badge equipment-badge">マシン</span>
          </div>
        </div>
      </div>

      <div class="exercise-item">
        <div class="checkbox"></div>
        <div class="exercise-item-content">
          <div class="exercise-item-header">
            <div class="exercise-item-name">デクラインプレス</div>
          </div>
          <div class="exercise-item-meta">
            <span class="meta-badge muscle-badge">胸</span>
            <span class="meta-badge">コンパウンド</span>
            <span class="meta-badge equipment-badge">バーベル</span>
          </div>
        </div>
      </div>

    </div>

    <!-- 複数選択フッター -->
    <div class="multi-select-footer">
      <button class="cancel-btn">キャンセル</button>
      <button class="add-selected-btn">
        <span class="added-count">1</span> 種目を追加
      </button>
    </div>

  </div>
</div>

<!-- ═══ EXERCISE HISTORY: Bottom Sheet ═══ -->
<div id="screen-history" class="screen">

  <!-- 背景: 記録画面が薄く見えている状態 -->
  <div class="history-backdrop">
    <div class="workout-header">
      <div class="workout-title">プッシュデイ</div>
      <button class="done-btn">完了</button>
    </div>
    <div class="exercise" style="opacity: 0.3;">
      <div class="exercise-header">
        <div>
          <div class="exercise-name" style="text-decoration: none; color: var(--fgColor-default);">ベンチプレス</div>
          <div class="exercise-meta">胸 &#8226; コンパウンド</div>
        </div>
      </div>
    </div>
  </div>

  <!-- ボトムシート本体 -->
  <div class="bottom-sheet">
    <div class="drag-handle"></div>

    <div class="sheet-header">
      <div class="sheet-title">ベンチプレス</div>
      <div class="sheet-subtitle">胸 &#8226; コンパウンド &#8226; 過去10回分の記録</div>
    </div>

    <div class="sheet-content">

      <!-- 統計サマリー (3項目) -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-label">最大重量</div>
          <div class="stat-value">90<span class="stat-unit">kg</span></div>
        </div>
        <div class="stat-card">
          <div class="stat-label">最大ボリューム</div>
          <div class="stat-value">2080<span class="stat-unit">kg</span></div>
        </div>
        <div class="stat-card">
          <div class="stat-label">平均重量</div>
          <div class="stat-value">82<span class="stat-unit">kg</span></div>
        </div>
      </div>

      <!-- 重量推移グラフ (直近30日間) -->
      <div class="chart-section">
        <div class="section-title">直近30日間の重量推移</div>
        <div class="chart-container">
          <div class="chart-bar" style="height: 75%;"></div>
          <div class="chart-bar" style="height: 82%;"></div>
          <div class="chart-bar" style="height: 78%;"></div>
          <div class="chart-bar" style="height: 85%;"></div>
          <div class="chart-bar" style="height: 88%;"></div>
          <div class="chart-bar" style="height: 92%;"></div>
          <div class="chart-bar highlight" style="height: 100%;"></div>
        </div>
      </div>

      <!-- 履歴リスト (ボトムシートでは5件表示) -->
      <div class="history-list">
        <div class="section-title">過去10回分の履歴</div>

        <div class="history-item">
          <div class="history-date">
            <span>2026-02-15 (今日)</span>
            <span class="history-badge">PR</span>
          </div>
          <div class="history-sets">
            <div class="history-set">80kg x 10</div>
            <div class="history-set">85kg x 8</div>
            <div class="history-set">90kg x 6</div>
          </div>
        </div>

        <div class="history-item">
          <div class="history-date">
            <span>2026-02-12 (3日前)</span>
          </div>
          <div class="history-sets">
            <div class="history-set">75kg x 10</div>
            <div class="history-set">80kg x 8</div>
            <div class="history-set">85kg x 6</div>
          </div>
        </div>

        <div class="history-item">
          <div class="history-date">
            <span>2026-02-08 (7日前)</span>
          </div>
          <div class="history-sets">
            <div class="history-set">75kg x 10</div>
            <div class="history-set">75kg x 8</div>
            <div class="history-set">80kg x 8</div>
          </div>
        </div>

        <div class="history-item">
          <div class="history-date">
            <span>2026-02-05 (10日前)</span>
          </div>
          <div class="history-sets">
            <div class="history-set">70kg x 10</div>
            <div class="history-set">75kg x 8</div>
            <div class="history-set">75kg x 6</div>
          </div>
        </div>

        <div class="history-item">
          <div class="history-date">
            <span>2026-02-01 (14日前)</span>
          </div>
          <div class="history-sets">
            <div class="history-set">70kg x 10</div>
            <div class="history-set">70kg x 8</div>
            <div class="history-set">75kg x 6</div>
          </div>
        </div>
      </div>

      <!-- 詳細を見る → フルスクリーン展開 -->
      <button class="view-more-btn">詳細を見る</button>

    </div>
  </div>
</div>

<!-- ═══ EXERCISE HISTORY: Fullscreen ═══ -->
<div id="screen-history-full" class="screen">

  <!-- フルスクリーンヘッダー -->
  <div class="fullscreen-header">
    <button class="back-btn">&#8592; 戻る</button>
    <div class="fullscreen-title">ベンチプレス</div>
    <div style="width: 40px;"></div>
  </div>

  <div class="fullscreen-content">

    <!-- 統計サマリー (6項目) -->
    <div class="stats-grid stats-grid-6">
      <div class="stat-card">
        <div class="stat-label">最大重量</div>
        <div class="stat-value">90<span class="stat-unit">kg</span></div>
      </div>
      <div class="stat-card">
        <div class="stat-label">最大ボリューム</div>
        <div class="stat-value">2080<span class="stat-unit">kg</span></div>
      </div>
      <div class="stat-card">
        <div class="stat-label">平均重量</div>
        <div class="stat-value">82<span class="stat-unit">kg</span></div>
      </div>
      <div class="stat-card">
        <div class="stat-label">総トレ回数</div>
        <div class="stat-value">47<span class="stat-unit">回</span></div>
      </div>
      <div class="stat-card">
        <div class="stat-label">総ボリューム</div>
        <div class="stat-value">91.2<span class="stat-unit">t</span></div>
      </div>
      <div class="stat-card">
        <div class="stat-label">最終PR</div>
        <div class="stat-value">今日</div>
      </div>
    </div>

    <!-- 大きなグラフ (過去3ヶ月・週平均) -->
    <div class="chart-section" style="margin-top: 24px;">
      <div class="section-title">過去3ヶ月の重量推移 (週平均)</div>
      <div class="chart-container large-chart">
        <div class="chart-bar" style="height: 45%;"></div>
        <div class="chart-bar" style="height: 52%;"></div>
        <div class="chart-bar" style="height: 48%;"></div>
        <div class="chart-bar" style="height: 55%;"></div>
        <div class="chart-bar" style="height: 58%;"></div>
        <div class="chart-bar" style="height: 62%;"></div>
        <div class="chart-bar" style="height: 68%;"></div>
        <div class="chart-bar" style="height: 72%;"></div>
        <div class="chart-bar" style="height: 75%;"></div>
        <div class="chart-bar" style="height: 82%;"></div>
        <div class="chart-bar" style="height: 88%;"></div>
        <div class="chart-bar highlight" style="height: 100%;"></div>
      </div>
    </div>

    <!-- PR (自己ベスト) 履歴 -->
    <div class="pr-list">
      <div class="section-title">PR (自己ベスト) 履歴</div>

      <div class="pr-item">
        <div>
          <div class="pr-label">最大重量 (1RM推定)</div>
          <div class="pr-date">2026-02-15</div>
        </div>
        <div class="pr-value">103kg</div>
      </div>

      <div class="pr-item">
        <div>
          <div class="pr-label">最大ボリューム (1セッション)</div>
          <div class="pr-date">2026-02-15</div>
        </div>
        <div class="pr-value">2080kg</div>
      </div>

      <div class="pr-item">
        <div>
          <div class="pr-label">最大レップス (80kg)</div>
          <div class="pr-date">2026-02-15</div>
        </div>
        <div class="pr-value">10回</div>
      </div>
    </div>

    <!-- 全履歴 (47回) -->
    <div class="history-list" style="margin-top: 24px;">
      <div class="section-title">全履歴 (47回)</div>

      <div class="history-item">
        <div class="history-date">
          <span>2026-02-15 (今日)</span>
          <span class="history-badge">PR</span>
        </div>
        <div class="history-sets">
          <div class="history-set">80kg x 10</div>
          <div class="history-set">85kg x 8</div>
          <div class="history-set">90kg x 6</div>
        </div>
      </div>

      <div class="history-item">
        <div class="history-date">
          <span>2026-02-12 (3日前)</span>
        </div>
        <div class="history-sets">
          <div class="history-set">75kg x 10</div>
          <div class="history-set">80kg x 8</div>
          <div class="history-set">85kg x 6</div>
        </div>
      </div>

      <div class="history-item">
        <div class="history-date">
          <span>2026-02-08 (7日前)</span>
        </div>
        <div class="history-sets">
          <div class="history-set">75kg x 10</div>
          <div class="history-set">75kg x 8</div>
          <div class="history-set">80kg x 8</div>
        </div>
      </div>

      <div class="history-item">
        <div class="history-date">
          <span>2026-02-05 (10日前)</span>
        </div>
        <div class="history-sets">
          <div class="history-set">70kg x 10</div>
          <div class="history-set">75kg x 8</div>
          <div class="history-set">75kg x 6</div>
        </div>
      </div>

      <div class="history-item">
        <div class="history-date">
          <span>2026-02-01 (14日前)</span>
        </div>
        <div class="history-sets">
          <div class="history-set">70kg x 10</div>
          <div class="history-set">70kg x 8</div>
          <div class="history-set">75kg x 6</div>
        </div>
      </div>

      <div class="history-item">
        <div class="history-date">
          <span>2026-01-29 (17日前)</span>
        </div>
        <div class="history-sets">
          <div class="history-set">70kg x 10</div>
          <div class="history-set">70kg x 8</div>
          <div class="history-set">70kg x 6</div>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- ═══ CALENDAR SCREEN ═══ -->
<div id="screen-calendar" class="screen">
  <div class="calendar-header">
    <h1 class="calendar-title">2026年 2月</h1>
    <div class="calendar-nav">
      <button class="calendar-nav-btn" aria-label="前月">
        <svg class="icon-20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
      </button>
      <button class="calendar-nav-btn" aria-label="次月">
        <svg class="icon-20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
      </button>
    </div>
  </div>

  <div class="calendar-weekdays">
    <div class="calendar-weekday">月</div>
    <div class="calendar-weekday">火</div>
    <div class="calendar-weekday">水</div>
    <div class="calendar-weekday">木</div>
    <div class="calendar-weekday">金</div>
    <div class="calendar-weekday">土</div>
    <div class="calendar-weekday">日</div>
  </div>

  <div class="calendar-grid">
    <div class="calendar-day empty"></div>
    <div class="calendar-day empty"></div>
    <div class="calendar-day empty"></div>
    <div class="calendar-day empty"></div>
    <div class="calendar-day empty"></div>
    <div class="calendar-day has-training"><span class="calendar-day-number">1</span><div class="calendar-dot"></div></div>
    <div class="calendar-day"><span class="calendar-day-number">2</span></div>
    <div class="calendar-day has-training"><span class="calendar-day-number">3</span><div class="calendar-dot"></div></div>
    <div class="calendar-day has-training"><span class="calendar-day-number">4</span><div class="calendar-dot"></div></div>
    <div class="calendar-day"><span class="calendar-day-number">5</span></div>
    <div class="calendar-day has-training"><span class="calendar-day-number">6</span><div class="calendar-dot"></div></div>
    <div class="calendar-day has-training"><span class="calendar-day-number">7</span><div class="calendar-dot"></div></div>
    <div class="calendar-day has-training"><span class="calendar-day-number">8</span><div class="calendar-dot"></div></div>
    <div class="calendar-day"><span class="calendar-day-number">9</span></div>
    <div class="calendar-day has-training"><span class="calendar-day-number">10</span><div class="calendar-dot"></div></div>
    <div class="calendar-day has-training"><span class="calendar-day-number">11</span><div class="calendar-dot"></div></div>
    <div class="calendar-day"><span class="calendar-day-number">12</span></div>
    <div class="calendar-day has-training"><span class="calendar-day-number">13</span><div class="calendar-dot"></div></div>
    <div class="calendar-day has-training"><span class="calendar-day-number">14</span><div class="calendar-dot"></div></div>
    <div class="calendar-day has-training"><span class="calendar-day-number">15</span><div class="calendar-dot"></div></div>
    <div class="calendar-day today"><span class="calendar-day-number">16</span></div>
    <div class="calendar-day"><span class="calendar-day-number">17</span></div>
    <div class="calendar-day"><span class="calendar-day-number">18</span></div>
    <div class="calendar-day"><span class="calendar-day-number">19</span></div>
    <div class="calendar-day"><span class="calendar-day-number">20</span></div>
    <div class="calendar-day"><span class="calendar-day-number">21</span></div>
    <div class="calendar-day"><span class="calendar-day-number">22</span></div>
    <div class="calendar-day"><span class="calendar-day-number">23</span></div>
    <div class="calendar-day"><span class="calendar-day-number">24</span></div>
    <div class="calendar-day"><span class="calendar-day-number">25</span></div>
    <div class="calendar-day"><span class="calendar-day-number">26</span></div>
    <div class="calendar-day"><span class="calendar-day-number">27</span></div>
    <div class="calendar-day"><span class="calendar-day-number">28</span></div>
    <div class="calendar-day empty"></div>
    <div class="calendar-day empty"></div>
    <div class="calendar-day empty"></div>
  </div>

  <!-- Workout Detail for Selected Date -->
  <div class="cal-detail-section">
    <div class="cal-detail-header">
      <div class="cal-detail-date">2026年2月15日（土）のワークアウト</div>
    </div>

    <div class="cal-summary-card">
      <div class="cal-summary-item"><span class="cal-summary-label">所要時間</span><span class="cal-summary-value">1時間8分</span></div><div class="cal-summary-divider"></div>
      <div class="cal-summary-item"><span class="cal-summary-label">総ボリューム</span><span class="cal-summary-value">3,240kg</span></div><div class="cal-summary-divider"></div>
      <div class="cal-summary-item"><span class="cal-summary-label">種目数</span><span class="cal-summary-value">3</span></div><div class="cal-summary-divider"></div>
      <div class="cal-summary-item"><span class="cal-summary-label">セット数</span><span class="cal-summary-value">9</span></div>
    </div>

    <div class="cal-exercises">
      <div class="cal-exercise-block">
        <div class="cal-exercise-name">ベンチプレス</div>
        <div class="cal-sets">
          <div class="cal-set-row"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="cal-check-icon"><polyline points="20 6 9 17 4 12"></polyline></svg><span class="cal-set-number">1</span><span class="cal-set-value">80kg × 10</span><span class="cal-set-orm">1RM: 107kg</span></div>
          <div class="cal-set-row"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="cal-check-icon"><polyline points="20 6 9 17 4 12"></polyline></svg><span class="cal-set-number">2</span><span class="cal-set-value">85kg × 8</span><span class="cal-set-orm">1RM: 105kg</span></div>
          <div class="cal-set-row"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="cal-check-icon"><polyline points="20 6 9 17 4 12"></polyline></svg><span class="cal-set-number">3</span><span class="cal-set-value">90kg × 6</span><span class="cal-set-orm">1RM: 107kg</span></div>
          <div class="cal-set-row"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="cal-check-icon"><polyline points="20 6 9 17 4 12"></polyline></svg><span class="cal-set-number">4</span><span class="cal-set-value">90kg × 5</span><span class="cal-set-orm">1RM: 101kg</span></div>
        </div>
      </div>

      <div class="cal-exercise-block">
        <div class="cal-exercise-name">インクラインプレス</div>
        <div class="cal-sets">
          <div class="cal-set-row"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="cal-check-icon"><polyline points="20 6 9 17 4 12"></polyline></svg><span class="cal-set-number">1</span><span class="cal-set-value">30kg × 12</span><span class="cal-set-orm">1RM: 42kg</span></div>
          <div class="cal-set-row"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="cal-check-icon"><polyline points="20 6 9 17 4 12"></polyline></svg><span class="cal-set-number">2</span><span class="cal-set-value">32kg × 10</span><span class="cal-set-orm">1RM: 43kg</span></div>
        </div>
      </div>

      <div class="cal-exercise-block">
        <div class="cal-exercise-name">ケーブルフライ</div>
        <div class="cal-sets">
          <div class="cal-set-row"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="cal-check-icon"><polyline points="20 6 9 17 4 12"></polyline></svg><span class="cal-set-number">1</span><span class="cal-set-value">20kg × 15</span><span class="cal-set-orm">1RM: 30kg</span></div>
          <div class="cal-set-row"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="cal-check-icon"><polyline points="20 6 9 17 4 12"></polyline></svg><span class="cal-set-number">2</span><span class="cal-set-value">20kg × 15</span><span class="cal-set-orm">1RM: 30kg</span></div>
          <div class="cal-set-row"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="cal-check-icon"><polyline points="20 6 9 17 4 12"></polyline></svg><span class="cal-set-number">3</span><span class="cal-set-value">20kg × 12</span><span class="cal-set-orm">1RM: 28kg</span></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ═══ STATISTICS SCREEN ═══ -->
<div id="screen-stats" class="screen">
  <div class="stats-header">
    <h1 class="stats-title">統計</h1>
  </div>

  <div class="period-tabs">
    <button class="period-tab">週</button>
    <button class="period-tab active">月</button>
    <button class="period-tab">3ヶ月</button>
    <button class="period-tab">年</button>
  </div>

  <div class="volume-card">
    <div class="volume-header">
      <div class="volume-left">
        <div class="volume-label">月間ボリューム推移</div>
        <div class="volume-value">98,400<span class="volume-unit">kg</span></div>
      </div>
      <div class="volume-badge">+12.3%</div>
    </div>
    <div class="chart-container volume-chart">
      <div class="chart-column">
        <div class="chart-bar" style="height: 68%;"></div>
        <div class="chart-label">8月</div>
      </div>
      <div class="chart-column">
        <div class="chart-bar" style="height: 82%;"></div>
        <div class="chart-label">9月</div>
      </div>
      <div class="chart-column">
        <div class="chart-bar" style="height: 76%;"></div>
        <div class="chart-label">10月</div>
      </div>
      <div class="chart-column">
        <div class="chart-bar" style="height: 89%;"></div>
        <div class="chart-label">11月</div>
      </div>
      <div class="chart-column">
        <div class="chart-bar" style="height: 95%;"></div>
        <div class="chart-label">12月</div>
      </div>
      <div class="chart-column">
        <div class="chart-bar" style="height: 86%;"></div>
        <div class="chart-label">1月</div>
      </div>
      <div class="chart-column">
        <div class="chart-bar highlight" style="height: 100%;"></div>
        <div class="chart-label">2月</div>
      </div>
    </div>
  </div>

  <div class="muscle-distribution-card">
    <div class="section-title">筋群別ボリューム分布</div>
    <div class="muscle-group">
      <div class="muscle-header"><span class="muscle-name">胸</span><span class="muscle-percent">28%</span></div>
      <div class="progress-bar"><div class="progress-fill" style="width: 28%; background: var(--muscle-chest);"></div></div>
    </div>
    <div class="muscle-group">
      <div class="muscle-header"><span class="muscle-name">背中</span><span class="muscle-percent">25%</span></div>
      <div class="progress-bar"><div class="progress-fill" style="width: 25%; background: var(--muscle-back);"></div></div>
    </div>
    <div class="muscle-group">
      <div class="muscle-header"><span class="muscle-name">脚</span><span class="muscle-percent">22%</span></div>
      <div class="progress-bar"><div class="progress-fill" style="width: 22%; background: var(--muscle-legs);"></div></div>
    </div>
    <div class="muscle-group">
      <div class="muscle-header"><span class="muscle-name">肩</span><span class="muscle-percent">15%</span></div>
      <div class="progress-bar"><div class="progress-fill" style="width: 15%; background: var(--muscle-shoulders);"></div></div>
    </div>
    <div class="muscle-group">
      <div class="muscle-header"><span class="muscle-name">腕</span><span class="muscle-percent">10%</span></div>
      <div class="progress-bar"><div class="progress-fill" style="width: 10%; background: var(--muscle-arms);"></div></div>
    </div>
  </div>

  <div class="one-rm-card">
    <div class="section-title">推定1RM (BIG3)</div>
    <div class="one-rm-grid">
      <div class="one-rm-item">
        <div class="one-rm-label">ベンチ</div>
        <div class="one-rm-value">107.5<span class="one-rm-unit">kg</span></div>
        <div class="one-rm-trend trend-up">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="18 15 12 9 6 15"></polyline></svg>
        </div>
      </div>
      <div class="one-rm-item">
        <div class="one-rm-label">スクワット</div>
        <div class="one-rm-value">142.5<span class="one-rm-unit">kg</span></div>
        <div class="one-rm-trend trend-up">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="18 15 12 9 6 15"></polyline></svg>
        </div>
      </div>
      <div class="one-rm-item">
        <div class="one-rm-label">デッド</div>
        <div class="one-rm-value">165.0<span class="one-rm-unit">kg</span></div>
        <div class="one-rm-trend trend-neutral">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="5" y1="12" x2="19" y2="12"></line></svg>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ═══ AI ASSISTANT ═══ -->
<div id="screen-ai" class="screen">
  <div class="wf-header">
    <h1 class="wf-header-title">AI アシスタント</h1>
  </div>
  <div class="wf-content" style="padding: 0;">
    <div class="ai-chat-container">
      <div class="ai-chat-messages">
        <div class="ai-message">
          <div class="ai-avatar">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
            </svg>
          </div>
          <div class="ai-message-content">
            こんにちは！トレーニングについて何でも聞いてください。メニュー提案、フォームチェック、栄養アドバイスなど対応できます。
          </div>
        </div>
        <div class="ai-suggestions">
          <button class="ai-suggestion-chip">今日のメニューを提案</button>
          <button class="ai-suggestion-chip">ベンチプレスのフォーム</button>
          <button class="ai-suggestion-chip">増量期の食事</button>
          <button class="ai-suggestion-chip">疲労回復のコツ</button>
        </div>
      </div>
      <div class="ai-input-area">
        <div class="ai-input-wrapper">
          <textarea class="ai-textarea" placeholder="メッセージを入力..." rows="1"></textarea>
          <button class="ai-send-btn">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="22" y1="2" x2="11" y2="13"/>
              <polygon points="22 2 15 22 11 13 2 9 22 2"/>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ═══ WORKOUT DETAIL: View Mode (6a) ═══ -->
<div id="screen-workout-detail" class="screen">
  <div class="wd-header">
    <button class="wd-back-btn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="wd-icon"><polyline points="15 18 9 12 15 6"></polyline></svg></button>
    <div class="wd-header-info"><h1 class="wd-title">プッシュデイ</h1><p class="wd-datetime">2026-02-15（土）14:30 - 15:38</p></div>
    <button class="wd-edit-btn">編集</button>
  </div>
  <div class="wd-summary-card">
    <div class="wd-summary-item"><span class="wd-summary-label">所要時間</span><span class="wd-summary-value">1時間8分</span></div><div class="wd-summary-divider"></div>
    <div class="wd-summary-item"><span class="wd-summary-label">総ボリューム</span><span class="wd-summary-value">3,240kg</span></div><div class="wd-summary-divider"></div>
    <div class="wd-summary-item"><span class="wd-summary-label">種目数</span><span class="wd-summary-value">3</span></div><div class="wd-summary-divider"></div>
    <div class="wd-summary-item"><span class="wd-summary-label">セット数</span><span class="wd-summary-value">9</span></div>
  </div>
  <div class="wd-exercises">
    <div class="wd-exercise-block">
      <button class="wd-exercise-name">ベンチプレス</button>
      <div class="wd-sets">
        <div class="wd-set-row wd-set-completed"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="wd-check-icon"><polyline points="20 6 9 17 4 12"></polyline></svg><span class="wd-set-number">1</span><span class="wd-set-value">80kg × 10</span><span class="wd-set-orm">1RM: 107kg</span></div>
        <div class="wd-set-row wd-set-completed"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="wd-check-icon"><polyline points="20 6 9 17 4 12"></polyline></svg><span class="wd-set-number">2</span><span class="wd-set-value">85kg × 8</span><span class="wd-set-orm">1RM: 105kg</span></div>
        <div class="wd-set-row wd-set-completed"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="wd-check-icon"><polyline points="20 6 9 17 4 12"></polyline></svg><span class="wd-set-number">3</span><span class="wd-set-value">90kg × 6</span><span class="wd-set-orm">1RM: 107kg</span></div>
        <div class="wd-set-row wd-set-completed"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="wd-check-icon"><polyline points="20 6 9 17 4 12"></polyline></svg><span class="wd-set-number">4</span><span class="wd-set-value">90kg × 5</span><span class="wd-set-orm">1RM: 101kg</span></div>
      </div>
    </div>
    <div class="wd-exercise-block">
      <button class="wd-exercise-name">インクラインプレス</button>
      <div class="wd-sets">
        <div class="wd-set-row wd-set-completed"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="wd-check-icon"><polyline points="20 6 9 17 4 12"></polyline></svg><span class="wd-set-number">1</span><span class="wd-set-value">30kg × 12</span><span class="wd-set-orm">1RM: 42kg</span></div>
        <div class="wd-set-row wd-set-completed"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="wd-check-icon"><polyline points="20 6 9 17 4 12"></polyline></svg><span class="wd-set-number">2</span><span class="wd-set-value">32kg × 10</span><span class="wd-set-orm">1RM: 43kg</span></div>
      </div>
    </div>
    <div class="wd-exercise-block">
      <button class="wd-exercise-name">ケーブルフライ</button>
      <div class="wd-sets">
        <div class="wd-set-row wd-set-completed"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="wd-check-icon"><polyline points="20 6 9 17 4 12"></polyline></svg><span class="wd-set-number">1</span><span class="wd-set-value">20kg × 15</span><span class="wd-set-orm">1RM: 30kg</span></div>
        <div class="wd-set-row wd-set-completed"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="wd-check-icon"><polyline points="20 6 9 17 4 12"></polyline></svg><span class="wd-set-number">2</span><span class="wd-set-value">20kg × 15</span><span class="wd-set-orm">1RM: 30kg</span></div>
        <div class="wd-set-row wd-set-completed"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="wd-check-icon"><polyline points="20 6 9 17 4 12"></polyline></svg><span class="wd-set-number">3</span><span class="wd-set-value">20kg × 12</span><span class="wd-set-orm">1RM: 28kg</span></div>
      </div>
    </div>
  </div>
  <div class="wd-footer"><button class="wd-delete-btn">ワークアウトを削除</button></div>
</div>

<!-- ═══ WORKOUT DETAIL: Edit Mode (6b) ═══ -->
<div id="screen-workout-edit" class="screen">
  <div class="wd-header">
    <button class="wd-cancel-btn">キャンセル</button>
    <div class="wd-header-info"><h1 class="wd-title">プッシュデイ</h1><p class="wd-datetime">2026-02-15（土）14:30</p></div>
    <button class="wd-save-btn">保存</button>
  </div>
  <div class="wd-edit-exercises">
    <div class="wd-edit-exercise-block">
      <div class="wd-edit-exercise-header"><span class="wd-edit-exercise-name">ベンチプレス</span><button class="wd-delete-exercise-btn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="wd-icon-small"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg></button></div>
      <div class="wd-edit-set-table">
        <div class="wd-edit-set-header"><span class="wd-edit-col-set">SET</span><span>kg</span><span></span><span>reps</span><span>1RM</span></div>
        <div class="wd-edit-set-row"><span class="wd-edit-set-number">1</span><input type="number" class="wd-edit-input" value="80"><span class="wd-edit-x">×</span><input type="number" class="wd-edit-input" value="10"><span class="wd-edit-orm-value">107</span></div>
        <div class="wd-edit-set-row"><span class="wd-edit-set-number">2</span><input type="number" class="wd-edit-input" value="85"><span class="wd-edit-x">×</span><input type="number" class="wd-edit-input" value="8"><span class="wd-edit-orm-value">105</span></div>
        <div class="wd-edit-set-row"><span class="wd-edit-set-number">3</span><input type="number" class="wd-edit-input" value="90"><span class="wd-edit-x">×</span><input type="number" class="wd-edit-input" value="6"><span class="wd-edit-orm-value">107</span></div>
        <div class="wd-edit-set-row"><span class="wd-edit-set-number">4</span><input type="number" class="wd-edit-input" value="90"><span class="wd-edit-x">×</span><input type="number" class="wd-edit-input" value="5"><span class="wd-edit-orm-value">101</span></div>
      </div>
      <button class="wd-add-set-btn">+ セットを追加</button>
    </div>
    <div class="wd-edit-exercise-block">
      <div class="wd-edit-exercise-header"><span class="wd-edit-exercise-name">インクラインプレス</span><button class="wd-delete-exercise-btn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="wd-icon-small"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg></button></div>
      <div class="wd-edit-set-table">
        <div class="wd-edit-set-header"><span class="wd-edit-col-set">SET</span><span>kg</span><span></span><span>reps</span><span>1RM</span></div>
        <div class="wd-edit-set-row"><span class="wd-edit-set-number">1</span><input type="number" class="wd-edit-input" value="30"><span class="wd-edit-x">×</span><input type="number" class="wd-edit-input" value="12"><span class="wd-edit-orm-value">42</span></div>
        <div class="wd-edit-set-row"><span class="wd-edit-set-number">2</span><input type="number" class="wd-edit-input" value="32"><span class="wd-edit-x">×</span><input type="number" class="wd-edit-input" value="10"><span class="wd-edit-orm-value">43</span></div>
      </div>
      <button class="wd-add-set-btn">+ セットを追加</button>
    </div>
    <div class="wd-edit-exercise-block">
      <div class="wd-edit-exercise-header"><span class="wd-edit-exercise-name">ケーブルフライ</span><button class="wd-delete-exercise-btn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="wd-icon-small"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg></button></div>
      <div class="wd-edit-set-table">
        <div class="wd-edit-set-header"><span class="wd-edit-col-set">SET</span><span>kg</span><span></span><span>reps</span><span>1RM</span></div>
        <div class="wd-edit-set-row"><span class="wd-edit-set-number">1</span><input type="number" class="wd-edit-input" value="20"><span class="wd-edit-x">×</span><input type="number" class="wd-edit-input" value="15"><span class="wd-edit-orm-value">30</span></div>
        <div class="wd-edit-set-row"><span class="wd-edit-set-number">2</span><input type="number" class="wd-edit-input" value="20"><span class="wd-edit-x">×</span><input type="number" class="wd-edit-input" value="15"><span class="wd-edit-orm-value">30</span></div>
        <div class="wd-edit-set-row"><span class="wd-edit-set-number">3</span><input type="number" class="wd-edit-input" value="20"><span class="wd-edit-x">×</span><input type="number" class="wd-edit-input" value="12"><span class="wd-edit-orm-value">28</span></div>
      </div>
      <button class="wd-add-set-btn">+ セットを追加</button>
    </div>
  </div>
  <button class="wd-add-exercise-btn">+ 種目を追加</button>
</div>

<!-- ═══ DISCARD DIALOG (6c) ═══ -->
<div id="screen-discard-dialog" class="screen">
  <div class="dialog-overlay">
    <div class="dialog-backdrop"></div>
    <div class="dialog-container">
      <div class="dialog-header">
        <div class="dialog-icon-warning"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg></div>
        <h2 class="dialog-title">ワークアウトを破棄しますか?</h2>
        <p class="dialog-description">記録中のデータはすべて失われます。この操作は取り消せません。</p>
      </div>
      <div class="dialog-actions">
        <button class="button-dialog-cancel">続ける</button>
        <button class="button-dialog-destructive">破棄する</button>
      </div>
    </div>
  </div>
</div>

<!-- ═══ SETTINGS TOP (6d) ═══ -->
<div id="screen-settings" class="screen">
  <div class="settings-header">
    <button class="settings-back-btn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"></polyline></svg></button>
    <h1 class="settings-header-title">設定</h1>
    <div class="settings-header-spacer"></div>
  </div>
  <div class="settings-main">
    <div class="settings-user-card">
      <div class="settings-user-avatar">K</div>
      <div><div class="settings-user-name">Kei</div><div class="settings-user-email">kei@example.com</div></div>
    </div>
    <section class="settings-group">
      <h3 class="settings-group-title">データ管理</h3>
      <div class="settings-list">
        <button class="settings-item"><div class="settings-item-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"></path></svg></div><div class="settings-item-content"><div class="settings-item-label">バックアップ</div><div class="settings-item-value">最終: 2/16 09:30</div></div><div class="settings-item-chevron"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"></polyline></svg></div></button>
        <button class="settings-item"><div class="settings-item-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg></div><div class="settings-item-content"><div class="settings-item-label">データエクスポート</div><div class="settings-item-value">CSV / PDF</div></div><div class="settings-item-chevron"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"></polyline></svg></div></button>
      </div>
    </section>
    <section class="settings-group">
      <h3 class="settings-group-title">アプリ設定</h3>
      <div class="settings-list">
        <button class="settings-item"><div class="settings-item-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><path d="M12 6v6l4 2"></path></svg></div><div class="settings-item-content"><div class="settings-item-label">デフォルトインターバル</div><div class="settings-item-value">1分30秒</div></div><div class="settings-item-chevron"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"></polyline></svg></div></button>
        <button class="settings-item"><div class="settings-item-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="4" y1="9" x2="20" y2="9"></line><line x1="4" y1="15" x2="20" y2="15"></line><line x1="10" y1="3" x2="8" y2="21"></line><line x1="16" y1="3" x2="14" y2="21"></line></svg></div><div class="settings-item-content"><div class="settings-item-label">単位設定</div><div class="settings-item-value">kg / cm</div></div><div class="settings-item-chevron"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"></polyline></svg></div></button>
        <button class="settings-item"><div class="settings-item-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg></div><div class="settings-item-content"><div class="settings-item-label">通知設定</div><div class="settings-item-value">リマインダー ON</div></div><div class="settings-item-chevron"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"></polyline></svg></div></button>
      </div>
    </section>
    <section class="settings-group">
      <h3 class="settings-group-title">その他</h3>
      <div class="settings-list">
        <button class="settings-item"><div class="settings-item-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line></svg></div><div class="settings-item-content"><div class="settings-item-label">ヘルプ・フィードバック</div></div><div class="settings-item-chevron"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"></polyline></svg></div></button>
        <button class="settings-item"><div class="settings-item-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline></svg></div><div class="settings-item-content"><div class="settings-item-label">利用規約</div></div><div class="settings-item-chevron"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"></polyline></svg></div></button>
        <button class="settings-item"><div class="settings-item-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg></div><div class="settings-item-content"><div class="settings-item-label">プライバシーポリシー</div></div><div class="settings-item-chevron"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"></polyline></svg></div></button>
        <button class="settings-item"><div class="settings-item-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg></div><div class="settings-item-content"><div class="settings-item-label">バージョン</div><div class="settings-item-value">v1.0.0</div></div></button>
      </div>
    </section>
  </div>
</div>

<!-- ═══ SETTINGS: BACKUP (6e) ═══ -->
<div id="screen-settings-backup" class="screen">
  <div class="wf-header"><button class="wf-header-back"><svg class="wf-icon-back" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"></polyline></svg></button><h1 class="wf-header-title">バックアップ</h1></div>
  <div class="wf-content">
    <section class="wf-settings-section"><h2 class="wf-section-title">バックアップ先</h2><div class="wf-card"><div class="wf-settings-row"><span class="wf-settings-label">iCloud</span><div class="toggle-switch active"><div class="toggle-knob"></div></div></div><div class="wf-settings-row"><span class="wf-settings-label">Google Drive</span><div class="toggle-switch"><div class="toggle-knob"></div></div></div></div></section>
    <section class="wf-settings-section"><h2 class="wf-section-title">自動バックアップ</h2><div class="wf-card"><div class="wf-settings-row"><span class="wf-settings-label">自動バックアップ</span><div class="toggle-switch active"><div class="toggle-knob"></div></div></div><div class="wf-settings-row"><span class="wf-settings-label">頻度</span><div class="wf-segment-control"><button class="wf-segment-item active">毎日</button><button class="wf-segment-item">週1</button><button class="wf-segment-item">月1</button></div></div></div></section>
    <section class="wf-settings-section"><h2 class="wf-section-title">最終バックアップ</h2><div class="wf-card"><div class="wf-info-row"><span class="wf-info-label">日時</span><span class="wf-info-value">2026-02-16 09:30</span></div><div class="wf-info-row"><span class="wf-info-label">サイズ</span><span class="wf-info-value">2.4 MB</span></div></div></section>
    <button class="wf-btn-primary">今すぐバックアップ</button>
  </div>
</div>

<!-- ═══ SETTINGS: TIMER (6f) ═══ -->
<div id="screen-settings-timer" class="screen">
  <div class="wf-header"><button class="wf-header-back"><svg class="wf-icon-back" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"></polyline></svg></button><h1 class="wf-header-title">タイマー設定</h1></div>
  <div class="wf-content">
    <section class="wf-settings-section"><h2 class="wf-section-title">デフォルトインターバル</h2><div class="wf-card"><div class="wf-timer-display"><button class="wf-timer-btn">−</button><div class="wf-timer-value">1:30</div><button class="wf-timer-btn">+</button></div><div class="wf-timer-presets"><button class="wf-preset-btn">60秒</button><button class="wf-preset-btn">90秒</button><button class="wf-preset-btn">120秒</button><button class="wf-preset-btn">180秒</button></div></div></section>
    <section class="wf-settings-section"><h2 class="wf-section-title">自動タイマー開始</h2><div class="wf-card"><div class="wf-settings-row"><div class="wf-settings-text"><span class="wf-settings-label">自動タイマー開始</span><span class="wf-settings-desc">セット完了時にインターバルタイマーを自動で開始します</span></div><div class="toggle-switch active"><div class="toggle-knob"></div></div></div></div></section>
    <section class="wf-settings-section"><h2 class="wf-section-title">通知</h2><div class="wf-card"><div class="wf-settings-row"><div class="wf-settings-text"><span class="wf-settings-label">バイブレーション通知</span><span class="wf-settings-desc">インターバル終了時に振動で通知します</span></div><div class="toggle-switch active"><div class="toggle-knob"></div></div></div></div></section>
  </div>
</div>

<!-- ═══ SETTINGS: UNIT (6g) ═══ -->
<div id="screen-settings-unit" class="screen">
  <div class="wf-header"><button class="wf-header-back"><svg class="wf-icon-back" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"></polyline></svg></button><h1 class="wf-header-title">単位設定</h1></div>
  <div class="wf-content">
    <section class="wf-settings-section"><h2 class="wf-section-title">重量単位</h2><div class="wf-card"><div class="wf-segment-control"><button class="wf-segment-item active">kg</button><button class="wf-segment-item">lb</button></div><p class="wf-settings-note">既存の記録は自動的に変換されます</p></div></section>
    <section class="wf-settings-section"><h2 class="wf-section-title">身長単位</h2><div class="wf-card"><div class="wf-segment-control"><button class="wf-segment-item active">cm</button><button class="wf-segment-item">ft/in</button></div><p class="wf-settings-note">既存の記録は自動的に変換されます</p></div></section>
    <section class="wf-settings-section"><h2 class="wf-section-title">体重単位</h2><div class="wf-card"><div class="wf-segment-control"><button class="wf-segment-item active">kg</button><button class="wf-segment-item">lb</button></div><p class="wf-settings-note">既存の記録は自動的に変換されます</p></div></section>
  </div>
</div>

      </div><!-- /screen-content -->

      <!-- Tab Bar -->
      <div class="tab-bar">
        <button class="tab-bar-item active" data-tab="home">
          <div class="tab-bar-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg></div>
          <div class="tab-bar-label">ホーム</div>
        </button>
        <button class="tab-bar-item" data-tab="calendar">
          <div class="tab-bar-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg></div>
          <div class="tab-bar-label">カレンダー</div>
        </button>
        <button class="tab-bar-item center" data-tab="record">
          <div class="add-button">+</div>
        </button>
        <button class="tab-bar-item" data-tab="stats">
          <div class="tab-bar-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg></div>
          <div class="tab-bar-label">統計</div>
        </button>
        <button class="tab-bar-item" data-tab="ai">
          <div class="tab-bar-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg></div>
          <div class="tab-bar-label">AI</div>
        </button>
      </div>
    </div>
  </div>
</div>


  <div class="transition-hint"></div>
  <script>
document.addEventListener('DOMContentLoaded', function() {
    var screenTabs = document.querySelectorAll('.screen-tabs button');
    var screens = document.querySelectorAll('.screen');
    var screenContent = document.getElementById('screenContent');

    // 遷移ヒント表示用
    var hint = document.createElement('div');
    hint.className = 'transition-hint';
    document.body.appendChild(hint);
    var hintTimer;

    function showHint(text) {
      hint.textContent = '→ ' + text;
      hint.classList.add('show');
      clearTimeout(hintTimer);
      hintTimer = setTimeout(function() { hint.classList.remove('show'); }, 1500);
    }

    // === 画面切り替え関数 ===
    function goTo(screenId, label) {
      // 上部タブのactive更新
      screenTabs.forEach(function(t) {
        t.classList.toggle('active', t.getAttribute('data-screen') === screenId);
      });
      // 画面切替
      screens.forEach(function(s) { s.classList.remove('active'); });
      var target = document.getElementById('screen-' + screenId);
      if (target) { target.classList.add('active'); }
      screenContent.scrollTop = 0;
      // タブバーのactive更新
      var tabMap = { home: 'home', calendar: 'calendar', stats: 'stats', ai: 'ai', record: 'record' };
      var tabBarItems = document.querySelectorAll('.tab-bar-item');
      // タブ画面ならタブバーも更新
      if (tabMap[screenId]) {
        tabBarItems.forEach(function(t) {
          t.classList.toggle('active', t.getAttribute('data-tab') === screenId);
        });
      }
      if (label) showHint(label);
    }

    // === 上部タブ ===
    screenTabs.forEach(function(tab) {
      tab.addEventListener('click', function() {
        goTo(this.getAttribute('data-screen'));
      });
    });

    // === タブバー（下部） ===
    document.querySelectorAll('.tab-bar-item').forEach(function(item) {
      item.addEventListener('click', function() {
        var tab = this.getAttribute('data-tab');
        if (tab) goTo(tab, 'タブ: ' + this.querySelector('.tab-bar-label, .add-button').textContent.trim());
      });
    });

    // === data-goto 属性による汎用遷移 ===
    document.addEventListener('click', function(e) {
      var el = e.target.closest('[data-goto]');
      if (el) {
        e.preventDefault();
        e.stopPropagation();
        goTo(el.getAttribute('data-goto'), el.getAttribute('data-label') || '');
      }
    });

    // === 画面固有の遷移をdata-goto属性で設定 ===

    // ホーム → 設定（アバタータップ）
    var avatar = document.querySelector('#screen-home .user-avatar');
    if (avatar) { avatar.setAttribute('data-goto', 'settings'); avatar.setAttribute('data-label', '設定'); }

    // ホーム → ワークアウト詳細（最近のトレーニングカード）
    document.querySelectorAll('#screen-home .task-card').forEach(function(card) {
      card.setAttribute('data-goto', 'workout-detail');
      card.setAttribute('data-label', 'ワークアウト詳細');
    });

    // ホーム → カレンダー（すべて表示リンク）
    var viewAll = document.querySelector('#screen-home .view-all-link');
    if (viewAll) { viewAll.setAttribute('data-goto', 'calendar'); viewAll.setAttribute('data-label', 'カレンダー'); }

    // 記録 → 種目選択（種目を追加ボタン）
    var addExBtn = document.querySelector('#screen-record .add-exercise-btn');
    if (addExBtn) { addExBtn.setAttribute('data-goto', 'picker'); addExBtn.setAttribute('data-label', '種目選択'); }

    // 記録 → 完了サマリー（完了ボタン）
    var doneBtn = document.querySelector('#screen-record .done-btn');
    if (doneBtn) { doneBtn.setAttribute('data-goto', 'summary'); doneBtn.setAttribute('data-label', 'ワークアウト完了'); }

    // 記録 → 種目別履歴（種目名タップ）
    document.querySelectorAll('#screen-record .exercise-name').forEach(function(name) {
      name.setAttribute('data-goto', 'history');
      name.setAttribute('data-label', '種目別履歴');
    });

    // 種目選択 → 記録（閉じるボタン）
    var closeBtn = document.querySelector('#screen-picker .close-btn');
    if (closeBtn) { closeBtn.setAttribute('data-goto', 'record'); closeBtn.setAttribute('data-label', '記録画面に戻る'); }

    // 種目選択 → 記録（種目タップ）
    document.querySelectorAll('#screen-picker .exercise-item').forEach(function(item) {
      item.setAttribute('data-goto', 'record');
      item.setAttribute('data-label', '種目を選択 → 記録');
    });

    // 種目別履歴BS → フルスクリーン（詳細を見る）
    var detailLink = document.querySelector('#screen-history .view-all-link, #screen-history .history-expand-btn');
    if (detailLink) { detailLink.setAttribute('data-goto', 'history-full'); detailLink.setAttribute('data-label', '履歴フルスクリーン'); }
    // BS backdrop → 記録に戻る
    var backdrop = document.querySelector('#screen-history .history-backdrop');
    if (backdrop) { backdrop.setAttribute('data-goto', 'record'); backdrop.setAttribute('data-label', '記録画面に戻る'); }

    // 種目別履歴FS → BS（戻るボタン）
    var histBackBtn = document.querySelector('#screen-history-full .history-back-btn');
    if (histBackBtn) { histBackBtn.setAttribute('data-goto', 'history'); histBackBtn.setAttribute('data-label', '種目別履歴に戻る'); }

    // 完了サマリー → ホーム
    var homeBtn = document.querySelector('#screen-summary .btn-primary');
    if (homeBtn) { homeBtn.setAttribute('data-goto', 'home'); homeBtn.setAttribute('data-label', 'ホームに戻る'); }

    // カレンダー → ワークアウト詳細（詳細セクションのカードタップ）
    var calDetail = document.querySelector('#screen-calendar .cal-detail-section');
    if (calDetail) { calDetail.setAttribute('data-goto', 'workout-detail'); calDetail.setAttribute('data-label', 'ワークアウト詳細'); }

    // 統計 → 種目別履歴（種目名タップ）※ 1RM種目名
    document.querySelectorAll('#screen-stats .one-rm-exercise').forEach(function(name) {
      name.setAttribute('data-goto', 'history');
      name.setAttribute('data-label', '種目別履歴');
      name.style.cursor = 'pointer';
    });

    // ワークアウト詳細 → 編集モード
    var editBtn = document.querySelector('#screen-workout-detail .wd-edit-btn');
    if (editBtn) { editBtn.setAttribute('data-goto', 'workout-edit'); editBtn.setAttribute('data-label', '編集モード'); }
    // ワークアウト詳細 → 戻る
    var wdBackBtn = document.querySelector('#screen-workout-detail .wd-back-btn');
    if (wdBackBtn) { wdBackBtn.setAttribute('data-goto', 'home'); wdBackBtn.setAttribute('data-label', 'ホームに戻る'); }

    // 編集モード → 詳細（保存/キャンセル）
    var saveBtn = document.querySelector('#screen-workout-edit .wd-save-btn');
    if (saveBtn) { saveBtn.setAttribute('data-goto', 'workout-detail'); saveBtn.setAttribute('data-label', '保存 → 詳細'); }
    var cancelBtn = document.querySelector('#screen-workout-edit .wd-cancel-btn');
    if (cancelBtn) { cancelBtn.setAttribute('data-goto', 'discard-dialog'); cancelBtn.setAttribute('data-label', '破棄確認'); }

    // 破棄確認 → 各遷移
    var discardBtn = document.querySelector('#screen-discard-dialog .button-dialog-destructive');
    if (discardBtn) { discardBtn.setAttribute('data-goto', 'home'); discardBtn.setAttribute('data-label', '破棄 → ホーム'); }
    var continueBtn = document.querySelector('#screen-discard-dialog .button-dialog-cancel');
    if (continueBtn) { continueBtn.setAttribute('data-goto', 'workout-edit'); continueBtn.setAttribute('data-label', '編集を続ける'); }

    // 設定 → 戻る
    var settingsBackBtn = document.querySelector('#screen-settings .settings-back-btn');
    if (settingsBackBtn) { settingsBackBtn.setAttribute('data-goto', 'home'); settingsBackBtn.setAttribute('data-label', 'ホームに戻る'); }

    // 設定 → サブ画面
    document.querySelectorAll('#screen-settings .settings-item').forEach(function(item) {
      var text = item.textContent.trim();
      if (text.includes('バックアップ')) { item.setAttribute('data-goto', 'settings-backup'); item.setAttribute('data-label', 'バックアップ設定'); }
      else if (text.includes('インターバル') || text.includes('タイマー')) { item.setAttribute('data-goto', 'settings-timer'); item.setAttribute('data-label', 'タイマー設定'); }
      else if (text.includes('単位')) { item.setAttribute('data-goto', 'settings-unit'); item.setAttribute('data-label', '単位設定'); }
    });

    // 設定サブ画面 → 設定に戻る
    document.querySelectorAll('.wf-header-back').forEach(function(btn) {
      btn.setAttribute('data-goto', 'settings');
      btn.setAttribute('data-label', '設定に戻る');
    });
  });
  </script>
</body>
</html>
