# UIパターン選定提案書: 記録画面 & 表示/編集

## 1. 記録画面パターン比較

### 候補一覧

| パターン | 概要 | 参考アプリ | レイアウト形式 |
|---------|------|-----------|--------------|
| P1: Strong風 | 効率最優先・リスト形式 | Strong | テーブル型。種目を縦に並べ、各種目内にSET/KG/REPSの表を配置 |
| P2: Hevy風 | カード形式・バランス型 | Hevy | カード型。種目ごとにカードで囲み、カード内にグリッド入力 |
| P3: FitNotes風 | スプレッドシート形式 | FitNotes | スプレッドシート型。折りたたみ可能な種目セクション + テーブル |
| P4: ハイブリッド型 | タブ切り替え・統計表示 | 独自 | タブ型。種目をタブで切り替え、統計カード + セットカード |

### 各パターンの詳細分析

#### P1: Strong風（効率最優先・リスト形式）
- **構造**: stickyヘッダー + タイマーバー + 種目ブロック（border-bottom: 8px solid #F3F4F6 で区切り）
- **入力**: SET番号 / KG入力欄 / REPS入力欄 / チェックボタンの4列テーブル
- **特徴**: 装飾が最小限。種目間の区切りがグレー太線のみでコンパクト。全種目を縦スクロールで一覧可能
- **片手操作**: 入力欄が画面中央に配置され、親指でのアクセスが良好

#### P2: Hevy風（カード形式・バランス型）
- **構造**: タイマーカード + 種目カード（border-radius: 12px、border: 1px solid）
- **入力**: セット番号 / KG入力（ラベル付き） / REPS入力（ラベル付き） / チェックボタンのグリッド
- **特徴**: 各入力フィールドに「KG」「REPS」のフローティングラベルあり。余白が多めでモダン
- **片手操作**: カード間の余白（margin-bottom: 16px）が大きく、10種目時にスクロール量が増大

#### P3: FitNotes風（スプレッドシート形式）
- **構造**: 固定ツールバー（日付 + 総ボリューム） + 折りたたみ可能な種目セクション + テーブル
- **入力**: SET / 前回値 / KG / REPS / チェックボックスの5列テーブル。ボーダーレス入力欄
- **特徴**: 前回記録が同一行に表示される。種目セクションを折りたたみ可能（アコーディオン）。情報密度が最も高い
- **片手操作**: テーブルセルが小さく、入力フィールドの背景が透明でタップ領域が分かりにくい

#### P4: ハイブリッド型（タブ切り替え・統計表示）
- **構造**: タブバー（横スクロール対応） + 統計カード3列 + 種目情報 + セットカード + インターバルタイマー
- **入力**: セットごとにカードで表示。完了セットとアクティブセットで背景色が変化
- **特徴**: 1画面で1種目に集中。統計（前回/1RM推定/ボリューム）が常に見える。インターバルタイマー内蔵
- **片手操作**: タブ切り替えが上部にあり、親指が届きにくい。統計表示領域が画面を占有

### 3軸評価（各5点満点）

| 評価軸 | P1: Strong風 | P2: Hevy風 | P3: FitNotes風 | P4: ハイブリッド型 |
|-------|:-----------:|:---------:|:-------------:|:---------------:|
| **操作数**（タップ数の少なさ） | 5 | 4 | 5 | 3 |
| **視認性**（暗い環境での見やすさ） | 4 | 5 | 3 | 4 |
| **片手操作**（片手完結度） | 5 | 3 | 4 | 2 |
| **合計** | **14** | **12** | **12** | **9** |

#### 評価の根拠

**操作数**
- P1: 入力欄タップ → 数値入力 → 次の入力欄タップ。種目間の遷移はスクロールのみ。最小タップ数
- P2: P1と同等だが、フローティングラベルの視覚ノイズにより入力欄の認識に0.5秒余分にかかる
- P3: P1と同等の直接入力。折りたたみ済みの種目は1タップで展開が必要だが、表示後の入力は高速
- P4: タブ切り替え（上部タップ）が種目ごとに必要。10種目の場合、横スクロール + タブタップが9回追加

**視認性**
- P1: 白背景 + グレー区切り。コントラストは十分だが種目間の区別がやや弱い
- P2: カード形式により種目の境界が明確。余白がある分、暗い中でも要素の区別がしやすい
- P3: テーブル形式で情報密度が高く、セル間の境界が細い。薄暗い環境では行の判別が困難になりやすい
- P4: カード + 色分けで個々の要素は見やすいが、統計領域が画面を占有しセット入力部分が下に追いやられる

**片手操作**
- P1: 入力欄が画面中央付近。スクロールと入力が同じ手で可能。種目間はスクロールだけで移動
- P2: カード余白が多くスクロール量が増加。10種目の場合、P1の約1.3倍のスクロールが必要
- P3: アコーディオンの開閉で画面内に収まる。ただしテーブルセルが小さくタップ精度が要求される
- P4: タブが画面最上部にあり、片手（特に左手）では親指が届かない。種目切り替えに両手が必要になる場面が多い


## 2. 記録画面の推奨案

### 推奨: P1 Strong風（効率最優先・リスト形式）

#### 推奨理由

**1. 採用済みセット入力画面との整合性が最も高い**

既に採用決定している `set_input_screen.html` を確認すると、以下の構造が確定している:
- stickyヘッダー（ワークアウト名 + 完了ボタン）
- タイマーバー（経過時間表示）
- 種目ブロックを `border-bottom: 6px solid #F1F3F5` で区切るリスト形式
- 各セット行の上にインラインで前回記録をグレー表示
- セット行: SET番号 / kg入力 / "×" / reps入力 / 1RM推定

P1 Strong風は、この採用済み画面と**レイアウト構造がほぼ一致**している。P2〜P4を選ぶと、セット入力画面との一貫性が崩れ、ユーザーに2つの異なるUIパラダイムを学習させることになる。

**2. 引き算のデザイン方針に最も合致**

P1は装飾が最小限（カード枠なし、統計カードなし、タブなし）であり、プロジェクトの「引き算のデザイン」方針に最も忠実。P2はカード余白が過剰、P4は統計+タブ+タイマーで情報過多。

**3. 10種目対応時のスケーラビリティ**

1日3〜10種目、1種目3〜7セットの要件で最もスケーラブル。P2のカード形式は10種目時にスクロール量が膨大になり実用性が低下する。P4のタブ形式は種目数増加時にタブバーが溢れる。

**4. 片手操作性が最高**

ジムでの使用シーンを想定すると、片手操作の優先度は非常に高い。ダンベルを持ちながら、ラック待ちの間に記録する場面で、P1はスクロール + タップだけで完結する。

#### 補足: P1に対する微調整の提案

採用済み `set_input_screen.html` の以下の要素をP1に取り込む:
- 前回記録をセット行の**上にインライン表示**（P3の同一行ではなく、採用済みの候補A方式）
- セット行右端に**1RM推定値**を表示
- 種目名を**青色リンク風**にして種目別履歴ボトムシートへの導線を兼ねる
- デフォルトセット数を**前回のセット数**に合わせる

これらは全て既に決定済みの事項であり、P1の基本構造に自然に統合できる。


## 3. 表示/編集パターン比較

### 検討対象

`view_edit_patterns.html` から4パターン、`strong_view_edit.html` から3パターンを分析した。

#### A. View/Edit完全分離型（view_edit_patterns.html）

| パターン | 展開方法 | 統計表示 | 情報密度 | 編集しやすさ |
|---------|---------|---------|---------|------------|
| 食事記録風 | タップ展開 | ヘッダーサマリー | 4/5 | 4/5 |
| 体重記録風 | カード展開 | カード内 | 3/5 | 5/5 |
| 睡眠記録風 | インライン | ヒーロー統計 | 5/5 | 3/5 |
| 習慣トラッカー風 | アコーディオン | プログレスバー | 4/5 | 4/5 |

#### B. Strong風 View/Edit（strong_view_edit.html）

| パターン | 特徴 | 切り替え方法 | 推奨シーン |
|---------|------|------------|----------|
| View Mode | 完了記録を読み取り専用表示。入力フィールドなし | ヘッダーの「編集」ボタン | トレーニング後の確認・履歴振り返り |
| Edit Mode | 全種目が編集可能。入力フィールド常時表示 | ヘッダーの「編集中」ボタン | ジム内リアルタイム記録・一括修正 |
| Inline Edit | 種目ごとに編集/表示を切り替え | 各種目の「編集」ボタン | 特定種目の修正・途中から記録再開 |

### 各アプローチの比較

| 評価軸 | 常にEdit（記録中） | View/Edit全体切替 | Inline Edit（個別切替） |
|-------|:----------------:|:----------------:|:--------------------:|
| ジム内での使いやすさ | 5 | 2 | 4 |
| 記録後の視認性 | 2 | 5 | 4 |
| 実装コスト | 5（低い） | 3 | 2（高い） |
| 誤操作リスク | 2（高い） | 5（低い） | 4 |
| 学習コスト | 5（低い） | 3 | 3 |


## 4. 表示/編集の推奨案

### 推奨: 「2モード方式」（記録中 = 常にEdit / 記録後 = View + Inline Edit）

#### 方式の概要

| 状態 | モード | 動作 |
|-----|-------|------|
| ワークアウト進行中 | **常にEdit** | 全種目の入力フィールドが表示された状態。セット入力画面（set_input_screen.html）がそのまま使われる |
| ワークアウト完了後 | **View + Inline Edit** | 記録をコンパクトに表示。修正が必要な種目だけタップで編集モードに展開 |

#### 推奨理由

**1. ユースケースに合致したモード分離**

ジム内での記録中に「表示/編集の切り替え」は不要かつ有害。セット間の休憩時間に素早く入力したいのに、編集モードに切り替えるタップが1回追加されるのはストレスになる。

一方、トレーニング後に「80kgを85kgに修正したい」というケースでは、全入力欄が表示されていると見づらく誤操作のリスクが高い。

この2つのシーンは明確に異なるため、モードで分けるのが合理的。

**2. 実装の自然な段階分け**

- Phase 1: 常にEditモード（＝記録画面として `set_input_screen.html` をそのまま使う）
- Phase 2: ワークアウト完了後にViewモードを追加（記録確認・履歴画面として）
- Phase 3: Viewモード内にInline Edit機能を追加（部分修正用）

Phase 1だけで最低限使えるアプリが成立し、段階的に機能追加できる。

**3. 既決事項との矛盾がない**

- 記録中: 採用済みの `set_input_screen.html` がそのまま記録画面になる
- 完了後: Strong風View/Editの「Inline Edit」パターンを応用

#### Viewモードの具体設計（Phase 2）

`strong_view_edit.html` のView Modeを参考に:
- 各セットを `80kg x 10` のようにコンパクトな1行表示
- 完了セットは緑背景（#F0FDF4）で区別
- 種目ブロックの右端に「編集」ボタン（控えめなテキストリンク）
- 種目名タップで種目別履歴ボトムシートを表示（既決事項と統合）


## 5. 既決事項との整合性確認

| 既決事項 | 記録画面（P1 Strong風）との整合 | 表示/編集（2モード方式）との整合 |
|---------|:----------------------------:|:----------------------------:|
| ClickUp風 + v1_lightヘッダー | OK - ホーム画面の方針。記録画面はホームから遷移した先なので直接影響なし | OK |
| フルスクリーンモーダル種目選択 | OK - 「+ 種目を追加」ボタンからモーダルを呼び出す | OK - Viewモードでも種目追加は可能 |
| ボトムシート種目別履歴 | OK - 種目名タップでボトムシート表示 | OK - Viewモードでも同様に種目名タップで呼び出し |
| インライン前回記録表示（候補A） | OK - 各セット行の上にグレーで前回記録を表示。set_input_screen.htmlと同一 | OK - Viewモードでは前回比較は不要（表示する値自体が今回の記録） |
| デフォルトセット数 = 前回のセット数 | OK - 種目追加時に前回セット数分の入力行を自動生成 | OK |
| CSS: border-radius 6px/8px/12px | OK - set_input_screen.htmlで既に準拠（6px/8px/12px使用） | OK - Viewモードでも同じ値を使用 |
| グラデーション禁止 | OK - ベタ塗りのみ | OK |
| カラー: #0066FFより淡い青 | OK - set_input_screen.htmlの種目名で#0066FF使用済み。Viewモードでも同色 | OK |
| 黒文字は濃いグレー | OK - #374151（set_input_screen.html）を踏襲 | OK |

**全ての既決事項と矛盾なし。**


## まとめ

| 項目 | 推奨 | 根拠 |
|-----|------|------|
| 記録画面 | **P1: Strong風**（効率最優先・リスト形式） | 採用済みセット入力画面との整合性、引き算デザイン、片手操作性、10種目スケーラビリティ |
| 表示/編集 | **2モード方式**（記録中=常にEdit / 記録後=View+Inline Edit） | ユースケース分離の合理性、段階的実装可能、既決事項との完全互換 |
