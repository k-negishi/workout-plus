# Workout+ 全画面インベントリ＋状態パターン提案書

> **フェーズ**: Phase 0 設計
> **目的**: 全画面の洗い出し + 未作成画面のMVP要否判断 + 状態パターンの概念設計
> **最終更新**: 2026-02-17

---

## 1. 全画面インベントリ

### 1.1 WF済み画面（adopted配下で確定済み）

| # | 画面名 | MVP必要性 | 対応US | WFファイル | 備考 |
|---|--------|-----------|--------|-----------|------|
| 1 | ホーム/ダッシュボード | **Must** | US09, US06 | `home_design_clickup_header_v1_light.html` | ClickUp風+v1_light採用済。ストリーク・週間サマリー・最近のワークアウト |
| 2 | ワークアウト記録（セット入力） | **Must** | US01, US02, US04 | `set_input_screen.html` | 前回記録インライン表示、セット数=前回踏襲 |
| 3 | 種目選択（フルスクリーンモーダル） | **Must** | US01 | `exercise_picker_fullscreen.html` | 検索+カテゴリタブ+お気に入り+複数選択 |
| 4 | 種目別履歴（ボトムシート→フルスクリーン） | **Must** | US08 | `exercise_history_demo.html` | 統計サマリー+重量推移グラフ+履歴リスト |
| 5 | カレンダー | **Must** | US06 | `workout_plus_wireframes.html` (calendar) | 月表示+日付タップで詳細+ストリーク |
| 6 | 統計 | **Must** | US07, US08, US09 | `workout_plus_wireframes.html` (stats) | ボリューム推移+筋群分布+1RM推定 |
| 7 | AIチャット | Should | US16, US17 | `workout_plus_wireframes.html` (ai_chat) | チャットUI+クイックアクション |
| 8 | 設定トップ | **Must** | US10, US11, US04 | `workout_plus_wireframes.html` (settings) | データ管理+アプリ設定+アカウント |
| 9 | ペイウォール | 将来 | US14, US15 | `workout_plus_wireframes.html` (paywall) | Pro訴求+月額/年額選択 |

### 1.2 WF未作成だが「確実に必要」とtasklist.mdで判断済み

| # | 画面名 | MVP必要性 | 対応US | 根拠 |
|---|--------|-----------|--------|------|
| 10 | ワークアウト完了/サマリー | **Must** | US01 | 記録フローの終端。完了感の演出が継続利用に直結 |
| 11 | 設定サブ画面: バックアップ | **Must** | US11 | iCloud/GDriveバックアップはMVP Must機能 |
| 12 | 設定サブ画面: タイマー設定 | **Must** | US04 | デフォルトインターバル秒数のカスタマイズ |
| 13 | 設定サブ画面: 単位設定 | **Must** | - | kg/lb切替は国際展開の基本。MVP段階でも最低限必要 |

---

## 2. 未作成画面のMVP要否判断

### 2.1 オンボーディング（初回起動）

| 評価軸 | 判定 |
|--------|------|
| **推奨度** | No（MVPでは不要） |
| **根拠** | |

- MVP設計は「ログインなしでローカル利用可」(US13)。初回起動時にCognitoログインフローは不要
- 記録アプリは「使えばわかる」タイプで、チュートリアルよりも実際に記録させる方が定着率が高い
- MVPスコープは「最小で出して早期フィードバック」方針。オンボーディング設計に時間をかけるのは過剰
- **代替案**: ホーム画面の空状態（後述）を充実させれば、初回の行動誘導は十分カバーできる

### 2.2 プロフィール/アカウント

| 評価軸 | 判定 |
|--------|------|
| **推奨度** | No（MVPでは不要。設定画面内に最低限の情報表示で代替） |
| **根拠** | |

- MVPはログインなし(US13のローカル利用)。アカウント管理画面の対象機能がない
- ユーザー名表示は設定トップのヘッダー部分に含まれている（WF済み）
- Phase 2でCognito認証を入れる段階で、ログイン/プロフィール画面を追加すればよい
- **代替案**: 設定トップ画面のユーザーカード部分をタップしたときの名前編集ダイアログ程度で十分

### 2.3 種目詳細（やり方説明）

| 評価軸 | 判定 |
|--------|------|
| **推奨度** | No（MVPでは不要） |
| **根拠** | |

- 企画書のMVPスコープマトリクスに含まれていない。ペルソナ「初心者タロウ」のニーズだが、Must USには該当しない
- 種目マスタ300件に対して全種目の説明テキスト・動画を用意するのはコンテンツ作成コストが大きい
- 既存の筋トレ系アプリ（Strong, Hevy）もMVP段階では種目説明を省いていることが多い
- **代替案**: 種目選択画面のバッジ（筋群・器具タイプ）で最低限の情報は提供済み。AIチャット（Should）で個別に質問する導線も将来的に用意できる

### 2.4 検索画面

| 評価軸 | 判定 |
|--------|------|
| **推奨度** | No（独立画面は不要。種目選択モーダル内の検索で代替済み） |
| **根拠** | |

- 種目選択フルスクリーンモーダル（adopted）に検索バー+カテゴリタブが既に内包されている
- ワークアウト履歴の検索需要はMVP段階では低い（カレンダーの日付タップで十分）
- アプリ全体のグローバル検索は機能が増えてから（Phase 3以降）で検討すべき

### 2.5 追加で検討すべき画面

以下はtasklist.mdのリストに明示されていないが、企画書とWFの分析から必要と判断した画面。

| # | 画面名 | MVP必要性 | 対応US | 根拠 |
|---|--------|-----------|--------|------|
| 14 | ワークアウト詳細（閲覧モード） | **Must** | US01, US06 | カレンダー日付タップ / ホームの最近のトレーニングタップ先。記録画面とは別のRead Only表示。view_edit_patterns.htmlで候補あるが未採用 |
| 15 | ワークアウト編集（編集モード） | **Must** | US01 | 過去記録の修正。View→Editの遷移パターンは tasklist.mdタスク3の検討範囲 |
| 16 | 記録破棄確認（ダイアログ） | **Must** | US01 | ワークアウト記録中に「戻る」or破棄時のデータ損失防止 |
| 17 | メモ入力（インライン/ダイアログ） | **Must** | US02 | セット個別メモ+ワークアウト全体メモの入力UI |

---

## 3. 状態パターン一覧

### 3.1 状態パターン定義

全画面を横断する4つの主要状態カテゴリを定義。

| 状態カテゴリ | 説明 | 表現方針 |
|-------------|------|---------|
| **Empty（空状態）** | データがゼロ、または表示に必要な量に達していない | 行動を促すCTA + 簡潔なメッセージ。イラスト・アイコンは最小限 |
| **Active（記録中グローバル状態）** | ワークアウトが進行中で、他画面に遷移した場合 | 常に目に入るインジケーターで記録中を想起させ、ワンタップで戻れる |
| **Success（完了/成功）** | ワークアウト完了、PR更新、ストリーク更新など | シンプルな達成感。過剰な演出はしない |
| **Error（エラー/警告）** | バックアップ失敗、AI応答エラー、ネットワーク不通など | スナックバー（トースト）を基本とし、致命的なもののみダイアログ |

### 3.2 画面 x 状態マトリクス

凡例: `-` = 該当なし / `E` = Empty / `A` = Active / `S` = Success / `R` = Error

| 画面 | Empty | Active（記録中） | Success | Error |
|------|-------|----------------|---------|-------|
| **ホーム** | E1: 初回起動（記録ゼロ） | A1: フローティングバー表示 | S1: ストリーク更新通知 | - |
| **記録（セット入力）** | E2: 種目未追加 | - (この画面自体がActive) | S2: セット完了チェック | R1: 入力値不正 |
| **種目選択** | E3: お気に入り未登録 | - | - | E4: 検索結果ゼロ |
| **種目別履歴** | E5: 履歴ゼロの種目 | - | S3: PR更新バッジ | - |
| **カレンダー** | E6: 記録ゼロ月 | A1: フローティングバー表示 | - | - |
| **統計** | E7: データ不足（グラフ表示不可） | A1: フローティングバー表示 | S4: 前週比UP表示 | - |
| **AIチャット** | E8: 会話履歴なし | A1: フローティングバー表示 | - | R2: AI応答エラー |
| **設定** | - | A1: フローティングバー表示 | S5: バックアップ完了 | R3: バックアップ失敗 |
| **完了サマリー** | - | - | S6: ワークアウト完了 | - |
| **ワークアウト詳細** | - | - | - | - |
| **記録破棄確認** | - | - | - | - |

### 3.3 各状態パターンの詳細

#### Empty（空状態）

| ID | 画面 | 状態 | 表示方針 |
|----|------|------|---------|
| **E1** | ホーム（初回起動） | 記録がゼロ件 | ストリーク=0日表示、週間サマリー=全項目0、「最近のワークアウト」エリアに「最初のワークアウトを記録しよう」テキスト + [+記録]ボタン強調。ダミーデータは見せない |
| **E2** | 記録画面 | 種目未追加 | 「+ 種目を追加」ボタンのみ表示。テキストで「種目を追加してワークアウトを始めましょう」程度 |
| **E3** | 種目選択 | お気に入りゼロ | お気に入りセクションを非表示にし、カテゴリ別リストのみ表示。空セクションは出さない |
| **E4** | 種目選択 | 検索結果ゼロ | 「該当する種目が見つかりません」+ カスタム種目作成の導線（将来） |
| **E5** | 種目別履歴 | 選択種目の履歴ゼロ | 統計サマリー=全項目「-」、グラフ非表示、「この種目の記録はまだありません」テキスト |
| **E6** | カレンダー | 表示月に記録なし | カレンダーグリッドのみ表示（ドットなし）。日付タップで下部エリアに「この日の記録はありません」テキスト |
| **E7** | 統計 | データ不足 | グラフ表示に必要な最低データ量（例: 2回以上）に達していない場合「もう少しデータが集まるとグラフが表示されます」テキスト + プログレスインジケーター（例:「あと3回記録すると表示」） |
| **E8** | AIチャット | 会話履歴なし | AI側から最初の挨拶メッセージ1件を自動表示 + クイックアクションボタンを目立たせる |

#### Active（記録中グローバル状態）

ワークアウト記録中に他タブへ移動した場合の表示。ユーザーが記録中であることを忘れず、かつ邪魔にならないこと。

| 要素 | 方針 |
|------|------|
| **フローティングバー** | タブバーの直上に幅100%のバーを表示。高さ44px程度。背景色=#0066FF（メインカラー）or薄い青 |
| **表示内容** | 経過時間（タイマー）+ 種目名（現在の種目）+ 「戻る」テキストリンク |
| **タップ動作** | バー全体がタップ領域。タップで記録画面に戻る |
| **非表示条件** | 記録画面自体を表示中は非表示 |
| **記録破棄の導線** | フローティングバーの長押し or 記録画面の「...」メニューから「ワークアウトを破棄」→ 確認ダイアログ |

#### Success（完了/成功）

| ID | 場面 | 演出方針 |
|----|------|---------|
| **S1** | ストリーク更新 | ホーム画面のストリークカード内で数字をインクリメント表示。過剰なアニメーションはしない。連続記録が途切れた場合はストリークを0にリセット（特別な演出なし） |
| **S2** | セット完了チェック | セット行の背景色が完了色（薄緑）に変化。チェックマークアイコン表示。トーストなし（毎セット出すとうるさい） |
| **S3** | PR（自己ベスト）更新 | 種目別履歴のボトムシート/フルスクリーンで「PR」バッジを日付横に表示。記録完了サマリーにもPR一覧を含める |
| **S4** | 前週比UP | 統計画面の各数値横に緑色の「+12%」等のバッジ。下がった場合はグレーの「-5%」等（赤は使わない。ネガティブ演出を避ける） |
| **S5** | バックアップ完了 | 設定画面の「バックアップ」行のサブテキストを「最終: 日時」に更新 + スナックバー（画面下部、3秒で自動消去）で「バックアップが完了しました」 |
| **S6** | ワークアウト完了 | 完了サマリー画面を表示。表示内容: 所要時間 / 総ボリューム / 種目数 / セット数 / PR更新（ある場合）。シンプルに数値を並べる。過剰な祝福演出（紙吹雪等）はしない。ストリーク更新もここに含める |

#### Error（エラー/警告）

| ID | 場面 | 表示方針 |
|----|------|---------|
| **R1** | 入力値不正 | セット入力で負の値・極端な値が入った場合。入力フィールドのボーダーを赤に変化。スナックバーで「有効な値を入力してください」 |
| **R2** | AI応答エラー | チャット画面のAIメッセージ位置にエラーメッセージを表示「応答の取得に失敗しました。もう一度お試しください」+ リトライボタン |
| **R3** | バックアップ失敗 | 設定画面でスナックバー「バックアップに失敗しました」+ リトライリンク。ダイアログは使わない（致命的ではないため） |
| **R4** | ネットワーク不通 | ローカルファーストなのでほとんどの機能は影響なし。クラウド同期（将来）やAIチャット利用時のみ、画面上部に細いバナー「オフラインです。データはローカルに保存されます」 |

---

## 4. 提案まとめ

### 4.1 全画面リスト（最終）

MVP必須画面は **14画面**（うちWF済み8、未作成6）。

| 区分 | 画面数 | 画面名 |
|------|--------|--------|
| **WF済み・MVP Must** | 8 | ホーム, 記録(セット入力), 種目選択, 種目別履歴, カレンダー, 統計, 設定トップ, ワークアウト詳細(※View/EditのWFは候補あり未採用) |
| **未作成・MVP Must** | 6 | ワークアウト完了サマリー, ワークアウト編集, 設定>バックアップ, 設定>タイマー, 設定>単位, 記録破棄確認ダイアログ |
| **WF済み・Should** | 1 | AIチャット |
| **WF済み・将来** | 1 | ペイウォール |
| **不要（MVPでは作らない）** | 4 | オンボーディング, プロフィール/アカウント, 種目詳細, 検索画面 |

### 4.2 未作成6画面のWF作成優先度

| 優先度 | 画面 | 理由 |
|--------|------|------|
| 1 | ワークアウト完了サマリー | 記録フローの終端で必須。他画面との連携（ストリーク更新、PR通知）もここで設計 |
| 2 | ワークアウト詳細（閲覧）+ 編集 | カレンダー/ホームからの遷移先。View/Editの分離パターンの決定が必要 |
| 3 | 設定サブ画面（バックアップ/タイマー/単位） | Must USに対応するが、UIは定型的（iOSの設定画面パターン）で設計コスト低 |
| 4 | 記録破棄確認ダイアログ | シンプルなダイアログ。WFというよりコピー確定レベル |

### 4.3 状態パターンに関する方針

1. **空状態の設計を最優先で行う**: 初回起動のホーム画面がユーザーの第一印象を決める。ダミーデータではなく、行動を促すCTAを中心に設計する
2. **フローティングバー（記録中インジケーター）は早期に設計**: タブバーとの共存、全画面に影響するグローバルな要素のため、画面遷移フロー（タスク4）と合わせて設計する
3. **演出は引き算**: ワークアウト完了時の紙吹雪やド派手なアニメーションは入れない。数値の明確な表示とシンプルなバッジで達成感を出す
4. **エラーはスナックバー基本**: ダイアログを使うのは「記録破棄確認」のようなデータ損失リスクがある場合のみ
