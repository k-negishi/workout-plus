# Feature Specification: ワークアウト登録画面デザイン変更

**Feature Branch**: `20260222-登録画面デザイン変更`
**Created**: 2026-02-22
**Status**: Draft
**Input**: GitHub Issue #119 - 登録画面デザイン変更

## 概要

ワークアウト登録画面（種目ごとのセット入力画面）のUIデザインを改善する。現状、前回記録の表示が冗長で視認性が低く、操作性に課題がある。本機能では、情報の集約・整理、不要な視覚ノイズの除去、欠けている操作（削除・コピー）の追加を行い、使いやすい登録体験を提供する。

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 前回記録の統合表示とコピー機能 (Priority: P1)

ユーザーが種目を選択して登録画面を開いたとき、前回のセット記録が右上のサマリーエリア（「前回: 3セット」表示箇所）に集約されて表示される。各入力行には個別の前回記録（例: 50kg×10）は表示されない。また、右上サマリーエリアにはワイヤーフレームに従ったコピーボタンが設置され、タップすると前回のセット内容が現在の入力欄に一括コピーされる。

**Why this priority**: 前回記録の重複表示は画面を狭くし視認性を下げる最大の課題。コピー機能はユーザーが同じメニューを繰り返すときの入力工数を大幅に削減する。

**Independent Test**: 前回記録がある種目の登録画面を開き、右上サマリーにのみ前回記録が表示されること、各行には前回記録が表示されないこと、コピーボタンタップで前回セット内容が入力欄に反映されることを確認する。

**Acceptance Scenarios**:

1. **Given** 前回記録が3セット存在する種目の登録画面を開いた状態、**When** 画面を確認する、**Then** 右上に「前回: 3セット（例: 50kg×10、60kg×8、60kg×8）」のようなサマリーが表示され、各セット行には前回記録が表示されない
2. **Given** 上記の状態、**When** 右上サマリーのコピーボタンをタップする、**Then** 前回の3セット分の重量・回数が現在の入力欄に一括でコピーされる
3. **Given** 前回記録が存在しない種目の登録画面を開いた状態、**When** 画面を確認する、**Then** 前回サマリーエリアは非表示またはグレーアウト表示となり、コピーボタンは無効または非表示になる

---

### User Story 2 - プレースホルダーの削除とセット番号デザイン改善 (Priority: P2)

ユーザーが各セット行を確認したとき、重量・回数入力欄にはプレースホルダーテキスト（「kg」「reps」など）が表示されない。代わりに入力欄は空白で、未入力であることが視覚的に明確である。また、セット番号（①②③ などの丸数字）のデザインが入力欄と明確に区別でき、どれがセット番号でどれが入力欄かが一目でわかる。

**Why this priority**: プレースホルダーが入力済みに見えるというUX上の混乱を排除し、基本的な入力体験を正常化する。

**Independent Test**: 登録画面を開き、すべての入力欄が空白状態であることを確認し、セット番号が入力欄と視覚的に区別できることを確認する。

**Acceptance Scenarios**:

1. **Given** 登録画面を開いた初期状態、**When** 重量・回数入力欄を確認する、**Then** 「kg」「reps」などのプレースホルダーテキストは表示されず、入力欄は空白である
2. **Given** 登録画面を開いた初期状態、**When** セット番号と入力欄を見比べる、**Then** セット番号（番号標識）が入力欄のスタイルと明確に異なり、誤認なく識別できる

---

### User Story 3 - 種目削除ボタンとデフォルトセット表示 (Priority: P2)

ユーザーが登録画面で誤って種目を追加した場合、または種目をやめたい場合に、種目を削除するボタンが存在する。また、登録画面を開いたとき、デフォルトで3セット分の入力欄が表示されている（前回記録のセット数ではなく、最低3セットを保証）。

**Why this priority**: 種目削除は誤操作訂正に必須の操作であり、デフォルト3セットはユーザーが即座に入力を開始できる利便性に直結する。

**Independent Test**: 誤って追加した種目の削除ボタンをタップして種目が消えることを確認。また、新規種目追加時に3セット分の入力欄が表示されることを確認。

**Acceptance Scenarios**:

1. **Given** ワークアウト登録画面に種目が1つ以上表示されている、**When** 種目削除ボタンをタップする、**Then** 確認ダイアログなしまたは確認後、その種目が登録リストから削除される
2. **Given** 新しい種目を追加した直後、**When** 登録画面を確認する、**Then** デフォルトで3セット分の入力欄が表示されている
3. **Given** 前回記録が2セットしかない種目を追加した、**When** 登録画面を確認する、**Then** 最低3セット分の入力欄が表示される（前回が2セットでも3セット表示）

---

### User Story 4 - セット行間の統一 (Priority: P3)

前回記録サマリーエリアの表示・非表示に関わらず、各セット行の間隔（行間）が統一されている。

**Why this priority**: 視覚的な一貫性を保つための改善で、機能的な影響は小さいが、デザイン品質に直結する。

**Independent Test**: 前回記録があるとき・ないときの両方で登録画面を開き、セット行間が同一であることを目視確認する。

**Acceptance Scenarios**:

1. **Given** 前回記録が存在する種目の登録画面、**When** 画面を確認する、**Then** 各セット行の上下マージン・パディングが一定値である
2. **Given** 前回記録が存在しない種目（新規）の登録画面、**When** 画面を確認する、**Then** 各セット行の上下マージン・パディングが前回記録ありの場合と同一値である

---

### Edge Cases

- 前回記録が0セットまたは存在しない場合、コピーボタンは無効またはグレーアウト表示となり、タップしても何も起きない
- 種目が1つしかない状態で種目削除ボタンをタップした場合、登録画面がどのような状態になるか（空の画面 or 前画面に戻る）は、ワイヤーフレームの挙動に従う
- セット数が多い（10セット以上）場合でも、行間・セット番号デザインは一貫して適用される
- コピーボタンで貼り付けた後にユーザーが手動で値を変更した場合、変更は正常に保持される

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: 登録画面の各セット行に表示されていた個別の前回記録（重量×回数）を削除し、右上の前回サマリーエリアに統合して表示しなければならない
- **FR-002**: 右上の前回サマリーエリアに、ワイヤーフレームに準拠したコピーボタンを設置しなければならない
- **FR-003**: コピーボタンをタップすると、前回セットの重量・回数が現在の入力欄に一括コピーされなければならない
- **FR-004**: 重量・回数の入力欄にプレースホルダーテキスト（「kg」「reps」等）を表示してはならない
- **FR-005**: 種目を削除するボタンを登録画面に設置しなければならない
- **FR-006**: 各セット行の行間は、前回サマリーエリアの表示・非表示に関わらず一定でなければならない
- **FR-007**: セット番号の表示スタイルは、入力欄と視覚的に明確に区別できるデザインでなければならない
- **FR-008**: 登録画面を開いたとき、デフォルトで3セット分の入力欄が表示されなければならない
- **FR-009**: 前回記録が存在しない場合、コピーボタンは無効または非表示にしなければならない

### Key Entities

- **セット（Set）**: 1種目の1回の試行。重量（kg）と回数（reps）を属性として持つ
- **前回記録サマリー**: 前回ワークアウトの同種目・全セットをまとめた表示。セット数と各セットの重量×回数を含む
- **種目（Exercise）**: ワークアウト内の1つのトレーニング項目。削除可能な単位

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 登録画面を開いてからセット入力を開始するまでの操作ステップが、改善前と比べて同等以下を維持しつつ、前回記録のコピーは1タップで完了する
- **SC-002**: 全セット入力欄が空白状態（プレースホルダーなし）で表示され、未入力状態と入力済み状態の区別がユーザーの100%に伝わる
- **SC-003**: 種目の削除操作が最大2タップ（削除ボタン + 確認 or 1タップのみ）で完了する
- **SC-004**: セット行間の目視検証で、前回記録あり・なしの両ケースで行間の差異が0pxである
- **SC-005**: 登録画面を初めて開いたユーザーが、セット番号と入力欄を混同することなく識別できる（デザインレビューで確認）

## Assumptions / 前提条件

- ワイヤーフレーム（`/Users/Kei/Development/projects/workout-plus/requirements/adopted/workout_plus_wireframes_v5_md3.html`）の登録画面セクションが、コピーボタンの配置・デザインの基準となる
- 種目削除の確認ダイアログの要否はワイヤーフレームの設計に従う（指定がない場合はダイアログなしでも可）
- デフォルト3セットは、前回記録のセット数が3未満の場合に補完する（3セット以上あれば前回のセット数を上限として表示）
- コピーボタンのアイコン・ラベルデザインはワイヤーフレームに準拠する
- 前回記録の「各行から消す」は、セット行内のグレー表示されていた前回の数値テキストを削除することを意味する
