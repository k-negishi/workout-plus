# Feature Specification: ワークアウト記録コア画面

**Feature Branch**: `001-workout-core-screens`
**Created**: 2026-02-21
**Status**: Draft
**Input**: ワイヤーフレーム（v5 MD3）に基づくMVPコア画面9画面の実装仕様

## 対象画面

| # | 画面名 | 画面ID | 種別 |
|---|--------|--------|------|
| 1 | ホーム | home | タブ画面 |
| 2 | 記録 | record | フルスクリーン |
| 3 | 種目選択 | picker | フルスクリーンモーダル |
| 4 | 種目履歴 | history-full | フルスクリーン |
| 5 | カレンダー | calendar | タブ画面 |
| 6 | 完了サマリ | summary | フルスクリーン |
| 7 | 詳細（閲覧） | workout-detail | フルスクリーン |
| 8 | 詳細（編集） | workout-edit | フルスクリーン |
| 9 | 破棄確認 | discard-dialog | ダイアログ |

## User Scenarios & Testing

### User Story 1 - ワークアウトの記録 (Priority: P1)

ユーザーがジムで筋トレを行いながら、種目・重量・レップ数をリアルタイムで記録する。前回の記録を参照・コピーしながら効率的にセットを入力し、完了後にサマリーで振り返る。

**Why this priority**: アプリの存在意義であるコア機能。これがなければ他の機能に価値がない。

**Independent Test**: ホーム画面の「+」ボタンから新規ワークアウトを開始し、種目を追加、セットを入力、完了してサマリーを確認するまでの一連の流れで検証可能。

**Acceptance Scenarios**:

1. **Given** ホーム画面を表示中, **When** 下部タブバーの「+」ボタンをタップ, **Then** 記録画面が表示される（タイマーは未開始状態）
1a. **Given** 記録画面でタイマーが未開始, **When** タイマーの開始ボタンをタップ, **Then** 経過時間タイマーが開始される
2. **Given** 記録画面を表示中（種目なし）, **When** 「種目を追加」ボタンをタップ, **Then** 種目選択モーダルが表示される
3. **Given** 種目選択モーダルを表示中, **When** 種目をタップ, **Then** 記録画面に戻り、選択した種目が追加される。デフォルトセット数は前回のワークアウト時のセット数と同じ
4. **Given** 記録画面で種目が追加されている, **When** セット行の重量・レップ入力欄に値を入力, **Then** 推定1RM が自動計算されセット行の右側に表示される
5. **Given** セット行の上に前回記録が表示されている, **When** 前回記録行のコピーボタン（クリップボードアイコン）をタップ, **Then** そのセットの入力欄に前回の重量・レップ数が自動入力される
6. **Given** 種目ヘッダーの「前回: Nセット (日付)」バッジをタップ, **When** タップする, **Then** 前回の全セット記録が各セット行に一括コピーされる
7. **Given** 1つ以上のセットに値を入力済み, **When** 「完了」ボタンをタップ, **Then** 完了サマリー画面が表示される
8. **Given** 完了サマリー画面を表示中, **When** 「ホームに戻る」ボタンをタップ, **Then** ホーム画面に遷移し、完了したワークアウトが「最近のワークアウト」リストに表示される

---

### User Story 2 - 過去のワークアウト閲覧・編集 (Priority: P2)

ユーザーがホーム画面やカレンダーから過去のワークアウトを閲覧し、必要に応じて記録を修正する。

**Why this priority**: 記録の確認・修正はデータの信頼性を保つ上で必須。記録機能に次いで重要。

**Independent Test**: ホーム画面の「最近のワークアウト」カードをタップし、詳細を確認、編集モードで値を変更して保存するまでの流れで検証可能。

**Acceptance Scenarios**:

1. **Given** ホーム画面を表示中, **When** 「最近のワークアウト」のカードをタップ, **Then** ワークアウト詳細（閲覧）画面に遷移し、種目・セット・ボリュームなどの記録が表示される
2. **Given** ワークアウト詳細（閲覧）画面を表示中, **When** 「編集」ボタンをタップ, **Then** 編集画面に切り替わり、各セットの重量・レップ数が編集可能になる
3. **Given** 編集画面で値を変更済み, **When** 「保存」ボタンをタップ, **Then** 変更が保存され、詳細（閲覧）画面に戻り更新された値が反映される
4. **Given** 編集画面で値を変更済み, **When** 「キャンセル」ボタンをタップ, **Then** 破棄確認ダイアログが表示される
5. **Given** 破棄確認ダイアログを表示中, **When** 「破棄する」をタップ, **Then** 変更が破棄され、遷移元の画面に戻る（スタックベースナビゲーション）
6. **Given** 破棄確認ダイアログを表示中, **When** 「続ける」をタップ, **Then** 編集画面に戻り、変更内容は保持される

---

### User Story 3 - カレンダーでの履歴確認 (Priority: P3)

ユーザーがカレンダーから日付を指定して過去のワークアウトを確認し、トレーニング頻度を視覚的に把握する。

**Why this priority**: トレーニング頻度の可視化はモチベーション維持に重要だが、P1/P2の機能が先に必要。

**Independent Test**: カレンダー画面を開き、トレーニング日をタップして詳細を確認する流れで検証可能。

**Acceptance Scenarios**:

1. **Given** ホーム画面を表示中, **When** 「すべて表示」リンクをタップ, **Then** カレンダー画面に遷移する
2. **Given** カレンダー画面を表示中, **Then** トレーニングを行った日にドットマーカーが表示される
3. **Given** カレンダー画面を表示中, **When** トレーニング済みの日付をタップ, **Then** その日のワークアウトサマリー（所要時間、総ボリューム、種目数、セット数）と種目別のセット詳細がカレンダー下部に表示される
4. **Given** カレンダー下部にワークアウトサマリーが表示されている, **When** サマリーをタップ, **Then** ワークアウト詳細（閲覧）画面に遷移する
5. **Given** カレンダー画面を表示中, **When** 前月・次月ボタンをタップ, **Then** 表示月が切り替わる

---

### User Story 4 - 種目別の履歴・統計確認 (Priority: P3)

ユーザーが特定の種目について、過去のパフォーマンス推移やPR（自己ベスト）を確認する。

**Why this priority**: 進捗の可視化はモチベーションに寄与するが、記録・閲覧機能が先に必要。

**Independent Test**: 記録画面で種目名をタップし、種目別履歴画面でチャートとPRを確認する流れで検証可能。

**Acceptance Scenarios**:

1. **Given** 記録画面を表示中, **When** 種目名（例: ベンチプレス）をタップ, **Then** その種目の履歴画面（フルスクリーン）が表示される
2. **Given** 種目履歴画面を表示中, **Then** 統計サマリー（最大重量、最大ボリューム、平均重量、総トレ回数、総ボリューム、最終PR）が表示される
3. **Given** 種目履歴画面を表示中, **Then** 過去3ヶ月の重量推移チャート（週平均）が表示される
4. **Given** 種目履歴画面を表示中, **Then** PR履歴（最大重量1RM推定、最大ボリューム、最大レップス）がリスト表示される
5. **Given** 種目履歴画面を表示中, **Then** 全履歴が日付降順でリスト表示される（各エントリにセット詳細を含む）
6. **Given** 種目履歴画面を表示中, **When** 「戻る」ボタンをタップ, **Then** 記録画面に戻る

---

### User Story 5 - 種目の選択と管理 (Priority: P2)

ユーザーが記録時にプリセットやカスタム種目から選択し、お気に入り管理やカスタム種目の作成・編集を行う。

**Why this priority**: 記録機能に直結する必須のサポート機能。

**Independent Test**: 種目選択モーダルでプリセット種目の選択、お気に入り切り替え、カスタム種目の作成を行い、記録画面に反映される流れで検証可能。

**Acceptance Scenarios**:

1. **Given** 種目選択モーダルを表示中, **Then** お気に入り・マイ種目・カテゴリ別の3セクションで種目が表示される
2. **Given** 種目選択モーダルを表示中, **When** カテゴリタブ（胸、背中、脚など）をタップ, **Then** そのカテゴリの種目のみに絞り込まれる
3. **Given** 種目選択モーダルを表示中, **When** 検索バーにテキスト入力, **Then** 種目名でリアルタイムフィルタリングされる
4. **Given** 種目選択モーダルを表示中, **When** 種目の★ボタンをタップ, **Then** お気に入りの追加/解除が切り替わる
5. **Given** 種目選択モーダルを表示中, **When** 「複数選択」トグルをタップ, **Then** 複数選択モードに切り替わり、チェックボックスが表示される
6. **Given** 複数選択モード中, **When** 複数種目を選択して「N種目を追加」ボタンをタップ, **Then** 選択した全種目が記録画面に追加される
7. **Given** 種目選択モーダルを表示中, **When** 「カスタム種目を作成」をタップ, **Then** インラインフォーム（種目名、部位チップ選択、器具チップ選択）が展開される
8. **Given** カスタム種目作成フォームで全項目入力済み, **When** 「追加する」ボタンをタップ, **Then** マイ種目セクションに追加される
9. **Given** マイ種目セクションを表示中, **When** カスタム種目の編集ボタン（ペンアイコン）をタップ, **Then** その種目の名前・部位・器具を編集できる

---

### User Story 6 - ワークアウト記録中の操作 (Priority: P2)

ユーザーが記録中にセットの追加・削除、タイマーの操作、メモの入力など細かな操作を行う。

**Why this priority**: 記録中のUXを左右する重要な操作群。

**Independent Test**: 記録画面でセット追加/削除、タイマー停止/再開、メモ入力を行う流れで検証可能。

**Acceptance Scenarios**:

1. **Given** 記録画面で種目が表示されている, **When** 「+ セットを追加」ボタンをタップ, **Then** その種目の末尾に新しいセット行が追加される
2. **Given** 記録画面でセットが2つ以上ある, **When** セット行の「×」（削除）ボタンをタップ, **Then** そのセット行が削除され、セット番号が振り直される
3. **Given** 記録画面でタイマーが動作中, **When** 再生/一時停止ボタンをタップ, **Then** タイマーが一時停止し「一時停止中」ラベルが表示される
4. **Given** タイマーが一時停止中, **When** 再生ボタンをタップ, **Then** タイマーが再開し「一時停止中」ラベルが非表示になる
5. **Given** 記録画面を表示中, **When** 種目のメモ入力欄にテキストを入力, **Then** その種目にメモが保存される
6. **Given** 記録画面を表示中, **When** ワークアウトメモ欄にテキストを入力, **Then** ワークアウト全体のメモが保存される

---

### User Story 7 - ホーム画面でのダッシュボード確認 (Priority: P3)

ユーザーがアプリ起動時にトレーニング状況の概要を一目で把握する。

**Why this priority**: ユーザー体験の入り口として重要だが、データが存在して初めて意味を持つ。

**Independent Test**: ホーム画面を表示し、ストリークカード、週間目標、最近のワークアウト、クイック統計が正しく表示されることを検証。

**Acceptance Scenarios**:

1. **Given** アプリを起動, **Then** ホーム画面が表示され、挨拶メッセージとユーザーアバターがヘッダーに表示される
2. **Given** ホーム画面を表示中, **Then** 今月のトレーニング日数がストリークカードに表示される
3. **Given** ホーム画面を表示中, **Then** 週間カレンダー（月〜日）でトレーニング済み日にチェックマーク、未実施日に空の丸が表示される
4. **Given** ホーム画面を表示中, **Then** 今週の目標セクションに「ワークアウト数」「総負荷量」「達成率」と進捗バーが表示される
5. **Given** ホーム画面を表示中, **Then** 最近のワークアウトが最大3件、日時・種目数・ボリューム・時間・ハイライト付きで表示される
6. **Given** ホーム画面を表示中, **Then** クイック統計ウィジェット（今月の目標、次回予定、月間記録、総負荷量）が2x2グリッドで表示される
7. **Given** ホーム画面を表示中, **When** ユーザーアバターをタップ, **Then** 設定画面に遷移する

---

### Edge Cases

- 種目が0件の状態で「完了」ボタンを押した場合 → 「完了」ボタンを無効化（種目が1つ以上あるときのみ有効）
- セットの重量・レップ数が未入力のまま完了した場合 → 未入力セットは保存せず、入力済みセットのみ保存する
- 前回記録が存在しない種目の場合 → 「前回: N セット」バッジを非表示にし、コピーボタンも非表示
- 記録中にアプリがバックグラウンドに移行した場合 → タイマーを継続し、復帰時に経過時間を正しく表示
- カレンダーで月を大きく遡った場合 → データがない月はドットマーカーなしで表示
- 種目検索で結果が0件の場合 → 「該当する種目がありません」メッセージを表示
- カスタム種目の名前が既存種目と重複する場合 → 作成を許可するが、リスト上で区別可能にする（「カスタム」ラベル）
- 編集画面で全セットを削除した場合 → その種目は即時削除扱い（UI上から消える）。保存時に0セットの種目レコードは作成しない
- 記録中にタブバーで別画面に遷移した場合 → 種目が1件以上ある場合のみ下書き保存して遷移可能。戻ったら続きから再開。種目0件の場合は下書き保存せず、復帰時は新規状態
- 記録中（recording）のワークアウトが存在する状態で「+」をタップした場合 → 進行中の記録画面を復帰表示する（新規開始ではない）。新規開始するには既存を破棄する必要がある
- ワークアウト記録が0件のとき（初回起動時） → 空状態メッセージ（「最初のワークアウトを記録しましょう」）と「+」ボタンへの誘導を表示
- カレンダーでワークアウトなし日をタップした場合 → 「この日のワークアウトはありません」を表示。未来日はタップ無反応
- 種目選択ピッカーの空セクション → お気に入り・マイ種目は1件以上ある場合のみセクション表示。0件時はセクション非表示
- 保存・削除操作が失敗した場合 → 画面下部に非破壊的なエラートーストを表示。入力内容は保持
- タイマー未開始のまま完了した場合 → 所要時間はnull保存。サマリー・詳細画面では「--」と表示

## Requirements

### Functional Requirements

**記録フロー**

- **FR-001**: ユーザーはホーム画面の「+」ボタンからワークアウト記録を開始できなければならない
- **FR-002**: 記録画面表示時、タイマーは未開始状態で表示され、ユーザーが明示的に開始ボタンをタップした時点で経過時間の計測が始まらなければならない
- **FR-003**: ユーザーはタイマーを一時停止・再開できなければならない
- **FR-004**: ユーザーは種目選択モーダルから種目を追加できなければならない
- **FR-005**: 種目追加時、デフォルトのセット数は前回のワークアウト時のセット数と一致しなければならない。前回記録がない場合は3セットをデフォルトとする
- **FR-006**: 各セット行で重量とレップ数を入力できなければならない。重量は0〜999kg（0.5kg刻みスナップ入力）、レップ数は0〜999（整数）とする
- **FR-007**: 重量・レップ入力時に推定1RM（Epley式: weight × (1 + reps/30)）が自動計算・表示されなければならない
- **FR-008**: 前回記録のコピーボタンにより、個別セットまたは全セットの前回値を一括入力できなければならない。「前回記録」とは、その種目を最後に実施したワークアウト（別日含む）の記録を指す
- **FR-009**: ユーザーはセットの追加・削除ができなければならない
- **FR-010**: ユーザーは種目ごとおよびワークアウト全体にメモを記録できなければならない
- **FR-011**: 「完了」ボタンにより記録を確定し、完了サマリー画面に遷移しなければならない
- **FR-011a**: 記録中にタブバーで別画面に遷移した場合、種目が1件以上あれば進行中のワークアウトを下書き保存し、戻ったら続きから再開できなければならない
- **FR-011b**: 記録画面のタイマーバー左端に「×」（中止）ボタンを設ける。タップ時は破棄確認ダイアログを表示し、破棄を選択するとワークアウトを削除してホームに戻る

**種目選択**

- **FR-012**: 種目はお気に入り、マイ種目（カスタム）、カテゴリ別の3セクションで表示されなければならない
- **FR-013**: カテゴリタブ（全て、胸、背中、脚、肩、二頭、三頭、腹）によるフィルタリングができなければならない
- **FR-014**: 種目名のテキスト検索（リアルタイム）ができなければならない
- **FR-015**: 単一選択モードと複数選択モードの切り替えができなければならない
- **FR-016**: ユーザーは種目のお気に入り登録・解除ができなければならない
- **FR-017**: ユーザーはカスタム種目（名前、部位、器具）をインラインフォームで作成できなければならない
- **FR-018**: ユーザーは作成済みカスタム種目を編集できなければならない

**閲覧・編集**

- **FR-019**: ユーザーは過去のワークアウトの詳細（種目、セット、ボリューム、所要時間）を閲覧できなければならない
- **FR-020**: 閲覧画面から編集モードに切り替えられなければならない
- **FR-021**: 編集モードでは重量・レップ数の変更、セットの追加・削除、種目の追加・削除ができなければならない
- **FR-022**: 編集内容の保存により詳細画面に更新結果が反映されなければならない
- **FR-023**: 編集のキャンセル時に未保存の変更がある場合、破棄確認ダイアログを表示しなければならない
- **FR-024**: ユーザーはワークアウトを削除できなければならない。削除ボタンタップ時は確認ダイアログ（「ワークアウトを削除しますか？この操作は取り消せません。」）を表示し、確定後にホーム画面に遷移する

**カレンダー**

- **FR-025**: 月別カレンダービューでトレーニング実施日にドットマーカーを表示しなければならない
- **FR-026**: 月の前後ナビゲーションができなければならない
- **FR-027**: 日付タップにより、その日のワークアウトサマリー（所要時間、総ボリューム、種目数、セット数）と種目別セット詳細を表示しなければならない
- **FR-028**: カレンダー上のサマリーからワークアウト詳細画面に遷移できなければならない
- **FR-028a**: 全画面の戻るボタンはスタックベースナビゲーションを採用し、遷移元の画面に戻らなければならない（ホーム/カレンダー/サマリーいずれから来ても直前の画面に戻る）

**種目履歴**

- **FR-029**: 種目ごとの統計サマリー（最大重量、最大ボリューム、平均重量、総トレ回数、総ボリューム、最終PR日）を表示しなければならない
- **FR-030**: 過去3ヶ月の重量推移チャート（週平均棒グラフ）を表示しなければならない
- **FR-031**: PR（自己ベスト）履歴（最大重量1RM推定、最大ボリューム、最大レップス）を表示しなければならない
- **FR-032**: 全履歴を日付降順でリスト表示しなければならない

**完了サマリー**

- **FR-033**: ワークアウト完了時に統計サマリー（総ボリューム、種目数、セット数、完了率）を表示しなければならない。完了率はMVPでは常に100%（未入力セットは自動除外されるため、保存されたセットは全て完了扱い）
- **FR-034**: ストリーク（連続トレーニング日数）を表示しなければならない
- **FR-035**: 新記録（PR）が達成された場合、NEWバッジ付きでハイライト表示しなければならない
- **FR-036**: 種目別サマリー（セット数、ボリューム）を表示しなければならない

**ホーム画面**

- **FR-037**: 挨拶メッセージ（時間帯に応じた挨拶）とユーザー名を表示しなければならない
- **FR-038**: 今月のトレーニング日数と週間カレンダー（実施日チェックマーク付き）をストリークカードに表示しなければならない
- **FR-039**: 今週の目標セクションのUIエリアを表示しなければならない。MVPでは目標値の設定機能はスコープ外とし、プレースホルダーとして表示のみ（将来的にユーザーが設定画面で目標値を設定する想定）
- **FR-040**: 最近のワークアウトを最大3件表示し、タップで詳細画面に遷移できなければならない
- **FR-041**: クイック統計ウィジェット（今月の目標、次回予定、月間記録、総負荷量）を表示しなければならない

### Key Entities

- **ワークアウト (Workout)**: 1回のトレーニングセッション。ユーザー定義名はMVPスコープ外。表示上は含まれる種目の対象部位を自動抽出して表示する（例: 「胸、肩」）
  - `status`: `recording`（記録中/下書き） | `completed`（完了確定済み）
  - `createdAt`: 「+」ボタンタップ時刻
  - `startedAt`: タイマー初回開始時刻（nullable。タイマー未使用の場合null）
  - `completedAt`: 「完了」ボタンタップ時刻（nullable）
  - `timerStatus`: `notStarted` | `running` | `paused`
  - `elapsedSeconds`: タイマー累積経過秒数（一時停止中の時間を含まない）
  - `timerStartedAt`: 直近のrunning開始時刻（バックグラウンド復帰時に `elapsedSeconds + (now - timerStartedAt)` で正確な値を算出）
  - `memo`: ワークアウト全体メモ（nullable）
  - 所要時間の表示: `startedAt` がnullの場合は「--」と表示。nullでない場合は `completedAt - startedAt` を表示
  - ホーム画面・カレンダー・PR判定の対象は `status = completed` のみ

- **種目マスタ (Exercise)**: トレーニング種目の定義。名前、対象部位（胸/背中/脚/肩/二頭/三頭/腹）、器具種別（バーベル/ダンベル/マシン/ケーブル/自重）、カスタムフラグ、お気に入りフラグを持つ。コンパウンド/アイソレーションの動作タイプはMVP対象外。exercise-metaには「部位 • 器具」形式で表示する（例: 「胸 • バーベル」）

- **ワークアウト種目 (WorkoutExercise)**: ワークアウト内の各種目。種目マスタへの参照、表示順、種目メモ、含まれるセットのリストを持つ

- **セット (Set)**: 1セットの記録。セット番号、重量（Float, nullable）、レップ数（Int, nullable）、推定1RM（算出値）を持つ。weight/repsがnull = 未入力。完了時にnullセットは除外して保存。下書き保存時はnullセットを含めて保存する。入力バリデーション: 重量 0〜999kg（0.5kg刻み）、レップ数 0〜999（整数）

- **PR (PersonalRecord)**: 種目ごとの自己ベスト（Personal Record）。種類と計算定義:
  - `maxWeight`: 単一セットの最大重量（kg）
  - `maxVolume`: 1セッション内のその種目の全セット合計（Σ weight × reps）
  - `maxReps`: 任意の重量での単一セット最大レップ数
  - PR判定タイミング: 完了ボタン押下後に判定（リアルタイム判定はMVPスコープ外）
  - 編集・削除時: その種目のPRを全履歴から再計算して更新する

## Success Criteria

### Measurable Outcomes

- **SC-001**: ユーザーが新規ワークアウトの開始から1種目目のセット入力完了まで30秒以内で到達できる
- **SC-002**: 前回記録のコピー機能により、セット入力にかかる操作を1タップで完了できる
- **SC-003**: ワークアウト完了までの一連のフロー（開始→種目追加→セット入力→完了）を3分以内で完了できる（3種目9セットの場合）
- **SC-004**: カレンダーから任意の日付のワークアウト詳細に2タップ以内でアクセスできる
- **SC-005**: 種目検索で2文字入力すれば対象種目が表示される
- **SC-006**: 記録中にアプリがバックグラウンドに移行しても、復帰後にデータが失われない
- **SC-007**: 過去のワークアウトの編集→保存を含めた操作が直感的に行え、初回利用時でも迷わず操作できる

## Deferred Screens (今後実装予定)

以下の画面はMVP対象外とし、コア画面の安定後に順次実装する。

| # | 画面名 | 画面ID | 概要 | 優先度 |
|---|--------|--------|------|--------|
| 10 | 統計 | stats | 月間ボリューム推移チャート、筋群別分布、推定1RM（BIG3）表示 | P4 |
| 11 | 設定トップ | settings | ユーザープロファイル、データ管理、アプリ設定へのナビゲーション | P5 |
| 12 | バックアップ設定 | settings-backup | iCloud/Google Drive連携、自動バックアップ頻度設定 | P5 |
| 13 | タイマー設定 | settings-timer | デフォルトインターバル、自動タイマー開始、バイブレーション通知 | P5 |
| 14 | 単位設定 | settings-unit | 重量（kg/lb）、身長（cm/ft）、体重（kg/lb）の切り替え | P5 |
| 15 | AIアシスタント | ai | チャットUIによるメニュー提案、フォームチェック、栄養アドバイス | P6 |

## Clarifications

### Session 2026-02-21

- Q: タイマーの開始タイミング → A: 「+」タップ時に自動開始せず、ユーザーが明示的に開始ボタンをタップして開始
- Q: ワークアウト名の決定方法 → A: ユーザー定義名はMVPスコープ外。含まれる種目の対象部位を自動抽出して表示（例: 「胸、肩」）
- Q: 「前回記録」の定義 → A: その種目を最後に実施したワークアウトの記録（別日含む）
- Q: 種目0件で完了 → A: 「完了」ボタンを無効化。未入力セットで完了 → 未入力セットは保存せず入力済みのみ保存
- Q: 1日複数ワークアウト → A: MVPでは不可（1日1件）。将来的に対応の可能性あり
- Q: 記録中にタブバーで別画面に遷移した場合 → A: 下書き保存して遷移可能。戻ったら続きから再開
- Q: 「今週の目標」の値の出所 → A: MVPスコープ外。UIエリアのみ表示。将来的にユーザー設定
- Q: 重量の入力精度 → A: 0.5kg刻み（スナップ入力）
- Q: 初回起動時（データなし）のホーム画面 → A: 空状態メッセージ+「+」ボタン誘導
- Q: Workoutステータス → A: `recording` / `completed` の2値。draft と inProgress を分ける必要なし
- Q: タイマー状態モデル → A: `timerStatus(notStarted/running/paused)` + `elapsedSeconds` + `timerStartedAt` + `createdAt` + `startedAt(nullable)` + `completedAt`
- Q: Set の null許容 → A: weight/reps は nullable。完了時にnullセットを除外保存。下書きはnull含めて保存
- Q: ワークアウト削除の確認 → A: 確認ダイアログ必須
- Q: 全セット削除時 → A: 種目は即時削除扱い（0セット種目は保存しない）
- Q: 記録画面の破棄導線 → A: タイマーバー左端に「×」ボタン。破棄確認ダイアログ経由
- Q: 戻るボタンの遷移先 → A: スタックベースナビゲーション（遷移元に戻る）
- Q: recording中に「+」タップ → A: 進行中の記録を復帰表示
- Q: 種目0件で離脱 → A: 下書き保存しない（種目1件以上のみ保存）
- Q: ピッカー空セクション → A: 0件のセクションは非表示
- Q: カレンダーでワークアウトなし日タップ → A: 「この日のワークアウトはありません」表示。未来日はタップ無反応
- Q: 保存失敗時 → A: エラートースト表示。入力内容保持
- Q: PR判定タイミング → A: 完了ボタン押下後。リアルタイムはMVPスコープ外
- Q: PR再計算 → A: 編集・削除時に全履歴から再計算
- Q: タイマー未開始で完了 → A: 所要時間null。表示「--」
- Q: 入力バリデーション → A: 重量 0〜999kg、レップ 0〜999。自由度重視
- Q: 完了率 → A: MVPでは常に100%固定
- Q: コンパウンド/アイソレーション表記 → A: MVP不要。「部位 • 器具」形式に統一

## Assumptions

- MVPではユーザー認証・マルチデバイス同期は対象外。ローカルストレージのみで動作する
- 推定1RM計算にはEpley式を採用する（weight × (1 + reps/30)）
- 種目マスタのプリセットデータ（主要部位ごとに5-10種目）はアプリ初回起動時にシードされる
- 重量の入力単位はデフォルトkg。単位切り替えはMVPスコープ外（設定画面はMVP対象外）
- 統計画面（screen-stats）、AI画面（screen-ai）、設定画面群はMVP対象外
- タブバーのナビゲーションは「ホーム」「カレンダー」「+（記録開始）」の3機能で構成。「統計」「AI」タブはMVPでは非活性表示とする
- MVPでは1日1ワークアウトのみ。同日に複数ワークアウトの記録は不可とする（将来的に対応の可能性あり）
