# Feature Specification: +ボタンをワイヤーフレーム準拠に修正

**Feature Branch**: `005-fix-plus-button-wf`  
**Created**: 2026-02-21  
**Status**: Draft  
**Input**: User description: "Issue #101: + ボタンがWF通りではない"

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 中央の+ボタンがWFと同じ見た目で表示される (Priority: P1)

ユーザーがホーム画面を表示したとき、タブバー中央に青い円形の+ボタンが浮き上がって表示され、ボタン本体が欠けずに視認できる。

**Why this priority**: +ボタンは記録開始の主要導線であり、WFとの差異は操作性と一貫性を直接損なうため。

**Independent Test**: ホーム画面表示時に中央+ボタンのサイズ・位置・色・影を目視確認するだけで検証できる。

**Acceptance Scenarios**:

1. **Given** ホーム画面が表示されている, **When** タブバー中央を確認する, **Then** 56x56 の青い円形+ボタンがタブバー上部へ浮き出た状態で表示される
2. **Given** タブバー中央の+ボタンを確認する, **When** ボタン境界を見る, **Then** 背景色ボーダーとドロップシャドウが表示される

---

### User Story 2 - +ボタンタップで記録画面へ遷移できる (Priority: P1)

ユーザーが中央の+ボタンをタップすると、ワークアウト記録画面に遷移できる。

**Why this priority**: 見た目の修正だけでなく、主要導線の機能維持が必須であるため。

**Independent Test**: +ボタンをタップして `RecordStack` への遷移発火を確認する。

**Acceptance Scenarios**:

1. **Given** 任意のタブ画面を表示している, **When** +ボタンをタップする, **Then** 記録画面遷移が発火する

---

### User Story 3 - セーフエリア差分でも+ボタンが崩れない (Priority: P2)

ユーザーが下部セーフエリアのある端末で表示しても、+ボタンと他タブアイテムのレイアウトが崩れない。

**Why this priority**: 端末差分でボタンが見切れると再発になるため。

**Independent Test**: `insets.bottom` がある状態でタブラベルと+ボタンの位置関係を確認する。

**Acceptance Scenarios**:

1. **Given** 下部セーフエリアを持つ端末, **When** タブバーを表示する, **Then** +ボタンがクリップされず中央に配置される
2. **Given** 下部セーフエリアを持つ端末, **When** 他タブラベルを確認する, **Then** ラベルとアイコンが下部セーフエリアを避けて表示される

### Edge Cases

- 下部セーフエリアが 0 の端末でも、+ボタンが過度に下がらない
- +ボタン押下時でも背景色と境界線のコントラストが維持される
- 中央スロットに通常タブアイコン/ラベルが重複表示されない

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: システムは中央アクションを `56x56` の円形ボタンとして表示しなければならない
- **FR-002**: システムは中央アクションに青背景、背景色ボーダー（4px）、ドロップシャドウを適用しなければならない
- **FR-003**: システムは中央アクションをタブバー上端から浮き上がった位置で表示し、見切れを発生させてはならない
- **FR-004**: システムは中央アクション内に視認可能な `+` 記号を中央配置しなければならない
- **FR-005**: ユーザーは中央アクション押下で `RecordStack` へ遷移できなければならない
- **FR-006**: システムは下部セーフエリア値に応じてタブバー下段高さを調整しなければならない
- **FR-007**: システムは中央スロットで通常タブのアイコン・ラベルを描画してはならない

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 主要端末（iOSシミュレータ）で中央+ボタンの欠けが再現しない（表示欠け0件）
- **SC-002**: +ボタン押下時の記録画面遷移が100%成功する
- **SC-003**: UIテストで `record-tab-button` がWF定義のサイズ・装飾（影/境界/背景）を満たす
- **SC-004**: タブバー中央に通常タブアイコンが重複表示されない
