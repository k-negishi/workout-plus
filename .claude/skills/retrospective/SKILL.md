---
name: retrospective
description: >
  会話の途中や終わりに振り返りを行い、再利用可能なスキルやルールを抽出・提案するスキル。
  「振り返って」「ここまでのまとめ」「スキルに追加」「ルールに追加」「学びを抽出」「パターン化」
  などのフレーズでトリガーする。会話中に繰り返し現れた修正パターン・暗黙のルール・
  品質基準・ワークフローを特定し、スキルファイルや rules への追加候補として構造化して提示する。
allowed-tools: Read, Write, Edit
metadata:
  author: workout-plus
  version: '1.0.0'
---

# Retrospective スキル

会話中に蓄積された暗黙知を、再利用可能なスキル・ルール・メモリとして抽出するスキルです。

## 抽出の観点

会話全体を以下の観点でスキャンする:

1. **修正パターン** — ユーザーが繰り返し指摘・修正した内容（同じ種類の修正が2回以上）
2. **暗黙のルール** — 明示されていないが反応から読み取れる品質基準や好み
3. **ワークフロー** — 何度も繰り返された作業手順やツールの使い方
4. **成功した手法** — 「いいね」「これでOK」と反応があったアプローチ
5. **失敗した手法** — やり直しになった、または却下されたアプローチ

## 分類

抽出した学びを以下の3カテゴリに分類する:

| カテゴリ | 保存先 | 条件 |
|---|---|---|
| 新規スキル | `.claude/skills/<name>/SKILL.md` | 複数ステップの手順、汎用性が高い |
| 既存スキルへの追記 | 対象スキルの `SKILL.md` | 既存スキルのエッジケースや補足ルール |
| プロジェクトメモリ | `MEMORY.md` | プロジェクト固有の知見・設定・嗜好 |

## 保存先の優先順位

まず「スキルに抽象化できるか」を問う。デフォルトはスキル。

1. **既存スキルに追記**（優先）— 既存スキルのエッジケース・補足事例に当てはまるなら
2. **新規スキルを作成**（優先）— 汎用的で複数ステップの手順・パターンなら
3. **MEMORY.md**（補助）— プロジェクト固有すぎてスキルに抽象化できない知見のみ
4. **.claude/rules/**（最後）— 常時ロードして強制したい不変ルールのみ

提案時のデフォルト質問は「どのスキルに書くか、新規スキルか？」。
「MEMORY か rules か」は抽象化できないと判断した場合にのみ提示する。

## 提案フォーマット

```
## 提案 [番号]: [タイトル]

**分類**: 新規スキル / 既存スキル追記（対象: <name>）/ メモリ
**根拠**: 会話中のどのやり取りから抽出したか
**推奨度**: ★★★（高）/ ★★☆（中）/ ★☆☆（低）

[具体的な内容]
```

## 実行フロー

1. **会話スキャン** — 上記5観点で会話全体を読み返す
2. **重複確認** — `.claude/skills/` 配下の既存スキルと `.claude/rules/` を確認し、カバー済みの内容を除外
3. **提案一覧の提示** — 採用候補を推奨度順に列挙
4. **ユーザー確認** — どれを採用するか確認する。このスキルがあると次回以降何が嬉しいかを説明する。
5. **ファイル更新** — 採用された提案をスキルファイルまたは `.claude/rules/` に書き込む

## 品質基準

- **過剰抽出しない** — 本当に再利用価値があるものだけ。一度きりの修正はノイズ。ピーキーなものは不採用。
- **具体的に書く** — 「品質を上げる」ではなく「表を作るときはヘッダー行に背景色を付ける」レベルで
- **ユーザーの意図を汲む** — 表面的な修正の裏にある「なぜ」を考える
- **既存との重複を避ける** — 提案前に必ず既存スキルと .claude/rules/ を確認する

## クイックコマンド

```text
/retrospective
```
